<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
   <link rel="shortcut icon" type="image/ico" href=/images/favicon.ico />
  
  <link href="/assets/css/dist-style.css" rel="stylesheet" />
  <link href="/assets/css/fonts.css" rel="stylesheet" />
  
  <script src="https://unpkg.com/typeit@8.8.4/dist/index.umd.js"></script>
   <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>In unit tests, I favor Detroit over London | Srikanth Sastry</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="In unit tests, I favor Detroit over London" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="This is Srikanth Sastry’s personal blog, where I share my thoughts on technology, programming, and life in general. Join me on this journey of exploration and learning." />
<meta property="og:description" content="This is Srikanth Sastry’s personal blog, where I share my thoughts on technology, programming, and life in general. Join me on this journey of exploration and learning." />
<link rel="canonical" href="https://srikanth.sastry.name/in-unit-tests-favor-detroit-over-london/" />
<meta property="og:url" content="https://srikanth.sastry.name/in-unit-tests-favor-detroit-over-london/" />
<meta property="og:site_name" content="Srikanth Sastry" />
<meta property="og:image" content="https://srikanth.sastry.name/images/detroit-wall-frame.jpg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-06-26T00:00:00+00:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://srikanth.sastry.name/images/detroit-wall-frame.jpg" />
<meta property="twitter:title" content="In unit tests, I favor Detroit over London" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-06-26T00:00:00+00:00","datePublished":"2022-06-26T00:00:00+00:00","description":"This is Srikanth Sastry’s personal blog, where I share my thoughts on technology, programming, and life in general. Join me on this journey of exploration and learning.","headline":"In unit tests, I favor Detroit over London","image":"https://srikanth.sastry.name/images/detroit-wall-frame.jpg","mainEntityOfPage":{"@type":"WebPage","@id":"https://srikanth.sastry.name/in-unit-tests-favor-detroit-over-london/"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://srikanth.sastry.name/images/site_logo.png"}},"url":"https://srikanth.sastry.name/in-unit-tests-favor-detroit-over-london/"}</script>
<!-- End Jekyll SEO tag -->
 
</head>

<body class="bg-white text-gray-900 dark:bg-gray-700 dark:text-slate-100">
  
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      new TypeIt("h1", {}).go();
    });
  </script>
   <nav class="absolute top-0 left-0 right-0 flex w-full flex-wrap items-center justify-between py-4">
  <div class="flex w-full flex-wrap items-center justify-between px-5">
    <a class="flex" href="/" aria-label="Andres Chacon - Developer">
      <img src="/images/site_logo.png" alt="webpage logo" class="block h-8 w-auto">
      <p class="pl-4 hidden md:block text-lg font-bold">Srikanth Sastry <span
          class="text-mulish text-sm font-normal">~/in-unit-tests-favor-detroit-over-london/</span>
      </p>
    </a>

    <div class="flex divide-x">
      
      
      
      
      <div><a class="px-4 hover:text-sky-400 "
          href="/archives/">Archives</a></div>
      
      
      
      
      
      <div><a class="px-4 hover:text-sky-400 "
          href="/publications/">Publications</a></div>
      
      
      
      <div><a class="px-4 hover:text-sky-400 "
          href="/touchstone-radio-episodes/">Touchstone Radio Episodes</a></div>
      
      
      
      
      
      
      
      
      
      
      
      
      
      

      
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const currentLangButton = document.querySelector('.current-language');
      const dropdownContent = document.querySelector('.dropdown-content');

      if (currentLangButton && dropdownContent) {
        currentLangButton.addEventListener('click', function () {
          dropdownContent.classList.toggle('hidden');
        });

        document.addEventListener('click', function (event) {
          if (!currentLangButton.contains(event.target) && !dropdownContent.contains(event.target)) {
            dropdownContent.classList.add('hidden');
          }
        });
      }
    });
  </script>
</nav>
 <link rel="stylesheet" href="/assets/css/monokai.css">
<div class="container mx-auto">
  <div id="post" class="prose max-w-[75ch] prose-neutral mx-auto pb-10 pt-20 lg:pt-[90px] lg:pb-20">
    <div class="pb-4">
      <a href="https://srikanth.sastry.name/category/professional"
        class="no-underline font-mulish text-sm hover:text-sky-400 text-gray-500">
        PROFESSIONAL
      </a>
    </div>

    <h1 class="text-left text-2xl font-bold md:text-5xl text-black">In unit tests, I favor Detroit over London</h1>

    <div class="flex flex-col md:flex-row text-sm font-mulish justify-between items-center">
      <div class="flex">
        <p></p>
        <p class="px-2">•</p>
        <p>26 June 2022</p>
        <p class="px-2">•</p>
        <p>
          
           6 mins  </p>
      </div>
      <div>
        <div class="sharing-buttons flex  flex-wrap gap-1 justify-center ">
  <a class="border-2 duration-200 ease inline-flex items-center mb-1 mr-1 transition p-2 rounded-full text-white border-slate-600 bg-slate-600 hover:bg-slate-700 hover:border-slate-700"
    target="_blank" rel="noopener"
    href="https://facebook.com/sharer/sharer.php?u=https://srikanth.sastry.name/in-unit-tests-favor-detroit-over-london/"
    aria-label="Share on Facebook">
    <svg aria-hidden="true" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"
      class="w-5 h-5">
      <title>Facebook</title>
      <path
        d="M379 22v75h-44c-36 0-42 17-42 41v54h84l-12 85h-72v217h-88V277h-72v-85h72v-62c0-72 45-112 109-112 31 0 58 3 65 4z">
      </path>
    </svg>
  </a>
  <a class="border-2 duration-200 ease inline-flex items-center mb-1 mr-1 transition p-2 rounded-full text-white border-slate-600 bg-slate-600 hover:bg-slate-700 hover:border-slate-700"
    target="_blank" rel="noopener"
    href="https://twitter.com/intent/tweet?url=https://srikanth.sastry.name/in-unit-tests-favor-detroit-over-london/&text=In unit tests, I favor Detroit over London"
    aria-label="Share on Twitter">
    <svg aria-hidden="true" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"
      class="w-5 h-5">
      <title>Twitter</title>
      <path
        d="m459 152 1 13c0 139-106 299-299 299-59 0-115-17-161-47a217 217 0 0 0 156-44c-47-1-85-31-98-72l19 1c10 0 19-1 28-3-48-10-84-52-84-103v-2c14 8 30 13 47 14A105 105 0 0 1 36 67c51 64 129 106 216 110-2-8-2-16-2-24a105 105 0 0 1 181-72c24-4 47-13 67-25-8 24-25 45-46 58 21-3 41-8 60-17-14 21-32 40-53 55z">
      </path>
    </svg>
  </a>
  <a class="border-2 duration-200 ease inline-flex items-center mb-1 mr-1 transition p-2 rounded-full text-white border-slate-600 bg-slate-600 hover:bg-slate-700 hover:border-slate-700"
    target="_blank" rel="noopener"
    href="https://www.linkedin.com/shareArticle?mini=true&url=https://srikanth.sastry.name/in-unit-tests-favor-detroit-over-london/&title=In unit tests, I favor Detroit over London&summary=In unit tests, I favor Detroit over London&source=https://srikanth.sastry.name"
    aria-label="Share on Linkedin">
    <svg aria-hidden="true" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"
      class="w-5 h-5">
      <title>Linkedin</title>
      <path
        d="M136 183v283H42V183h94zm6-88c1 27-20 49-53 49-32 0-52-22-52-49 0-28 21-49 53-49s52 21 52 49zm333 208v163h-94V314c0-38-13-64-47-64-26 0-42 18-49 35-2 6-3 14-3 23v158h-94V183h94v41c12-20 34-48 85-48 62 0 108 41 108 127z">
      </path>
    </svg>
  </a>
  <a class="border-2 duration-200 ease inline-flex items-center mb-1 mr-1 transition p-2 rounded-full text-white border-slate-600 bg-slate-600 hover:bg-slate-700 hover:border-slate-700"
    target="_blank" rel="noopener"
    href="https://pinterest.com/pin/create/button/?url=https://srikanth.sastry.name/in-unit-tests-favor-detroit-over-london/&media=https://srikanth.sastry.name&description=In unit tests, I favor Detroit over London"
    aria-label="Share on Pinterest" draggable="false">
    <svg aria-hidden="true" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"
      class="w-5 h-5">
      <title>Pinterest</title>
      <path
        d="M268 6C165 6 64 75 64 186c0 70 40 110 64 110 9 0 15-28 15-35 0-10-24-30-24-68 0-81 62-138 141-138 68 0 118 39 118 110 0 53-21 153-90 153-25 0-46-18-46-44 0-38 26-74 26-113 0-67-94-55-94 25 0 17 2 36 10 51-14 60-42 148-42 209 0 19 3 38 4 57 4 3 2 3 7 1 51-69 49-82 72-173 12 24 44 36 69 36 106 0 154-103 154-196C448 71 362 6 268 6z">
      </path>
    </svg>
  </a>
  <a class="border-2 duration-200 ease inline-flex items-center mb-1 mr-1 transition p-2 rounded-full text-white border-slate-600 bg-slate-600 hover:bg-slate-700 hover:border-slate-700"
    target="_blank" rel="noopener"
    href="https://reddit.com/submit/?url=https://srikanth.sastry.name/in-unit-tests-favor-detroit-over-london/&resubmit=true&title=In unit tests, I favor Detroit over London"
    aria-label="Share on Reddit" draggable="false">
    <svg aria-hidden="true" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"
      class="w-5 h-5">
      <title>Reddit</title>
      <path
        d="M440 204c-15 0-28 6-38 15-35-24-83-40-137-42l28-125 88 20c0 22 18 39 39 39 22 0 40-18 40-39s-17-40-40-40c-15 0-28 9-35 22l-97-22c-5-1-10 3-11 7l-31 138c-53 2-100 18-136 43a53 53 0 0 0-38-16c-56 0-74 74-23 100l-3 24c0 84 95 152 210 152 117 0 211-68 211-152 0-8-1-17-3-25 50-25 32-99-24-99zM129 309a40 40 0 1 1 80 0 40 40 0 0 1-80 0zm215 93c-37 37-139 37-176 0-4-3-4-9 0-13s10-4 13 0c28 28 120 29 149 0 4-4 10-4 14 0s4 10 0 13zm-1-54c-22 0-39-17-39-39a39 39 0 1 1 39 39z">
      </path>
    </svg>
  </a>
  <a class="border-2 duration-200 ease inline-flex items-center mb-1 mr-1 transition p-2 rounded-full text-white border-slate-600 bg-slate-600 hover:bg-slate-700 hover:border-slate-700"
    target="_blank" rel="noopener"
    href="https://wa.me/?text=In%20unit%20tests,%20I%20favor%20Detroit%20over%20London%20https://srikanth.sastry.name"
    aria-label="Share on Whatsapp" draggable="false">
    <svg aria-hidden="true" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"
      class="w-5 h-5">
      <title>Whatsapp</title>
      <path
        d="M413 97A222 222 0 0 0 64 365L31 480l118-31a224 224 0 0 0 330-195c0-59-25-115-67-157zM256 439c-33 0-66-9-94-26l-7-4-70 18 19-68-4-7a185 185 0 0 1 287-229c34 36 56 82 55 131 1 102-84 185-186 185zm101-138c-5-3-33-17-38-18-5-2-9-3-12 2l-18 22c-3 4-6 4-12 2-32-17-54-30-75-66-6-10 5-10 16-31 2-4 1-7-1-10l-17-41c-4-10-9-9-12-9h-11c-4 0-9 1-15 7-5 5-19 19-19 46s20 54 23 57c2 4 39 60 94 84 36 15 49 17 67 14 11-2 33-14 37-27s5-24 4-26c-2-2-5-4-11-6z">
      </path>
    </svg>
  </a>
  <a class="border-2 duration-200 ease inline-flex items-center mb-1 mr-1 transition p-2 rounded-full text-white border-slate-600 bg-slate-600 hover:bg-slate-700 hover:border-slate-700"
    target="_blank" rel="noopener"
    href="https://telegram.me/share/url?text=In%20unit%20tests,%20I%20favor%20Detroit%20over%20London&url=https://srikanth.sastry.name/in-unit-tests-favor-detroit-over-london/"
    aria-label="Share on Telegram" draggable="false">
    <svg aria-hidden="true" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"
      class="w-5 h-5">
      <title>Telegram</title>
      <path
        d="M256 8a248 248 0 1 0 0 496 248 248 0 0 0 0-496zm115 169c-4 39-20 134-28 178-4 19-10 25-17 25-14 2-25-9-39-18l-56-37c-24-17-8-25 6-40 3-4 67-61 68-67l-1-4-5-1q-4 1-105 70-15 10-27 9c-9 0-26-5-38-9-16-5-28-7-27-16q1-7 18-14l145-62c69-29 83-34 92-34 2 0 7 1 10 3l4 7a43 43 0 0 1 0 10z">
      </path>
    </svg>
  </a>
  <a class="border-2 duration-200 ease inline-flex items-center mb-1 mr-1 transition p-2 rounded-full text-white border-slate-600 bg-slate-600 hover:bg-slate-700 hover:border-slate-700"
    target="_blank" rel="noopener"
    href="mailto:?subject=In%20unit%20tests,%20I%20favor%20Detroit%20over%20London&body=https://srikanth.sastry.name/in-unit-tests-favor-detroit-over-london/"
    aria-label="Share by Email" draggable="false">
    <svg aria-hidden="true" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"
      class="w-5 h-5">
      <title>Email</title>
      <path
        d="M464 64a48 48 0 0 1 29 86L275 314c-11 8-27 8-38 0L19 150a48 48 0 0 1 29-86h416zM218 339c22 17 54 17 76 0l218-163v208c0 35-29 64-64 64H64c-35 0-64-29-64-64V176l218 163z">
      </path>
    </svg>
  </a>
</div>

      </div>
    </div>

    <img class="w-full" src="/images/detroit-wall-frame.jpg" alt="In unit tests, I favor Detroit over London">

    <div class="my-6">
      <!-- ![](/images/detroit-wall-frame.jpg) -->

<p><a href="/defining-unit-tests-two-schools-of-thought/">Recall</a> the two schools of thought around unit test: Detroit, and London. Briefly, the Detroit school considers a ‘unit’ of software to be tested as a ‘behavior’ that consists of one or more classes, and unit tests replace only shared and/or external dependencies with test doubles. In contrast, the London school consider a ‘unit’ to be a single class, and replaces all dependencies with test doubles.</p>

<table>
  <thead>
    <tr>
      <th>School</th>
      <th>Unit</th>
      <th>Isolation</th>
      <th>Speed</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Detroit</td>
      <td>Behavior</td>
      <td>Replace shared and external dependencies with test doubles</td>
      <td>‘fast’</td>
    </tr>
    <tr>
      <td>London</td>
      <td>Class</td>
      <td>Replace all dependencies (internal, external, shared, etc.) with test doubles</td>
      <td>‘fast’</td>
    </tr>
  </tbody>
</table>

<p>See this <a href="/defining-unit-tests-two-schools-of-thought/">note</a> for a more detailed discussion on the two schools.</p>

<p>Each school have it’s proponents and each school of thought has it’s advantages. I, personally, prefer the Detroit school over the London school. I have noticed that following the Detroit school has made my test suite more <a href="/unit-test-attributes-and-their-trade-offs/">accurate and complete</a>.</p>

<h2 id="improved-accuracy-when-refactoring">Improved Accuracy (when refactoring)</h2>

<p>In <a href="/unit-test-attributes-and-their-trade-offs/">the post on attributes of a unit test suite</a>, I defined <em>accuracy</em> as the measure of how likely it is that a test failure denotes a bug in your diff. I have noticed that unit test suites that follow the Detroit school tended to have high accuracy when your codebase has a lot of classes that are public <em>de jour</em>, but private <em>de facto</em>.</p>

<p>Codebases I have worked in typically have hundreds of classes, but only a handful of those classes are actually referenced by external classes/services. Most of the classes are part of a private API that is internal to the service. Let’s take a concrete illustration. Say, there is a class <code class="language-plaintext highlighter-rouge">Util</code> that is used only by classes <code class="language-plaintext highlighter-rouge">Feature1</code> and <code class="language-plaintext highlighter-rouge">Feature2</code> within the codebase, and has no other callers; in fact, <code class="language-plaintext highlighter-rouge">Util</code> exists only to help classes <code class="language-plaintext highlighter-rouge">Feature1</code> and <code class="language-plaintext highlighter-rouge">Feature2</code> implement their respective user journies. Here although <code class="language-plaintext highlighter-rouge">Util</code> is a class with public methods, in reality <code class="language-plaintext highlighter-rouge">Util</code> really represents the common implementation details for <code class="language-plaintext highlighter-rouge">Feature1</code> and <code class="language-plaintext highlighter-rouge">Feature2</code>.</p>

<h3 id="in-london">In London</h3>
<p>According to the London school, all unit tests for <code class="language-plaintext highlighter-rouge">Feature1</code> and <code class="language-plaintext highlighter-rouge">Fearure2</code> should be replacing <code class="language-plaintext highlighter-rouge">Util</code> with a test double. Thus, tests for <code class="language-plaintext highlighter-rouge">Feature1</code> and <code class="language-plaintext highlighter-rouge">Feature2</code> look as follows.
<img src="/images/London-School-Accuracy-Before.png" alt="" /></p>

<p>Now, say we want to do some refactoring that spans <code class="language-plaintext highlighter-rouge">Feature1</code>, <code class="language-plaintext highlighter-rouge">Feature2</code>, and <code class="language-plaintext highlighter-rouge">Util</code>. Since <code class="language-plaintext highlighter-rouge">Util</code> is really has a private API with <code class="language-plaintext highlighter-rouge">Feature1</code> and <code class="language-plaintext highlighter-rouge">Feature2</code>, we can change the API of <code class="language-plaintext highlighter-rouge">Util</code> in concert with <code class="language-plaintext highlighter-rouge">Feature1</code> and <code class="language-plaintext highlighter-rouge">Feature2</code> in a single diff. Now, since the tests for <code class="language-plaintext highlighter-rouge">Feature1</code> and <code class="language-plaintext highlighter-rouge">Feature2</code> use test doubles for <code class="language-plaintext highlighter-rouge">Util</code>, and we have changed <code class="language-plaintext highlighter-rouge">Util</code>’s API, we need to change the test doubles’ implementation to match the new API. After making these changes, say, the tests for <code class="language-plaintext highlighter-rouge">Util</code> pass, but the tests for <code class="language-plaintext highlighter-rouge">Feature1</code> fail.</p>

<p><img src="/images/London-School-Accuracy-After.png" alt="" /></p>

<p>Now, does the test failure denote a bug in our refactoring, or does it denote an error in how we modified the tests? This is not easy to determine except by stepping through the tests manually. Thus, the test suite does not have high accuracy.</p>

<h3 id="in-detroit">In Detroit</h3>
<p>In contrast, according to the Detroit school, the unit tests for <code class="language-plaintext highlighter-rouge">Feature1</code> and <code class="language-plaintext highlighter-rouge">Feature2</code> can use <code class="language-plaintext highlighter-rouge">Util</code> as such (without test doubles). The tests for <code class="language-plaintext highlighter-rouge">Feature1</code> and <code class="language-plaintext highlighter-rouge">Feature2</code> look as follows.</p>

<p><img src="/images/Detroit-School-Accuracy-Before.png" alt="" /></p>

<p>If we do the same refactoring across <code class="language-plaintext highlighter-rouge">Feature1</code>, <code class="language-plaintext highlighter-rouge">Feature2</code>, and <code class="language-plaintext highlighter-rouge">Util</code> classes, note that we do not need to make any changes to the tests for <code class="language-plaintext highlighter-rouge">Feature1</code> and <code class="language-plaintext highlighter-rouge">Feature2</code>. If the tests fail, then we have a very high signal that the refactoring has a bug in it; this makes for a high accuracy test suite!</p>

<p><img src="/images/Detroit-School-Accuracy-After.png" alt="" /></p>

<p>Furthermore, since <code class="language-plaintext highlighter-rouge">Util</code> exists only to serve <code class="language-plaintext highlighter-rouge">Feature1</code> and <code class="language-plaintext highlighter-rouge">Feature2</code>, you can argue that <code class="language-plaintext highlighter-rouge">Util</code> doesn’t even need any unit tests of it’s own; the tests for <code class="language-plaintext highlighter-rouge">Feature1</code> and <code class="language-plaintext highlighter-rouge">Feature2</code> cover the spread!</p>

<h2 id="improved-completeness-around-regressions">Improved Completeness (around regressions)</h2>
<p>In <a href="/unit-test-attributes-and-their-trade-offs/">the post on attributes of a unit test suite</a>, I defined <em>completeness</em> as the measure of how likely a bug introduced by your diff is caught by your test suite. I have seen unit tests following the Detroit school catching bugs/regressions more easily, especially when the bugs are introduced by API contract violations.</p>

<p>It easier to see this with an example. Say, there is a class <code class="language-plaintext highlighter-rouge">Outer</code> that uses a class <code class="language-plaintext highlighter-rouge">Inner</code>, and <code class="language-plaintext highlighter-rouge">Inner</code> is an internal non-shared dependency. Let’s say that the class <code class="language-plaintext highlighter-rouge">Outer</code> depends on a specific contract, (let’s call it) alpha, that <code class="language-plaintext highlighter-rouge">Inner</code>’s API satisfies, for correctness. Recall that we practically trade off between the speed of a test suite and it’s completeness, let us posit that the incompleteness here is that we do not have a test for <code class="language-plaintext highlighter-rouge">Inner</code> satisfying contract alpha.</p>

<h3 id="in-london-1">In London</h3>

<p>Following the London school, the tests for <code class="language-plaintext highlighter-rouge">Outer</code> replace the instance of <code class="language-plaintext highlighter-rouge">Inner</code> with a test double, and since the test double is a replacement for <code class="language-plaintext highlighter-rouge">Inner</code>, it also satisfies contract alpha. See the illustration below for clarity.</p>

<p><img src="/images/London-School-Completeness-Before.png" alt="Image not found: /images/London-School-Completeness-Before.png" title="Image not found: /images/London-School-Completeness-Before.png" /></p>

<p>Now, let’s assume that we have a diff that ‘refactors’ <code class="language-plaintext highlighter-rouge">Inner</code>, but in that process, it introduces a bug that violates contract alpha. Since we have assumed an incompleteness in our test suite around contract alpha, the unit test for <code class="language-plaintext highlighter-rouge">Inner</code> does not catch this regression. Also, since the tests for <code class="language-plaintext highlighter-rouge">Outer</code> use a test double for <code class="language-plaintext highlighter-rouge">Inner</code> (which satisfies contract alpha), those tests do not detect this regression either.</p>

<p><img src="/images/London-School-Completeness-After.png" alt="" /></p>

<h3 id="in-detroit-1">In Detroit</h3>

<p>If we were to follow the Detroit school instead, then the unit tests for <code class="language-plaintext highlighter-rouge">Outer</code> instantiate and use <code class="language-plaintext highlighter-rouge">Inner</code> when testing the correctness of <code class="language-plaintext highlighter-rouge">Outer</code>, as shown below. Note that the test incompletness w.r.t. contract alpha still exists.
<img src="/images/Detroit-School-Completeness-Before.png" alt="" /></p>

<p>Here, like before, assume that we have a diff that ‘refactors’ <code class="language-plaintext highlighter-rouge">Inner</code> and breaks contract alpha. This time around, although the test suite for <code class="language-plaintext highlighter-rouge">Inner</code> does not catch the regression, the test suite for <code class="language-plaintext highlighter-rouge">Outer</code> will catch the regression. Why? Because the correctness of <code class="language-plaintext highlighter-rouge">Outer</code> depends on <code class="language-plaintext highlighter-rouge">Inner</code> satisfying contract alpha. When that contract is violated <code class="language-plaintext highlighter-rouge">Outer</code> fails to satisfy correctness, and is therefore, it’s unit tests fail/</p>

<p><img src="/images/Detroit-School-Completeness-After.png" alt="" /></p>

<p>In effect, even though we did not have an explicit test for contract alpha, the unit tests written according to the Detroit school tend to have better completeness than the ones written following the London school.</p>

    </div>

    <div class="mx-auto py-8">
      <p class="text-center font-extrabold italic">
        Like it? Share it!
      </p>
      <div class="sharing-buttons flex  flex-wrap gap-1 justify-center ">
  <a class="border-2 duration-200 ease inline-flex items-center mb-1 mr-1 transition p-2 rounded-full text-white border-slate-600 bg-slate-600 hover:bg-slate-700 hover:border-slate-700"
    target="_blank" rel="noopener"
    href="https://facebook.com/sharer/sharer.php?u=https://srikanth.sastry.name/in-unit-tests-favor-detroit-over-london/"
    aria-label="Share on Facebook">
    <svg aria-hidden="true" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"
      class="w-5 h-5">
      <title>Facebook</title>
      <path
        d="M379 22v75h-44c-36 0-42 17-42 41v54h84l-12 85h-72v217h-88V277h-72v-85h72v-62c0-72 45-112 109-112 31 0 58 3 65 4z">
      </path>
    </svg>
  </a>
  <a class="border-2 duration-200 ease inline-flex items-center mb-1 mr-1 transition p-2 rounded-full text-white border-slate-600 bg-slate-600 hover:bg-slate-700 hover:border-slate-700"
    target="_blank" rel="noopener"
    href="https://twitter.com/intent/tweet?url=https://srikanth.sastry.name/in-unit-tests-favor-detroit-over-london/&text=In unit tests, I favor Detroit over London"
    aria-label="Share on Twitter">
    <svg aria-hidden="true" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"
      class="w-5 h-5">
      <title>Twitter</title>
      <path
        d="m459 152 1 13c0 139-106 299-299 299-59 0-115-17-161-47a217 217 0 0 0 156-44c-47-1-85-31-98-72l19 1c10 0 19-1 28-3-48-10-84-52-84-103v-2c14 8 30 13 47 14A105 105 0 0 1 36 67c51 64 129 106 216 110-2-8-2-16-2-24a105 105 0 0 1 181-72c24-4 47-13 67-25-8 24-25 45-46 58 21-3 41-8 60-17-14 21-32 40-53 55z">
      </path>
    </svg>
  </a>
  <a class="border-2 duration-200 ease inline-flex items-center mb-1 mr-1 transition p-2 rounded-full text-white border-slate-600 bg-slate-600 hover:bg-slate-700 hover:border-slate-700"
    target="_blank" rel="noopener"
    href="https://www.linkedin.com/shareArticle?mini=true&url=https://srikanth.sastry.name/in-unit-tests-favor-detroit-over-london/&title=In unit tests, I favor Detroit over London&summary=In unit tests, I favor Detroit over London&source=https://srikanth.sastry.name"
    aria-label="Share on Linkedin">
    <svg aria-hidden="true" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"
      class="w-5 h-5">
      <title>Linkedin</title>
      <path
        d="M136 183v283H42V183h94zm6-88c1 27-20 49-53 49-32 0-52-22-52-49 0-28 21-49 53-49s52 21 52 49zm333 208v163h-94V314c0-38-13-64-47-64-26 0-42 18-49 35-2 6-3 14-3 23v158h-94V183h94v41c12-20 34-48 85-48 62 0 108 41 108 127z">
      </path>
    </svg>
  </a>
  <a class="border-2 duration-200 ease inline-flex items-center mb-1 mr-1 transition p-2 rounded-full text-white border-slate-600 bg-slate-600 hover:bg-slate-700 hover:border-slate-700"
    target="_blank" rel="noopener"
    href="https://pinterest.com/pin/create/button/?url=https://srikanth.sastry.name/in-unit-tests-favor-detroit-over-london/&media=https://srikanth.sastry.name&description=In unit tests, I favor Detroit over London"
    aria-label="Share on Pinterest" draggable="false">
    <svg aria-hidden="true" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"
      class="w-5 h-5">
      <title>Pinterest</title>
      <path
        d="M268 6C165 6 64 75 64 186c0 70 40 110 64 110 9 0 15-28 15-35 0-10-24-30-24-68 0-81 62-138 141-138 68 0 118 39 118 110 0 53-21 153-90 153-25 0-46-18-46-44 0-38 26-74 26-113 0-67-94-55-94 25 0 17 2 36 10 51-14 60-42 148-42 209 0 19 3 38 4 57 4 3 2 3 7 1 51-69 49-82 72-173 12 24 44 36 69 36 106 0 154-103 154-196C448 71 362 6 268 6z">
      </path>
    </svg>
  </a>
  <a class="border-2 duration-200 ease inline-flex items-center mb-1 mr-1 transition p-2 rounded-full text-white border-slate-600 bg-slate-600 hover:bg-slate-700 hover:border-slate-700"
    target="_blank" rel="noopener"
    href="https://reddit.com/submit/?url=https://srikanth.sastry.name/in-unit-tests-favor-detroit-over-london/&resubmit=true&title=In unit tests, I favor Detroit over London"
    aria-label="Share on Reddit" draggable="false">
    <svg aria-hidden="true" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"
      class="w-5 h-5">
      <title>Reddit</title>
      <path
        d="M440 204c-15 0-28 6-38 15-35-24-83-40-137-42l28-125 88 20c0 22 18 39 39 39 22 0 40-18 40-39s-17-40-40-40c-15 0-28 9-35 22l-97-22c-5-1-10 3-11 7l-31 138c-53 2-100 18-136 43a53 53 0 0 0-38-16c-56 0-74 74-23 100l-3 24c0 84 95 152 210 152 117 0 211-68 211-152 0-8-1-17-3-25 50-25 32-99-24-99zM129 309a40 40 0 1 1 80 0 40 40 0 0 1-80 0zm215 93c-37 37-139 37-176 0-4-3-4-9 0-13s10-4 13 0c28 28 120 29 149 0 4-4 10-4 14 0s4 10 0 13zm-1-54c-22 0-39-17-39-39a39 39 0 1 1 39 39z">
      </path>
    </svg>
  </a>
  <a class="border-2 duration-200 ease inline-flex items-center mb-1 mr-1 transition p-2 rounded-full text-white border-slate-600 bg-slate-600 hover:bg-slate-700 hover:border-slate-700"
    target="_blank" rel="noopener"
    href="https://wa.me/?text=In%20unit%20tests,%20I%20favor%20Detroit%20over%20London%20https://srikanth.sastry.name"
    aria-label="Share on Whatsapp" draggable="false">
    <svg aria-hidden="true" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"
      class="w-5 h-5">
      <title>Whatsapp</title>
      <path
        d="M413 97A222 222 0 0 0 64 365L31 480l118-31a224 224 0 0 0 330-195c0-59-25-115-67-157zM256 439c-33 0-66-9-94-26l-7-4-70 18 19-68-4-7a185 185 0 0 1 287-229c34 36 56 82 55 131 1 102-84 185-186 185zm101-138c-5-3-33-17-38-18-5-2-9-3-12 2l-18 22c-3 4-6 4-12 2-32-17-54-30-75-66-6-10 5-10 16-31 2-4 1-7-1-10l-17-41c-4-10-9-9-12-9h-11c-4 0-9 1-15 7-5 5-19 19-19 46s20 54 23 57c2 4 39 60 94 84 36 15 49 17 67 14 11-2 33-14 37-27s5-24 4-26c-2-2-5-4-11-6z">
      </path>
    </svg>
  </a>
  <a class="border-2 duration-200 ease inline-flex items-center mb-1 mr-1 transition p-2 rounded-full text-white border-slate-600 bg-slate-600 hover:bg-slate-700 hover:border-slate-700"
    target="_blank" rel="noopener"
    href="https://telegram.me/share/url?text=In%20unit%20tests,%20I%20favor%20Detroit%20over%20London&url=https://srikanth.sastry.name/in-unit-tests-favor-detroit-over-london/"
    aria-label="Share on Telegram" draggable="false">
    <svg aria-hidden="true" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"
      class="w-5 h-5">
      <title>Telegram</title>
      <path
        d="M256 8a248 248 0 1 0 0 496 248 248 0 0 0 0-496zm115 169c-4 39-20 134-28 178-4 19-10 25-17 25-14 2-25-9-39-18l-56-37c-24-17-8-25 6-40 3-4 67-61 68-67l-1-4-5-1q-4 1-105 70-15 10-27 9c-9 0-26-5-38-9-16-5-28-7-27-16q1-7 18-14l145-62c69-29 83-34 92-34 2 0 7 1 10 3l4 7a43 43 0 0 1 0 10z">
      </path>
    </svg>
  </a>
  <a class="border-2 duration-200 ease inline-flex items-center mb-1 mr-1 transition p-2 rounded-full text-white border-slate-600 bg-slate-600 hover:bg-slate-700 hover:border-slate-700"
    target="_blank" rel="noopener"
    href="mailto:?subject=In%20unit%20tests,%20I%20favor%20Detroit%20over%20London&body=https://srikanth.sastry.name/in-unit-tests-favor-detroit-over-london/"
    aria-label="Share by Email" draggable="false">
    <svg aria-hidden="true" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"
      class="w-5 h-5">
      <title>Email</title>
      <path
        d="M464 64a48 48 0 0 1 29 86L275 314c-11 8-27 8-38 0L19 150a48 48 0 0 1 29-86h416zM218 339c22 17 54 17 76 0l218-163v208c0 35-29 64-64 64H64c-35 0-64-29-64-64V176l218 163z">
      </path>
    </svg>
  </a>
</div>

    </div>

    <div class="font-mulish flex justify-center mb-10">
      
      <a class="pr-2" href="/defining-unit-tests-two-schools-of-thought/">&laquo; Defining unit tests: two schools of thought</a>
      
      
      <a class="pl-2" href="/tests-should-be-isolated-not-coupled/">Tests should be isolated from each other; not coupled &raquo;</a>
      
    </div>

    
  </div>
</div>
 

<footer class="w-full bottom-0">
  <hr class="my-8 border-zinc-200" />
  <div class="container mx-auto">
    <div class="flex flex-wrap text-left">
      <div class="w-full md:w-6/12 md:px-4">
        <p class="text-3xl font-semibold">
          Let's keep in touch!
        </p>
        <p class="font-mulish text-lg dark:text-zinc-300 mt-2 mb-2">
           Find me on any of these platforms. 
        </p>
         <div class="flex justify-center md:justify-start pt-2 gap-6">
   
  <a
    class="transition hover:scale-110 duration-300"
    href="mailto:srikanth@sastry.name"
  >
    <img
      class="h-6 w-6"
      src="/assets/images/contact_channels/email.svg"
      alt="Email Icon"
    />
  </a>
   
  <a
    class="transition hover:scale-110 duration-300"
    href="https://github.com/srikanthsastry"
    target="_blank"
  >
    <img
      class="h-6 w-6"
      src="/assets/images/contact_channels/github-mark.svg"
      alt="Github Icon"
    />
  </a>
      
  
  <a
    class="transition hover:scale-110 duration-300"
    href="https://www.linkedin.com/in/srikanthsastry/"
    target="_blank"
  >
    <img
      class="h-6 w-6"
      src="/assets/images/contact_channels/linkedin.svg"
      alt="LinkedIn Icon"
    />  
  </a>
   
  <a
    class="transition hover:scale-110 duration-300"
    href="https://www.threads.com/@sri.sastry"
    target="_blank"
  >
    <img
      class="h-6 w-6"
      src="/assets/images/contact_channels/threads.svg"
      alt="Threads Icon"
    />
  </a>
  
</div>
 
      </div>
      <div class="w-full md:w-6/12 md:text-right py-4 md:py-0">
        <div class="flex flex-wrap items-top mb-6">
          <div class="w-full lg:w-4/12 md:px-4 ml-auto">
            <span class="text-lg block text-gray-800 mb-2">
              Pages
            </span>
            <ul>
                 
              <li>
                <a class="font-mulish text-slate-600 hover:text-sky-400 dark:text-slate-300 dark:hover:text-slate-200"
                  href="/archives/">Archives</a>
              </li>
                
              <li>
                <a class="font-mulish text-slate-600 hover:text-sky-400 dark:text-slate-300 dark:hover:text-slate-200"
                  href="/">Home</a>
              </li>
                
              <li>
                <a class="font-mulish text-slate-600 hover:text-sky-400 dark:text-slate-300 dark:hover:text-slate-200"
                  href="/publications/">Publications</a>
              </li>
                
              <li>
                <a class="font-mulish text-slate-600 hover:text-sky-400 dark:text-slate-300 dark:hover:text-slate-200"
                  href="/touchstone-radio-episodes/">Touchstone Radio Episodes</a>
              </li>
                           
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="font-mulish flex flex-wrap items-center md:justify-between justify-center my-8">
      <div class="w-full md:w-4/12 px-4 mx-auto text-center">
        
        <a href="/feed.xml" class="p-2">
          <svg fill="#000000" viewBox="-3 0 19 19" xmlns="http://www.w3.org/2000/svg" class="w-10 mx-auto">
            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
            <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
            <g id="SVGRepo_iconCarrier">
              <path
                d="M.926 12.818a1.403 1.403 0 1 1 0 1.984 1.402 1.402 0 0 1 0-1.984zm10.531 2.357a1.03 1.03 0 0 1-1.029-1.03 8.775 8.775 0 0 0-.694-3.438A8.826 8.826 0 0 0 1.591 5.31a1.03 1.03 0 1 1 0-2.059 10.817 10.817 0 0 1 4.24.857 10.893 10.893 0 0 1 3.463 2.334 10.867 10.867 0 0 1 3.19 7.703 1.027 1.027 0 0 1-1.027 1.029zm-4.538 0a1.03 1.03 0 0 1-1.029-1.03 4.297 4.297 0 0 0-4.299-4.298 1.03 1.03 0 0 1 0-2.059 6.362 6.362 0 0 1 5.857 3.883 6.298 6.298 0 0 1 .5 2.475 1.03 1.03 0 0 1-1.029 1.029z">
              </path>
            </g>
          </svg>
        </a>
        
        <div class="text-sm text-blueGray-500 font-semibold py-1">
          © <span id="get-current-year">2025</span>
          <a href="https://www.creative-tim.com/product/notus-js" class="text-blueGray-500 hover:text-gray-800"
            target="_blank" aria-label="Creative C">Srikanth Sastry.</a>
          All rights reserved.
          <p class="text-xs pt-4">
            Built with ❤️ using the
            <a class="hover:text-sky-400" href="https://github.com/a-chacon/awesome-jekyll-theme">Awesome Jekyll
              Theme</a>.
          </p>
        </div>
      </div>
    </div>
  </div>
</footer>

  <script>
    document.querySelectorAll("a").forEach(function (link) {
      link.addEventListener("click", function (event) {
        event.preventDefault(); // Prevent the default link action temporarily
        link.classList.add("gentle-clicked");

        setTimeout(function () {
          link.classList.remove("gentle-clicked");
          window.location.href = link.href; // Navigate to the link after the animation
        }, 300); // Duration of the gentle bounce animation
      });
    });
  </script>
</body>

</html>
