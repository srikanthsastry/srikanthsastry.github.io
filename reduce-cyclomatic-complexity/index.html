<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <link rel="alternate" type="application/atom+xml" title="Srikanth Sastry" href="/feed.xml">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Cyclomatic Complexity: How Low Can You Go? &middot; Srikanth Sastry
    
  </title>

  
  <link rel="canonical" href="//srikanth.sastry.name/reduce-cyclomatic-complexity/">
  

  <link rel="stylesheet" href="//srikanth.sastry.name/public/css/poole.css">
  <link rel="stylesheet" href="//srikanth.sastry.name/public/css/syntax.css">
  <link rel="stylesheet" href="//srikanth.sastry.name/public/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="//srikanth.sastry.name/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="//srikanth.sastry.name/public/favicon.ico">

  <link rel="alternate" type="application/rss+xml" title="RSS" href="//srikanth.sastry.name/atom.xml">

  
</head>


  <body class="sidebar-overlay theme-base-08">

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>A personal website</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="//srikanth.sastry.name/">Home</a>

    

    
    
      
        
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="//srikanth.sastry.name/about/">About</a>
        
      
    
      
        
          <a class="sidebar-nav-item" href="//srikanth.sastry.name/archives/">Archives</a>
        
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="//srikanth.sastry.name/publications/">Publications</a>
        
      
    
      
        
          <a class="sidebar-nav-item" href="//srikanth.sastry.name/touchstone-radio-episodes/">Touchstone Radio Episodes</a>
        
      
    
    <!-- <a class="sidebar-nav-item" href="/archive/v1.1.0.zip">Download</a>
    <a class="sidebar-nav-item" href="">GitHub project</a>
    <span class="sidebar-nav-item">Currently v1.1.0</span> -->
  </nav>
  <div class="sidebar-item">
  <p>
  <a class="navbar-item" href="/feed.xml" target="_blank">Feed</a>
  </p>
  </div>
  <div class="sidebar-item">
    <p>
      &copy; 2025. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Srikanth Sastry</a>
            <small>A Techie in Boston</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="post">
  <h1 class="post-title">Cyclomatic Complexity: How Low Can You Go?</h1>
  <span class="post-date">17 Jun 2025</span>
  <p><img src="/images/cpu-in-maze-pixel-art.png" alt="" /></p>
<h2 id="what-even-is-cyclomatic-complexity">What even <em>is</em> Cyclomatic Complexity?</h2>
<p>Ever spend 20 minutes trying to figure out why your bug fix or feature code isn’t triggering or being executed — only to realize you missed a buried branch in someone’s 10-path function? That’s <a href="https://en.wikipedia.org/wiki/Cyclomatic_complexity">Cyclomatic Complexity</a> in action. Intuitively, you can think of Cyclomatic Complexity as the number of possible paths a single execution of a function can take.</p>

<p>For example, <code class="language-plaintext highlighter-rouge">a = b + c</code> has a cyclomatic complexity of one, and <code class="language-plaintext highlighter-rouge">a = b + c if foo else d + e</code> has a cyclomatic complexity of two: one path is when <code class="language-plaintext highlighter-rouge">foo</code> is <code class="language-plaintext highlighter-rouge">True</code> and the effective logic is <code class="language-plaintext highlighter-rouge">a = b + c</code>, and the other path is when <code class="language-plaintext highlighter-rouge">foo</code> is <code class="language-plaintext highlighter-rouge">False</code> and the effective logic is <code class="language-plaintext highlighter-rouge">a = d + e</code>.</p>

<h2 id="aint-got-no-time-heres-the-goods">Ain’t got no time? Here’s the goods.</h2>

<p>If you take just one thing away from this note, then let it be this.</p>

<blockquote>
  <p><strong>Strive to reduce the Cyclomatic Complexity of your code; your team and your future self will thank you!</strong></p>
</blockquote>

<h2 id="time-to-hit-the-brain-gym-bro">Time to hit the brain gym, bro</h2>
<p>As an exercise, I will let you figure out the cyclomatic complexity of the following piece of code:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">env_val</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">environ</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="sh">'</span><span class="s">...</span><span class="sh">'</span><span class="p">)</span>
<span class="n">switcher_val</span> <span class="o">=</span> <span class="bp">False</span>
<span class="k">if</span> <span class="n">env_val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
    <span class="n">jk_val</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">if</span> <span class="n">env_val</span><span class="p">.</span><span class="nf">lower</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">in</span> <span class="p">[</span><span class="sh">"</span><span class="s">true</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">1</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">yes</span><span class="sh">"</span><span class="p">]:</span>
        <span class="n">env_val</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">env_val</span> <span class="o">=</span> <span class="bp">False</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">env_val</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">switch_name</span> <span class="o">=</span> <span class="sh">"</span><span class="s">/switch/name/from/config</span><span class="sh">"</span>
    <span class="n">switcher_val</span> <span class="o">=</span> <span class="n">switcher</span><span class="p">.</span><span class="nf">check</span><span class="p">(</span><span class="n">switch_name</span><span class="p">,</span> <span class="n">switchval</span><span class="o">=</span><span class="n">region</span><span class="p">)</span>
<span class="k">if</span> <span class="n">env_val</span> <span class="ow">or</span> <span class="n">switcher_val</span><span class="p">:</span>
    <span class="nf">apply_some_config</span><span class="p">(</span><span class="n">job</span><span class="p">)</span>
</code></pre></div></div>

<p>I’ll wait… (Spoiler: It’s not pretty.)</p>

<p>Give up? Turns out, it is <code class="language-plaintext highlighter-rouge">4</code>: three if-checks contribute to three branching points, and the cyclomatic complexity is one more than that; <em>ergo</em> <code class="language-plaintext highlighter-rouge">4</code>.</p>

<p>Next, by spending no more than 60 seconds looking this code, can you tell me what exactly it is doing? BTW, this is real production code that I ran across when debugging some issue, and it took me a long while to make sure I knew exactly when and how the config is applied. It wasn’t obvious at all. If you can grok this in 60 seconds, take a bow!</p>

<h2 id="reeling-yet">Reeling yet?</h2>

<p>Anyway, making sense of functions with high cyclomatic complexity is annoying. It’s notoriously difficult to write tests with good coverage for these functions, and in general, they tend to be bug factories.</p>

<p>And yet — somehow — a lot of senior software engineers don’t seem to grok this. I keep seeing deeply nested <code class="language-plaintext highlighter-rouge">if-else</code> blocks, sometimes inside loops with <code class="language-plaintext highlighter-rouge">break</code>s and <code class="language-plaintext highlighter-rouge">continue</code>s, and it doesn’t seem to bother anyone! It’s like we’ve collectively normalized this cognitive overhead.</p>

<p>Why?! Why are we putting up with this crap? It’d never fly in an interview.</p>

<h2 id="yo-lets-fix-it-up">Yo, let’s fix it up!</h2>
<p>Coming back to the above example, the confusion and ugliness of this code really got to me. It got so bad I considered dusting off a Karnaugh map. After some much needed grokking, I managed to simplify it down to a cyclomatic complexity of <code class="language-plaintext highlighter-rouge">2</code>! :)</p>

<p>In the end, here’s what that poor little code snippet was trying to do:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Apply config when '...' environment variable is True, else check the switch
</span><span class="n">__ENV_VARIABLE</span> <span class="o">=</span> <span class="sh">'</span><span class="s">...</span><span class="sh">'</span>
<span class="n">__SWITCHER_KEY</span> <span class="o">=</span> <span class="sh">'</span><span class="s">/switch/name/from/config</span><span class="sh">'</span>
<span class="k">def</span> <span class="nf">has_env_override</span><span class="p">():</span>
    <span class="n">val</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">environ</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">__ENV_VARIABLE</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">val</span><span class="p">.</span><span class="nf">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">{</span><span class="sh">"</span><span class="s">true</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">1</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">yes</span><span class="sh">"</span><span class="p">}</span>

<span class="nf">if </span><span class="p">(</span>
    <span class="nf">has_env_override</span><span class="p">()</span> <span class="ow">or</span> 
    <span class="n">switcher</span><span class="p">.</span><span class="nf">check</span><span class="p">(</span><span class="n">__SWITCHER_KEY</span><span class="p">,</span> <span class="n">switchval</span><span class="o">=</span><span class="n">region</span><span class="p">)</span>
<span class="p">):</span>
    <span class="nf">apply_some_config</span><span class="p">(</span><span class="n">job</span><span class="p">)</span>
</code></pre></div></div>

<p>Fewer paths, fewer bugs. Cleaner code. Happier teammates. What’s not to love?</p>

</div>




      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script src='/public/js/script.js'></script>
  </body>
</html>
