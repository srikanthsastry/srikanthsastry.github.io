<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <link rel="alternate" type="application/atom+xml" title="Srikanth Sastry" href="/feed.xml">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Srikanth Sastry &middot; A Techie in Boston
    
  </title>

  
  <link rel="canonical" href="//srikanth.sastry.name/page5/">
  

  <link rel="stylesheet" href="//srikanth.sastry.name/public/css/poole.css">
  <link rel="stylesheet" href="//srikanth.sastry.name/public/css/syntax.css">
  <link rel="stylesheet" href="//srikanth.sastry.name/public/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="//srikanth.sastry.name/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="//srikanth.sastry.name/public/favicon.ico">

  <link rel="alternate" type="application/rss+xml" title="RSS" href="//srikanth.sastry.name/atom.xml">

  
</head>


  <body class="sidebar-overlay">

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>A personal website</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item active" href="//srikanth.sastry.name/">Home</a>

    

    
    
      
        
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="//srikanth.sastry.name/about/">About</a>
        
      
    
      
        
          <a class="sidebar-nav-item" href="//srikanth.sastry.name/archives/">Archives</a>
        
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="//srikanth.sastry.name/publications/">Publications</a>
        
      
    
      
        
          <a class="sidebar-nav-item" href="//srikanth.sastry.name/touchstone-radio-episodes/">Touchstone Radio Episodes</a>
        
      
    
    <!-- <a class="sidebar-nav-item" href="/archive/v1.1.0.zip">Download</a>
    <a class="sidebar-nav-item" href="">GitHub project</a>
    <span class="sidebar-nav-item">Currently v1.1.0</span> -->
  </nav>
  <div class="sidebar-item">
  <p>
  <a class="navbar-item" href="/feed.xml" target="_blank">Feed</a>
  </p>
  </div>
  <div class="sidebar-item">
    <p>
      &copy; 2022. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Srikanth Sastry</a>
            <small>A Techie in Boston</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="//srikanth.sastry.name/the-merits-of-unit-tests-part-3/">
        The merits of unit tests — Part 3
      </a>
    </h1>

    <span class="post-date">22 Nov 2017</span>

    <!-- wp:paragraph {"backgroundColor":"pale-cyan-blue"} -->
<p class="has-background has-pale-cyan-blue-background-color">Cross posted on <a href="https://www.linkedin.com/pulse/merits-unit-tests-part-3-srikanth-sastry/">LinkedIn</a>.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Previously, I talked about how unit tests serve purposes other than verifying code functionality; I talked about <a rel="noreferrer noopener" aria-label=" (opens in a new tab)" href="http://srikanth.sastry.name/merits-of-unit-tests-part-1/" target="_blank">unit tests serving as defacto documentation</a>, and <a href="http://srikanth.sastry.name/the-merits-of-unit-tests-part-2/" target="_blank" rel="noreferrer noopener" aria-label=" (opens in a new tab)">unit tests helping you refactor without fear</a>. In this post, I'll talk about yet another benefit to unit tests: writing better software.</p>
<!-- /wp:paragraph -->

<!-- wp:more -->
<!--more-->
<!-- /wp:more -->

<!-- wp:heading -->
<h2>Better software design</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>I am not talking about writing bug-free software here. Sure, good 
unit tests help you discover/avoid large classes of bugs, but that's not
 the point. Unit tests also help you enforce good design patterns and 
modularity in your software.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Unit tests help you with software design in two complementary ways. 
First, they help you establish optimal boundaries of modularity in terms
 of methods, and classes, and second, they help you understand your 
dependencies better and almost force you to use good dependency 
injection hygiene.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3>Modularity</h3>
<!-- /wp:heading -->

<!-- wp:image {"id":386} -->
<figure class="wp-block-image"><img src="http://srikanth.sastry.name/wp-content/uploads/2019/01/0-2.jpg" alt="" class="wp-image-386" /></figure>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p>How do you know that your class or method does 'too much', or that it
 has undesirable side-effects? A pretty good way to discover it is to 
start writing unit tests for it. If you find yourself having to test for
 too many different types of inputs, then your methods are doing too 
much. If you find yourself having to test for too many orderings of 
operations, when your methods have too many side effects. It really is 
just as simple as that!</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>For instance, some time ago, I came across a piece of code that 
essentially took a large query, split it up into multiple subqueries, 
sent them off in parallel, collected their responses back, munged them 
and returned the munged response to the caller via a callback. The code 
looked something like this:</p>
<!-- /wp:paragraph -->

<!-- wp:preformatted -->
<pre class="wp-block-preformatted">public class QueryManager {<br />   void sendRequest(Query query, Callback queryCallback) {<br />     List&lt;Subquery&gt; subqueries = splitQuery(query);<br />     for (Subquery subquery : subqueries) {<br />       sendQuery(subquery, new Subquery.Callback() {<br />           @Override<br />           public onSuccess(Response response) {<br />             // Do some processing. ...<br />             if (allResponses()) {<br />               queryCallback.finalResult();<br />              } else {<br />                queryCallback.incrementalResult();<br />              }<br />            }<br />            @Override<br />            public onFailure(Error e) {<br />              // Do some error handling. ... <br />              if (allResponses()) {<br />                queryCallback.finalResult();<br />              }<br />            }<br />          });<br />     }<br />   }<br />     // Other methods. ... <br />} </pre>
<!-- /wp:preformatted -->

<!-- wp:paragraph -->
<p>This code makes for an interesting case study on multiple fronts, and  I will come back to it in a later post. For now, it is sufficient to  state that I wanted to make changes to this code, but it was pretty  thorny because (you guessed it!) it has no unit tests.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Naturally, the first step is to write unit tests for this class, and 
that was when I realized why there were no unit tests here. This class 
is incredibly tricky to unit test. Getting the subqueries to respond 
under various conditions and ordering resulted in a combinatorial 
explosion of test cases making the task intractable. This was very 
strong code smell.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>As you have probably figured out already, this was a classic case of a
 single class doing too much. The primary culprit was the anonymous 
class that implemented the Subquery.Callback interface. It should really
 have been its own class with its own unit tests.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>After I pulled out that anonymous class into its own class, it became
 a lot easier to unit test both the Subquery.Callback and the 
QueryManager individually, and with that, the code became much more 
modular, easier to read, and much easier to maintain.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3>Dependency</h3>
<!-- /wp:heading -->

<!-- wp:image {"id":387} -->
<figure class="wp-block-image"><img src="http://srikanth.sastry.name/wp-content/uploads/2019/01/0-3.jpg" alt="" class="wp-image-387" /></figure>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p>If your code does not do a decent job of<a href="https://en.wikipedia.org/wiki/Dependency_injection" target="_blank" rel="noreferrer noopener"> injecting its dependencies</a>
 from outside, you are gonna have a bad time! Having good unit tests 
will actually keep you from getting into this pitfall pretty 
effectively. Consider the following contrived example. You have a piece 
of code that writes to an external service, and your code throttles the 
rate of writes because going over your approved rate/quota can be pretty
 expensive. So, your code could look something like this:</p>
<!-- /wp:paragraph -->

<!-- wp:preformatted -->
<pre class="wp-block-preformatted">class RateLimiter {<br />   void writeToExternalService(const vector&lt;Entries&gt;&amp; stuff) {<br />     auto service = new ExternalService(ConnectionParameters foo);<br />     for (auto entry : stuff) {<br />       waitUntilQuotaAvailable();<br />       service.write(entry);<br />     }<br />   }<br />} </pre>
<!-- /wp:preformatted -->

<!-- wp:paragraph -->
<p>Remember how I said that going over the rate/quota is bad? How do you
 verify that it will not happen? Well, you could set up an elaborate 
testbed that has an ExternalService simulator, and you can run your code
 through all sorts of inputs and verify that the simulator says that the
 rate limiting is work. But that's expensive, and if you choose to go 
with a different external service, then well, good luck with that!</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Instead, you could try to unit test it. But how? You need to have 
access to the ExternalService to do that, which we have already 
established is expensive! Well, this is where unit testing it will force
 you into healthy dependency injection. For this contrived example, you 
can inject the dependency as follows.</p>
<!-- /wp:paragraph -->

<!-- wp:preformatted -->
<pre class="wp-block-preformatted">class RateLimiter {<br />   void writeToExternalService(<br />       const vector&lt;Entries&gt;&amp; stuff, <br />       ExternalService service) {<br />     for (auto entry : stuff) {<br />       waitUntilQuotaAvailable();<br />       service.write(entry);<br />     }<br />   }<br />} </pre>
<!-- /wp:preformatted -->

<!-- wp:paragraph -->
<p>Your unit tests could do this:</p>
<!-- /wp:paragraph -->

<!-- wp:preformatted -->
<pre class="wp-block-preformatted">TEST(AwesomeTestCase, testWrite) {<br />   vector&lt;Entries&gt; stuff = generateLotsOfStuff();<br />   RateLimits limit;  // Set your limits here.<br />   ExternalService svc = MockExternalService(limit);<br />   RateLimiter rateLimiter = new RateLimiter(limit); <br />   rateLimiter.writeToExternalService(stuff, svc);<br />   ASSERT_TRUE(svc.writesWithinLimits()); <br />} </pre>
<!-- /wp:preformatted -->

<!-- wp:paragraph -->
<p>And you can put your implementation through the wringer without breaking a sweat.</p>
<!-- /wp:paragraph -->

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="//srikanth.sastry.name/the-merits-of-unit-tests-part-2/">
        The merits of unit tests — Part 2
      </a>
    </h1>

    <span class="post-date">13 Nov 2017</span>

    <!-- wp:paragraph -->
<p>In the <a href="http://srikanth.sastry.name/merits-of-unit-tests-part-1/">previous post</a>,  we saw how unit tests can serve as a reliable source of documentation  for your code. There is a lot more that unit tests can do for you. In this post I'll talk about a fairly obvious, but often ignored, benefit  to unit testing: Refactoring.</p>
<!-- /wp:paragraph -->

<!-- wp:more -->
<!--more-->
<!-- /wp:more -->

<!-- wp:paragraph {"textColor":"very-dark-gray","backgroundColor":"pale-cyan-blue"} -->
<p class="has-text-color has-background has-very-dark-gray-color has-pale-cyan-blue-background-color">I posted this article on <a href="https://www.linkedin.com/pulse/merits-unit-tests-part-2-srikanth-sastry/">LinkedIn</a> and am reposting it here cuz’ this is the authoritative source for it :)</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3>Refactoring</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Refactoring is a less than pleasant, nevertheless, essential part of 
developing and maintaining high quality software. No matter how well 
designed your software is, over time a few things happen to it.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>1. The assumptions you made about the environment change, and that triggers unanticipated changes to your code.</p>
<!-- /wp:paragraph -->

<!-- wp:image {"id":375,"linkDestination":"custom"} -->
<figure class="wp-block-image"><a href="http://dilbert.com/strip/2011-05-16" target="_blank" rel="noreferrer noopener"><img src="http://srikanth.sastry.name/wp-content/uploads/2019/01/dt_c110516-1024x319.gif" alt="Boss: Did I remember to tell you before you finished the coding that the user's specifications changed? Dilbert: AAAIII-YIIIII-YIIII-YIII!!! Boss: So, no-ish? Dilbert: BAM! BAM! BAM! " class="wp-image-375" /></a></figure>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p><em>You started with the assumption that every account will have a 
unique username, but with the introduction of shared family-accounts, 
this may not be true anymore.</em></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>2. New/junior engineers make changes to the code that run antithetical to the original design.</p>
<!-- /wp:paragraph -->

<!-- wp:image {"id":376} -->
<figure class="wp-block-image"><img src="http://srikanth.sastry.name/wp-content/uploads/2019/01/0.jpg" alt="" class="wp-image-376" /></figure>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p><em>While you were out on vacation, your colleague's intern made a 
less-than well thought out change to add an session expiry feature to 
your code with a bunch of if-checks that see if the session has not 
already expired. By the the time you returned from your vacation, this 
code has been in production for two weeks, and you have more important 
things to do.</em></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>3. The software is co-opted for something that it was never intended for in the first place.</p>
<!-- /wp:paragraph -->

<!-- wp:image {"id":377,"linkDestination":"custom"} -->
<figure class="wp-block-image"><a href="http://www.gorillafabrication.com/modifications/16-repurposed-trucks-and-cars/" target="_blank" rel="noreferrer noopener"><img src="http://srikanth.sastry.name/wp-content/uploads/2019/01/0-1.jpg" alt="" class="wp-image-377" /></a></figure>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p><em>That awesome geo-spatial indexing service that you wrote for 
indexing cities became so popular that it is now being used to index 
stores in malls across the country, and to accommodate that, the schema 
now includes fields such as 'store name', 'floor number', etc. which 
make no sense in your original use case; it has just been shoehorned 
here.</em></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Every time any of those things happen, you accrue some tech debt, and
 eventually the tech debt gets so high that it start impeding your 
ability to make future changes. This is the point at which you have to 
redesign your software to reflect the new world it is in.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>In my experience, one of the most delicate things about refactoring 
such code is that you often have to rewrite the software but keep all of
 its existing behavior intact. Any failure to do so will start 
triggering failures in the system-at-large. Having good unit tests can 
be an indispensable asset. If, throughout the evolution of your 
software, there has been a diligent effort to keep the unit tests up to 
date and with sufficient code/path coverage, the task of refactoring 
becomes a lot easier.</p>
<!-- /wp:paragraph -->

<!-- wp:pullquote {"className":"is-style-default"} -->
<figure class="wp-block-pullquote is-style-default"><blockquote><p>
  The rule of thumb is simply “As long as the unit tests pass, every iteration of your refactor is (most likely) correct.” 
</p></blockquote></figure>
<!-- /wp:pullquote -->

<!-- wp:image {"id":379,"align":"center","linkDestination":"custom"} -->
<div class="wp-block-image"><figure class="aligncenter"><a href="http://upload.wikimedia.org/wikipedia/commons/0/0b/TDD_Global_Lifecycle.png" target="_blank" rel="noreferrer noopener"><img src="http://srikanth.sastry.name/wp-content/uploads/2019/01/refactoringg-884x1024.png" alt="" class="wp-image-379" /></a></figure></div>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p>Good unit tests can save you multiple days or even weeks of making 
incremental changes and testing them out in production in a gingerly 
fashion in ensure that nothing breaks.</p>
<!-- /wp:paragraph -->

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="//srikanth.sastry.name/merits-of-unit-tests-part-1/">
        My code is bugfree! Why should I unit test?
      </a>
    </h1>

    <span class="post-date">01 Nov 2017</span>

    <!-- wp:paragraph -->
<p>There are multiple reasons to write unit tests. Verification is only one of them, and the least interesting. This is part 1 of a five part series on why you should write unit tests (apart from the obvious): Documentation!</p>
<!-- /wp:paragraph -->

<!-- wp:more -->
<!--more-->
<!-- /wp:more -->

<!-- wp:paragraph {"textColor":"very-dark-gray","backgroundColor":"pale-cyan-blue"} -->
<p class="has-text-color has-background has-very-dark-gray-color has-pale-cyan-blue-background-color">I posted this article on <a href="https://www.linkedin.com/pulse/my-code-bugfree-why-should-i-unit-tests-srikanth-sastry/">LinkedIn</a> and am reposting it here cuz' this is the authoritative source for it :)</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>We have all heard this 
repeatedly: “You have to have unit tests. Unit tests are how you find 
issues in your code and fix them before they hit the trunk.” Ok, so that
 argument sounded a little weak. Here is a much stronger version of the 
same argument.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><em>You have to write unit tests because unit tests are a </em><a href="https://l.facebook.com/l.php?u=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FScientific_method&amp;h=ATNU99lLyWx55l8BBlgT8AIDwdfUHBUjrSOtbRUQbP42vH_k7pVzTOXviC2N0Ze44RbFVdkFCWKSsvNoCovWLh8gaOuHG9eEAsu4GKloIbcHKwPbQdRFAdhFdNCPSDHmdBjCaYcBKEXAxhC-i735nThHQPOCEuD39p2iuu6K8bulWw" target="_blank" rel="noreferrer noopener"><em>scientific</em></a><em>
 mechanism to verify that your implementation satisfies the 
specification (that is, you code does what you say it does). To 
elaborate, your claim of what your code does is a </em><a href="https://l.facebook.com/l.php?u=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FFalsifiability&amp;h=ATPEcKK4eeXOCNWcc8BCYwdplxHx1zCDAuE74Z4TapMJOVwgCqukHCEuH21QaLSEGYvUA1ouxan-XttxS4n2cgnjJBzJY5CWV-quFVTNq18bpJSTq2l3NZyjuw2yd1-O3mWdupeKygwazafitDpYrhAWIt8nLBIlTkuxKG0nTn0oSA" target="_blank" rel="noreferrer noopener"><em>falsifiable</em></a><em>
 hypothesis in that it is possible to conceive of an observation that 
could negate your claim. Unit tests are the experiments that can be 
performed to test your hypothesis. If all your unit tests pass, then it 
is increasingly likely that your claim is correct. (Note that we cannot 
claim to have proved correctness; that is an impossible task in the 
general case).</em></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>This still an unsatisfying argument at best. What if I were a perfect
 developer who writes perfect code, and everyone around me agrees that I
 write perfect code. Do I still need to write unit tests? Or what about 
the cases where visual inspection of the code makes correctness obvious.
 Do I still need to spend precious time writing unit tests?</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>While verification is an important reason to have unit tests, IMHO, 
it is also the least interesting. There are many more reasons to be 
rigorous about unit tests.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Let's start with my favorite.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3>Documentation</h3>
<!-- /wp:heading -->

<!-- wp:image {"id":370,"align":"center","linkDestination":"custom"} -->
<div class="wp-block-image"><figure class="aligncenter"><a href="http://www.quickmeme.com/meme/3t1i87" target="_blank" rel="noreferrer noopener"><img src="http://srikanth.sastry.name/wp-content/uploads/2019/01/a0a8c4ab0bec170a748228f0982da6795e6af515a8048b11c2b4c9e794d7b4f9.jpg" alt="" class="wp-image-370" /></a></figure></div>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p>Unit tests makes the best documentation for your code. We were all 
hired as software engineers because we can write good software. That 
means a lot of us are not very good at technical writing, and for many 
of us, English isn't our native tongue. This creates barriers for us in 
communicating what our software does so that others can use it well.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>We could write wiki/docs describing what our code does, but that has three major issues.</p>
<!-- /wp:paragraph -->

<!-- wp:list {"ordered":true} -->
<ol><li>The documentation doesn't live anywhere near the code, and so discoverability is difficult</li><li>English is not the primary language for a lot of us, and technical 
writing is not our strong suit, and so the quality of the writing can be
 suspect</li><li>As the code evolves, the documentation becomes obsolete. The only thing worse than no documentation is wrong documentation!</li></ol>
<!-- /wp:list -->

<!-- wp:paragraph -->
<p>We could write comments in the code itself. So discoverability is not
 a problem. However, the other two issues still remain. (Raise your hand
 if you have seen comments that are out of sync with the code that it is
 supposed to clarify.)</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>What we could really use it a mechanism that leverages our strength 
(writing software) to create documentation, and automation to ensure 
that documentation is never obsolete. Unit tests turn out to be the 
perfect tool for this!</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Think of each unit test as a how-do example of how to use your code. 
So, if anyone wants to use the code that your wrote, all they need to do
 is look at your unit tests, the job is done!</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><strong>EXAMPLE</strong></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>A great example is the <a href="https://github.com/facebook/folly" target="_blank" rel="noreferrer noopener">folly</a> library. Let's take folly Futures for instance. The primary header file <a href="https://github.com/facebook/folly/blob/master/folly/futures/Future.h" target="_blank" rel="noreferrer noopener">Future.h</a> tells you the API, but figuring out how to use it is not straightforward from there. However, go over to the unit tests at <a href="https://l.facebook.com/l.php?u=https%3A%2F%2Fgithub.com%2Ffacebook%2Ffolly%2Fblob%2Fmaster%2Ffolly%2Ffutures%2Ftest%2FFutureTest.cpp&amp;h=ATNiTV-rdTNS1lEjxiC29ETboF-w94bQpQhXUxFugGI897McF_YyCo-jvJX_kzLzDyVSjokYlYY9wbhcS4dJsTQlrgkVGXW8Fw7BBKx537cGoHDELiJcF4gBHMQq2CzZXV158ToPWPV0j0Xbt4WNDiLY13bFtRv7cWPEgKLJZsHe0Q" target="_blank" rel="noreferrer noopener">FutureTest.cpp</a>,
 and you will come away knowing how to use Futures for your use case in a
 matter of minutes. For each minute spent by a folly developer to write 
these unit tests, it has saved thousands of developers countless hours.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3>But wait, there more!</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>There are many other things that work better when you have unit tests.</p>
<!-- /wp:paragraph -->

<!-- wp:list -->
<ul><li><a rel="noreferrer noopener" aria-label="Refactoring (opens in a new tab)" href="http://srikanth.sastry.name/the-merits-of-unit-tests-part-2/" target="_blank">Refactoring</a>.</li><li><a rel="noreferrer noopener" href="https://www.linkedin.com/pulse/merits-unit-tests-part-3-srikanth-sastry/" target="_blank">Better code design.</a></li><li><a rel="noreferrer noopener" aria-label=" (opens in a new tab)" href="http://srikanth.sastry.name/unit-tests-ftw-part-4/" target="_blank">Debugging prod issues.</a></li><li><a href="http://srikanth.sastry.name/merits-of-unit-tests-part-5/">API usability</a>.</li></ul>
<!-- /wp:list -->

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="//srikanth.sastry.name/sevlievo/">
        Small town Bulgaria
      </a>
    </h1>

    <span class="post-date">05 Sep 2015</span>

    <!-- wp:paragraph -->
<p>I had a really good time visiting Mira's family in <a href="https://en.wikipedia.org/wiki/Sevlievo">Sevlievo, Bulgaria</a>. &nbsp;I am intrigued by the culture and sensibilities in small town Bulgaria.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>We started with visiting the old St. Prophet Eliah Church. The last place I was allowed to take photos was the entrance. It was pretty quaint on the inside, but we were not allowed to take any pictures.</p>
<!-- /wp:paragraph -->

<!-- wp:gallery {"ids":[130,131],"linkTo":"attachment","align":"center","className":"aligncenter"} -->
<ul class="wp-block-gallery aligncenter columns-2 is-cropped"><li class="blocks-gallery-item"><figure><a href="http://srikanth.sastry.name/sevlievo/img_20150828_100426/"><img src="http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150828_100426-768x1024.jpg" alt="" data-id="130" data-link="http://srikanth.sastry.name/sevlievo/img_20150828_100426/" class="wp-image-130" /></a><figcaption>St Prophet Eliah Church</figcaption></figure></li><li class="blocks-gallery-item"><figure><a href="http://srikanth.sastry.name/sevlievo/img_20150828_100506/"><img src="http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150828_100506-768x1024.jpg" alt="" data-id="131" data-link="http://srikanth.sastry.name/sevlievo/img_20150828_100506/" class="wp-image-131" /></a><figcaption>Church entrance</figcaption></figure></li></ul>
<!-- /wp:gallery -->

<!-- wp:more -->
<!--more-->
<!-- /wp:more -->

<!-- wp:paragraph -->
<p>There are a few more churches around the corner, and none are like the churches I am used to seeing in India and in the US.</p>
<!-- /wp:paragraph -->

<!-- wp:gallery {"ids":[186,187]} -->
<ul class="wp-block-gallery columns-2 is-cropped"><li class="blocks-gallery-item"><figure><img src="http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_095912_low-1024x760.jpg" alt="" data-id="186" data-link="http://srikanth.sastry.name/sevlievo/img_20150830_095912_low/" class="wp-image-186" /><figcaption>Another orthodox church</figcaption></figure></li><li class="blocks-gallery-item"><figure><img src="http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_095706-1024x760.jpg" alt="" data-id="187" data-link="http://srikanth.sastry.name/sevlievo/img_20150830_095706/" class="wp-image-187" /><figcaption>Yet another orthodox church</figcaption></figure></li></ul>
<!-- /wp:gallery -->

<!-- wp:paragraph -->
<p>Interestingly, the insignia on one of the church doors, often associated with the Byzantine empire, looked a lot like <a href="https://en.wikipedia.org/wiki/Gandaberunda">Gandaberunda</a>, the official emblem of the state of <a href="https://en.wikipedia.org/wiki/Karnataka">Karnataka</a>.</p>
<!-- /wp:paragraph -->

<!-- wp:gallery {"ids":[194,360],"align":"center"} -->
<ul class="wp-block-gallery aligncenter columns-2 is-cropped"><li class="blocks-gallery-item"><figure><img src="http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_095753-775x1024.jpg" alt="" data-id="194" data-link="http://srikanth.sastry.name/sevlievo/img_20150830_095753/" class="wp-image-194" /><figcaption>Notice the double headed eagle on the church door</figcaption></figure></li><li class="blocks-gallery-item"><figure><img src="http://srikanth.sastry.name/wp-content/uploads/2019/01/GBerunda.jpg" alt="" data-id="360" data-link="http://srikanth.sastry.name/sevlievo/gberunda/" class="wp-image-360" /><figcaption>Karnataka state insignia</figcaption></figure></li></ul>
<!-- /wp:gallery -->

<!-- wp:paragraph -->
<p></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>As I read up more about it, I discovered that two headed birds are ubiquitous in <a href="https://en.wikipedia.org/wiki/Double-headed_eagle">state insignias</a> and <a href="http://www.hubert-herald.nl/TwoHeadedEagle.htm">mythologies</a>.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>As it turns out, there is a mosque in town as well, but only muslims are allowed in. So this is pretty much all I got to see.</p>
<!-- /wp:paragraph -->

<!-- wp:image {"id":135,"align":"center"} -->
<div class="wp-block-image"><figure class="aligncenter"><a href="http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150828_102614.jpg" rel="attachment wp-att-135"><img src="http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150828_102614-450x334.jpg" alt="Mosque" class="wp-image-135" /></a><figcaption>The only mosque in town, and we are not allowed in.</figcaption></figure></div>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p>Next, we head to the city center. The old town. Not the most happening place, but nice nevertheless. Mostly clean streets with plenty of space to relax and lounge. Here is a sample of small-town Bulgarian main streets.</p>
<!-- /wp:paragraph -->

<!-- wp:gallery {"ids":[132,134,133,198],"columns":2} -->
<ul class="wp-block-gallery columns-2 is-cropped"><li class="blocks-gallery-item"><figure><img src="http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150828_101405-1024x768.jpg" alt="" data-id="132" data-link="http://srikanth.sastry.name/sevlievo/img_20150828_101405/" class="wp-image-132" /><figcaption>The main street continues on with businesses on either side</figcaption></figure></li><li class="blocks-gallery-item"><figure><img src="http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150828_101504-1024x760.jpg" alt="" data-id="134" data-link="http://srikanth.sastry.name/sevlievo/img_20150828_101504/" class="wp-image-134" /><figcaption>Start of a main street in town center largely for pedestrians</figcaption></figure></li><li class="blocks-gallery-item"><figure><img src="http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150828_101414-1024x768.jpg" alt="" data-id="133" data-link="http://srikanth.sastry.name/sevlievo/img_20150828_101414/" class="wp-image-133" /><figcaption>The other side of the same main street.</figcaption></figure></li><li class="blocks-gallery-item"><figure><img src="http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_094414-1024x760.jpg" alt="" data-id="198" data-link="http://srikanth.sastry.name/sevlievo/img_20150830_094414/" class="wp-image-198" /><figcaption>Notice the wide sidewalk , and benches to sit on.</figcaption></figure></li></ul>
<!-- /wp:gallery -->

<!-- wp:paragraph -->
<p>The city center also has an impressive statue on a pillar. Apparently, the pillar it stands on is an original Roman pillar from the <a href="https://en.wikipedia.org/wiki/Nicopolis_ad_Istrum">Nicopolis ad Istrum</a>, and the statue was made in Vienna.</p>
<!-- /wp:paragraph -->

<!-- wp:gallery {"ids":[200,242],"linkTo":"attachment","align":"center"} -->
<ul class="wp-block-gallery aligncenter columns-2 is-cropped"><li class="blocks-gallery-item"><figure><a href="http://srikanth.sastry.name/sevlievo/img_20150830_093907/"><img src="http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_093907-763x1024.jpg" alt="" data-id="200" data-link="http://srikanth.sastry.name/sevlievo/img_20150830_093907/" class="wp-image-200" /></a><figcaption>The pillar is from Nicopolis ad Istrum</figcaption></figure></li><li class="blocks-gallery-item"><figure><a href="http://srikanth.sastry.name/img_20150830_093927/"><img src="http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_093927-1024x780.jpg" alt="" data-id="242" data-link="http://srikanth.sastry.name/img_20150830_093927/" class="wp-image-242" /></a><figcaption>Close up of the statue from Vienna</figcaption></figure></li></ul>
<!-- /wp:gallery -->

<!-- wp:paragraph -->
<p>In true European fashion, Sevlievo is also home to some old european houses that once belonged to the rich, but are now run down, but maintained. I remember seeing similar houses in New Castle Upon Tyne, Madrid, and other old cities in Europe.</p>
<!-- /wp:paragraph -->

<!-- wp:gallery {"ids":[202,203]} -->
<ul class="wp-block-gallery columns-2 is-cropped"><li class="blocks-gallery-item"><figure><img src="http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_093339-1024x760.jpg" alt="" data-id="202" data-link="http://srikanth.sastry.name/sevlievo/img_20150830_093339/" class="wp-image-202" /><figcaption>Medieval aristocrat's dwelling? At least, it looks like it.</figcaption></figure></li><li class="blocks-gallery-item"><figure><img src="http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_095233-1024x760.jpg" alt="" data-id="203" data-link="http://srikanth.sastry.name/sevlievo/img_20150830_095233/" class="wp-image-203" /><figcaption>Looks like an old time house whose owner was a rich and influential person.</figcaption></figure></li></ul>
<!-- /wp:gallery -->

<!-- wp:paragraph -->
<p>Interestingly, Sevlievo is also home to <a href="http://www.bulgariainside.eu/en/articles/Sevlievos-Clock-Tower/542/1">one of the oldest clock towers</a> in Bulgaria, built in 1777/1779.</p>
<!-- /wp:paragraph -->

<!-- wp:image {"id":136,"align":"center"} -->
<div class="wp-block-image"><figure class="aligncenter"><a href="http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150828_104216.jpg" rel="attachment wp-att-136"><img src="http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150828_104216-334x450.jpg" alt="Clock Tower" class="wp-image-136" /></a><figcaption>One of the oldest clock towers in Bulgaria.</figcaption></figure></div>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p>Moving on, the city also has a "palace of culture", which ironically looks rather drab.</p>
<!-- /wp:paragraph -->

<!-- wp:image {"id":205,"align":"center"} -->
<div class="wp-block-image"><figure class="aligncenter"><a href="http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_094659.jpg" rel="attachment wp-att-205"><img src="http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_094659-450x334.jpg" alt="Palace of culture" class="wp-image-205" /></a><figcaption>Palace of culture</figcaption></figure></div>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p>Speaking of culture, the town also has plenty of monuments and installations from the communist days. I was surprised by the monotony of these installations. Here is a sample to give you an idea of what I mean.</p>
<!-- /wp:paragraph -->

<!-- wp:gallery {"ids":[210,209,208]} -->
<ul class="wp-block-gallery columns-3 is-cropped"><li class="blocks-gallery-item"><figure><img src="http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_103142-760x1024.jpg" alt="" data-id="210" data-link="http://srikanth.sastry.name/sevlievo/img_20150830_103142/" class="wp-image-210" /></figure></li><li class="blocks-gallery-item"><figure><img src="http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_102617-776x1024.jpg" alt="" data-id="209" data-link="http://srikanth.sastry.name/sevlievo/img_20150830_102617/" class="wp-image-209" /></figure></li><li class="blocks-gallery-item"><figure><img src="http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_094731-760x1024.jpg" alt="" data-id="208" data-link="http://srikanth.sastry.name/sevlievo/img_20150830_094731/" class="wp-image-208" /></figure></li></ul>
<!-- /wp:gallery -->

<!-- wp:paragraph -->
<p>In fact, it appears that everything was pretty monotonous during the communist days. Sevlievo retains some a of communist-era buildings that served as&nbsp;stores and supermarkets. Here are a couple of them.</p>
<!-- /wp:paragraph -->

<!-- wp:gallery {"ids":[213,214]} -->
<ul class="wp-block-gallery columns-2 is-cropped"><li class="blocks-gallery-item"><figure><img src="http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_103711-1024x760.jpg" alt="" data-id="213" data-link="http://srikanth.sastry.name/sevlievo/img_20150830_103711/" class="wp-image-213" /></figure></li><li class="blocks-gallery-item"><figure><img src="http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_103722-1024x760.jpg" alt="" data-id="214" data-link="http://srikanth.sastry.name/sevlievo/img_20150830_103722/" class="wp-image-214" /></figure></li></ul>
<!-- /wp:gallery -->

<!-- wp:paragraph -->
<p>For contrast, compare them to the new bookstore that right down the street.</p>
<!-- /wp:paragraph -->

<!-- wp:image {"id":215,"align":"center"} -->
<div class="wp-block-image"><figure class="aligncenter"><a href="http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_103805.jpg" rel="attachment wp-att-215"><img src="http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_103805-334x450.jpg" alt="The bookstore looks a lot more like in the west." class="wp-image-215" /></a><figcaption>The bookstore looks a lot more like in the west.</figcaption></figure></div>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p>Among all the things uniquely Bulgarian, the most intriguing is the death notice. We are all familiar with the <a href="https://en.wikipedia.org/wiki/Obituary">obituary section</a> in the newspapers. In Bulgaria, there are such obituary notices all over town to announce a death, or a death anniversary. For instance, here is a tree that is used as a obituary notice board.</p>
<!-- /wp:paragraph -->

<!-- wp:image {"id":212,"align":"center"} -->
<div class="wp-block-image"><figure class="aligncenter"><a href="http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_093301.jpg" rel="attachment wp-att-212"><img src="http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_093301-334x450.jpg" alt="A tree trunk used as a obituary notice board" class="wp-image-212" /></a><figcaption>A tree trunk used as a obituary notice board.</figcaption></figure></div>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p>People also post similar notices on the doors of their homes as well, and at times, it is accompanied by a black ribbon tie.</p>
<!-- /wp:paragraph -->

<!-- wp:gallery {"ids":[297,298],"columns":2,"linkTo":"attachment"} -->
<ul class="wp-block-gallery columns-2 is-cropped"><li class="blocks-gallery-item"><figure><img src="http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_104750.jpg" alt="" data-id="297" class="wp-image-297" /></figure></li><li class="blocks-gallery-item"><figure><img src="http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150901_185800.jpg" alt="" data-id="298" class="wp-image-298" /></figure></li></ul>
<!-- /wp:gallery -->

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="//srikanth.sastry.name/shipka-memorial-church/">
        Shipka Memorial Church
      </a>
    </h1>

    <span class="post-date">04 Sep 2015</span>

    <!-- wp:paragraph -->
<p><a href="https://en.wikipedia.org/wiki/Shipka_Memorial_Church">Shipka memorial church</a> is a Bulgarian Orthodox church built in the style of a Russian Orthodox church.</p>
<!-- /wp:paragraph -->

<!-- wp:image {"id":283,"align":"center","linkDestination":"attachment"} -->
<div class="wp-block-image"><figure class="aligncenter"><a href="http://srikanth.sastry.name/shipka-memorial-church/img_20150901_134154/"><img src="http://srikanth.sastry.name/wp-content/uploads/2015/09/IMG_20150901_134154-334x450.jpg" alt="The front of the Shipka Memorial Church" class="wp-image-283" /></a><figcaption>The front of the Shipka Memorial Church</figcaption></figure></div>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p>It was build during late 19th century as a dedication to the Bulgarian, Russian, and Ukrainian soldiers who lost their lives in liberating Bulgaria from the <a href="https://en.wikipedia.org/wiki/Ottoman_Empire">Ottoman empire</a>. The gold plated domes are of typical Muscovite style from the late 19th century.</p>
<!-- /wp:paragraph -->

<!-- wp:more -->
<!--more-->
<!-- /wp:more -->

<!-- wp:gallery {"ids":[284,285,286],"columns":1,"linkTo":"attachment"} -->
<ul class="wp-block-gallery columns-1 is-cropped"><li class="blocks-gallery-item"><figure><img src="http://srikanth.sastry.name/wp-content/uploads/2015/09/IMG_20150901_134301.jpg" alt="" data-id="284" class="wp-image-284" /></figure></li><li class="blocks-gallery-item"><figure><img src="http://srikanth.sastry.name/wp-content/uploads/2015/09/IMG_20150901_135548.jpg" alt="" data-id="285" class="wp-image-285" /></figure></li><li class="blocks-gallery-item"><figure><img src="http://srikanth.sastry.name/wp-content/uploads/2015/09/IMG_20150901_135851.jpg" alt="" data-id="286" class="wp-image-286" /></figure></li></ul>
<!-- /wp:gallery -->

<!-- wp:paragraph -->
<p>The inside, however, looks a lot like a <a href="https://en.wikipedia.org/wiki/Bulgarian_Orthodox_Church">Bulgarian Orthodox church</a>.</p>
<!-- /wp:paragraph -->

<!-- wp:gallery {"ids":[290,289,291],"columns":1,"linkTo":"attachment"} -->
<ul class="wp-block-gallery columns-1 is-cropped"><li class="blocks-gallery-item"><figure><img src="http://srikanth.sastry.name/wp-content/uploads/2015/09/IMG_20150901_135343.jpg" alt="" data-id="290" class="wp-image-290" /></figure></li><li class="blocks-gallery-item"><figure><img src="http://srikanth.sastry.name/wp-content/uploads/2015/09/IMG_20150901_135329.jpg" alt="" data-id="289" class="wp-image-289" /></figure></li><li class="blocks-gallery-item"><figure><img src="http://srikanth.sastry.name/wp-content/uploads/2015/09/IMG_20150901_135423.jpg" alt="" data-id="291" class="wp-image-291" /></figure></li></ul>
<!-- /wp:gallery -->

<!-- wp:paragraph -->
<p>There is a crypt in the basement that has graves that serves as a memorial for and contains remains of&nbsp;the soldiers who lost their lives in <a href="https://en.wikipedia.org/wiki/Battle_of_Shipka_Pass">battles of Shipka Pass</a> during the <a href="https://en.wikipedia.org/wiki/Russo-Turkish_War_(1877%E2%80%9378)">Russo-Turkish war</a>.</p>
<!-- /wp:paragraph -->

<!-- wp:gallery {"ids":[294,293],"columns":1,"linkTo":"attachment"} -->
<ul class="wp-block-gallery columns-1 is-cropped"><li class="blocks-gallery-item"><figure><img src="http://srikanth.sastry.name/wp-content/uploads/2015/09/IMG_20150901_135137.jpg" alt="" data-id="294" class="wp-image-294" /></figure></li><li class="blocks-gallery-item"><figure><img src="http://srikanth.sastry.name/wp-content/uploads/2015/09/IMG_20150901_135040.jpg" alt="" data-id="293" class="wp-image-293" /></figure></li></ul>
<!-- /wp:gallery -->

  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="//srikanth.sastry.name/page6">Older</a>
  
  
    
      <a class="pagination-item newer" href="//srikanth.sastry.name/page4">Newer</a>
    
  
</div>

      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script src='/public/js/script.js'></script>
  </body>
</html>
