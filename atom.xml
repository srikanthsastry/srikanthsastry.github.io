<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

 <title>Srikanth Sastry</title>
 <link href="//srikanth.sastry.name/atom.xml" rel="self"/>
 <link href="//srikanth.sastry.name/"/>
 <updated>2022-06-05T18:51:51+00:00</updated>
 <id>//srikanth.sastry.name</id>
 <author>
   <name>Srikanth Sastry</name>
   <email>srikanth@sastry.name</email>
 </author>

 
 <entry>
   <title>Unit test the brains and not the nerves</title>
   <link href="//srikanth.sastry.name/unit-test-the-brains-and-not-the-nerves/"/>
   <updated>2022-05-31T00:00:00+00:00</updated>
   <id>//srikanth.sastry.name/unit-test-brains-and-not-nerves</id>
   <content type="html">&lt;p&gt;&lt;em&gt;Note: This is inspired from the book “&lt;a href=&quot;https://www.manning.com/books/unit-testing&quot;&gt;Unit Testing: Principles, Practices, and Patterns&lt;/a&gt;” by Vladimir Khorikov.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/brain-magnifying-glass.png&quot; alt=&quot;brain&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Unit tests are typically your first line of defense against bugs. So, it is tempting to add unit tests for all functionality that your code supports. But that begs the following question. “Why do we need integration and end-to-end tests?”&lt;/p&gt;

&lt;h2 id=&quot;categorizing-production-code&quot;&gt;Categorizing production code&lt;/h2&gt;
&lt;p&gt;To better understand the primary motivations for unit tests vs. integration (and end-to-end) tests, it is helpful to categorize your production code into four categories along two dimensions: thinking, and talking.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;em&gt;Thinking code.&lt;/em&gt; There are parts of your codebase that are focused mostly on the business logic and the complex algorithmic computations. I refer to these as the thinking code.&lt;/li&gt;
  &lt;li&gt;&lt;em&gt;Talking code.&lt;/em&gt; There are parts of your codebase that are focused mostly on communicating with other dependencies such as key-value stores, log servers, databases, etc. I refer to these as talking code.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Each part of your codebase can be either thinking, talking, or both. Based on that observation, we can categorize each unit of code into one of four categories (in keeping with the biology theme).&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Thinking&lt;/th&gt;
      &lt;th&gt;Talking&lt;/th&gt;
      &lt;th&gt;Category&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Yes&lt;/td&gt;
      &lt;td&gt;No&lt;/td&gt;
      &lt;td&gt;&lt;em&gt;Brain&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;No&lt;/td&gt;
      &lt;td&gt;Yes&lt;/td&gt;
      &lt;td&gt;&lt;em&gt;Nerves&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Yes&lt;/td&gt;
      &lt;td&gt;Yes&lt;/td&gt;
      &lt;td&gt;&lt;em&gt;Ganglia&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;No&lt;/td&gt;
      &lt;td&gt;No&lt;/td&gt;
      &lt;td&gt;&lt;em&gt;Synapse&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;testing-for-each-category&quot;&gt;Testing for each category&lt;/h2&gt;

&lt;p&gt;Each category needs a distinct approach to testing.&lt;/p&gt;

&lt;h3 id=&quot;brains--unit-tests&quot;&gt;Brains → Unit Tests&lt;/h3&gt;

&lt;p&gt;Brains are one of the most complex parts of your codebase that often requires the most technical skill and domain knowledge to author, read, and maintain. Consequently, they are best tested with unit tests. Furthermore, they also have very few direct external dependencies, and as a result require limited use of test doubles.&lt;/p&gt;

&lt;h3 id=&quot;nerves--integration-tests&quot;&gt;Nerves → Integration Tests&lt;/h3&gt;

&lt;p&gt;Nerves have very little logic, but focus mostly on external communication with dependencies.
As a result, there isn’t much to unit test here, except perhaps that the protocol translation from the outside world into the brains is happening correctly.
By their very nature, the correctness of nerves cannot be tested hermetically, and therefore, are not at all well suited to be unit tested. Nerves should really be tested in your integration tests, where you hook your production code with real test instances of external dependencies.&lt;/p&gt;

&lt;h3 id=&quot;ganglia--refactor&quot;&gt;Ganglia → Refactor&lt;/h3&gt;

&lt;p&gt;Ganglia are units of code that have both complex business logic and have significant external dependencies. It is very difficult to unit test them thoroughly because such unit tests require heavy use of test doubles which can make the tests less readable and more brittle. You could try to test ganglia through integration tests, but it becomes very challenging to test low probability code paths, which is usually the source of difficult-to-debug issues. Therefore, my suggestion is to refactor such code into smaller pieces of code each of which are either a &lt;em&gt;brain&lt;/em&gt; or a &lt;em&gt;nerve&lt;/em&gt;, and tests each of those as described above.&lt;/p&gt;

&lt;p&gt;See Chapter 7 of “&lt;a href=&quot;https://www.manning.com/books/unit-testing&quot;&gt;Unit Testing: Principles, Practices, and Patterns&lt;/a&gt;” for suggestions on how to refactor your code to make it more testable.&lt;/p&gt;

&lt;h3 id=&quot;synapse--ignore&quot;&gt;Synapse → Ignore&lt;/h3&gt;

&lt;p&gt;Synapses are trivial pieces of code (often utilities) that have neither complex business logic, nor do they have any external dependencies. My recommendation is to simply not focus on testing them. Adding unit tests for them simply increases the cost of testing and maintenance without really providing any benefit. They are often simple enough to be verified visually, and they exist only to serve either the brains or the nerves, and so will be indirectly tested via unit tests or integration tests.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Mocks, Stubs, and how to use them</title>
   <link href="//srikanth.sastry.name/mocks-stubs-andhow-to-use-them/"/>
   <updated>2022-05-25T00:00:00+00:00</updated>
   <id>//srikanth.sastry.name/mocks-stubs-and-how-to-use-them</id>
   <content type="html">&lt;p&gt;&lt;img src=&quot;/images/masquerade-masks.png&quot; alt=&quot;Photo by Polina Kovaleva from Pexels&quot; /&gt;
&lt;em&gt;Photo by &lt;a href=&quot;https://www.pexels.com/@polina-kovaleva?utm_content=attributionCopyText&amp;amp;utm_medium=referral&amp;amp;utm_source=pexels&quot;&gt;Polina Kovaleva&lt;/a&gt; from &lt;a href=&quot;https://www.pexels.com/photo/close-up-of-masquerade-masks-on-purple-background-8404608/?utm_content=attributionCopyText&amp;amp;utm_medium=referral&amp;amp;utm_source=pexels&quot;&gt;Pexels&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Test_double&quot;&gt;Test doubles&lt;/a&gt; are the standard mechanism to isolate your System-Under-Test (SUT) from external dependencies in unit tests. Unsurprisingly, it is important to use the right test double for each use case for a maintainable and robust test suite. However, I have seen a lot of misuse of test doubles, and suffered through the consequences of it enough number of times to want to write down some (admittedly subjective) guidelines on when an how to use test doubles.&lt;/p&gt;

&lt;p&gt;Briefly, test doubles are &lt;a href=&quot;https://martinfowler.com/bliki/TestDouble.html&quot;&gt;replacements for a production object used for testing&lt;/a&gt;. Depending on who you ask, there are multiple different categorizations of test doubles; but two categories that appears in all of these categorizations are &lt;a href=&quot;https://en.wikipedia.org/wiki/Mock_object&quot;&gt;mocks&lt;/a&gt; and &lt;a href=&quot;https://en.wikipedia.org/wiki/Test_stub&quot;&gt;stubs&lt;/a&gt;. So I will focus on on these two. I have seen mocks and stubs often conflated together. The problem is made worse by all the test-double frameworks’ terminology: they are often referred to as ‘mocking’ frameworks, and the test doubles they generate are all called ‘mocks’.&lt;/p&gt;

&lt;h2 id=&quot;mocks&quot;&gt;Mocks&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/images/woman-wearing-emoji-mask.jpg&quot; alt=&quot;woman wearing an emoji mask&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Image by &lt;a href=&quot;https://pixabay.com/users/5697702-5697702/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=2428737&quot;&gt;Andii Samperio&lt;/a&gt; from &lt;a href=&quot;https://pixabay.com/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=2428737&quot;&gt;Pixabay&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Mocks are objects that are used to verify ‘outbound’ interactions of the SUT with external dependencies. This is different from the notion of ‘mocks’ that ‘mocking frameworks’ generate. Those ‘mocks’ are more correctly the superclass of test doubles.
Examples where mocks are useful include the SUT logging to a log server, or sending an email, or filing a task/ticket in response to a given input/user journey. This becomes clearer with an illustration.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;unittest.mock&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MagicMock&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TestSUT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;unittest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TestCase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;test_log_success&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;mock_log_server&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MagicMock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LogServerClass&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;autospec&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;mock_log_server&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;log&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MagicMock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;return_value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;sut&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SUT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;log_server&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mock_log_server&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        
        &lt;span class=&quot;n&quot;&gt;sut&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test_method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;foo&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        
        &lt;span class=&quot;c1&quot;&gt;# This is ok!
&lt;/span&gt;        &lt;span class=&quot;n&quot;&gt;mock_log_server&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assert_called_once_with&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;foo&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note that in the above illustration, we verify that the message is sent to the the log server exactly once. This is an important part of the SUT’s specification. It the SUT were to start logging multiple messages/records for the request, then it could pollute the logs or even overwhelm the log server. Here, even though logging appears to be a side effect of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;test_method&lt;/code&gt;, this side effect is almost certainly part of SUT’s specification, and needs to be verified correctly. Mocks play a central role in such verifications.&lt;/p&gt;

&lt;h2 id=&quot;stubs&quot;&gt;Stubs&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/images/robot-imitating-family.jpg&quot; alt=&quot;Robot imitating family&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Unlike mocks, stubs verify ‘inbound’ interactions from external dependencies to the SUT. Stubs are useful when replacing external dependencies that ‘send’ data to the SUT in order for the SUT to satisfy its specification. Examples include key value stores, databases, event listeners, etc. The important note here is that the outbound interaction to the stub &lt;em&gt;should not be asserted&lt;/em&gt; in the tests; that’s an anti pattern (it results in over-specification)! Here is an illustration.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;unittest.mock&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MagicMock&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TestSUT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;unittest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TestCase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;test_email_retrieval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;stub_key_value_store&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MagicMock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;KeyValueStoreClass&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;autospec&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;stub_key_value_store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MagicMock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;return_value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;user@special_domain.com&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;sut&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SUT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key_value_store&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stub_key_value_store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        
        &lt;span class=&quot;n&quot;&gt;email_domain&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sut&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_user_email_domin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;username&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;foo&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        
        &lt;span class=&quot;c1&quot;&gt;# This is ok!
&lt;/span&gt;        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assertEquals&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;special_domain.com&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;email_domain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        
        &lt;span class=&quot;c1&quot;&gt;# THIS IS NOT OK!
&lt;/span&gt;        &lt;span class=&quot;n&quot;&gt;stub_key_value_store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assert_called_once_with&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;username&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;foo&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In the above illustration, we create a stub for the key value store (note that this is a stub even thought the object is a ‘mock’ class) that returns &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&quot;user@special_domain.com&quot;&lt;/code&gt; as a canned response to a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;get&lt;/code&gt; call. The test verifies that the SUT’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;get_user_email_domain&lt;/code&gt; is called, it returns the correct email domain. What is important here is that we &lt;em&gt;should not&lt;/em&gt; assert that there was a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;get&lt;/code&gt; call to the stub. Why? Because the call to the key value store is an implementation detail. Imagine a refactor that causes a previous value to be cached locally. If the unit tests were to assert on calls to the stubs, then such refactors would result in unit test failures, which undermines the utility, maintainability, and robustness of unit tests.&lt;/p&gt;

&lt;h3 id=&quot;fakes-instead-of-stubs&quot;&gt;Fakes, instead of stubs&lt;/h3&gt;

&lt;p&gt;A small detour here. When using a stub, always consider if you can use a fake instead. There are multiple definitions of a fake, and the one I am referring to is the following. A fake is a special kind of stub that implements the same API as the production dependency, but the implementation is much more lightweight. This implementation may be correct only within the context of the unit tests where it is used. Let’s reuse the previous illustration of using a stub, and replace the stub with a fake. Recall that we stubbed out the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;get&lt;/code&gt; method of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;KeyValueStoreClass&lt;/code&gt; to return the canned value &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&quot;user@special_domain.com&quot;&lt;/code&gt;. Instead, we can implement a fake &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;KeyValueStoreClass&lt;/code&gt; that uses a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Dict&lt;/code&gt; as follows.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;unittest.mock&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MagicMock&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;typing&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Dict&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# We assume a simplistic API for KeyValueStoreClass with just
# update and get methods.
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;KeyValueStoreClass&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;FakeKeyValueStoreClassImpl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kvs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Dict&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kvs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kvs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;


&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TestSUT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;unittest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TestCase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;test_email_retrieval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;FakeKeyValueStoreClass&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MagicMock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;return_value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FakeKeyValueStoreClassImpl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;fake_key_value_store&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FakeKeyValueStoreClass&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;fake_key_value_store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;foo&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;user@special_domain.com&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;sut&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SUT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key_value_store&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fake_key_value_store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        
        &lt;span class=&quot;n&quot;&gt;email_domain&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sut&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_user_email_domin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;username&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;foo&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assertEquals&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;special_domain.com&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;email_domain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The advantage of using a fake is that the test becomes much more robust and is more resistant to refactoring. It also becomes more extensible. When using a stub, if we wanted to test a different user journey, we would need to inject a new return value for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;KeyValueStoreClass.get&lt;/code&gt; method. We would in one of two ways:  (1) resetting the mock, which is a bad anti-pattern, or (2) initialize the stub to return a preconfigured list of canned values, in order, which makes the test more brittle (consider what happens if the SUT chooses to call &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;get&lt;/code&gt; for the same key twice vs. calls &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;get&lt;/code&gt; for different keys once each). Using a fake sidesteps these issues.&lt;/p&gt;

&lt;h2 id=&quot;but-my-dependency-has-both-inbound-and-outbound-interactions&quot;&gt;But my dependency has both inbound and outbound interactions!&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/images/man-double-exposed-photo.jpg&quot; alt=&quot;Photograph of man double exposure&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Despite all your efforts to separate out the test cases that need stubs and the ones that need mocks, you will inevitably find yourself needing to test a scenario in which you need to verify both inbound and outbound interactions with an external dependency. How do we address that?&lt;/p&gt;

&lt;p&gt;First, if you need to assert on the outbound interaction of the same call that is stubbed, then you really don’t need that test. Just use a stub/fake and do not assert on the outbound interaction. Next, the only legitimate case of needing to verify both inbound and outbound interactions is if they are on distinct APIs of the same dependency. For example, the SUT could be reading from a file, and you need to test that (1) the contents of the file were read correctly, and (2) the file object was closed after the file was read. In this case, it is perfectly ok to stub the file &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;read&lt;/code&gt; method while mocking the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;close&lt;/code&gt; method. Here is an illustration.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;unittest.mock&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MagicMock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;patch&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TestSUT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;unittest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TestCase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;test_file_read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;file_mock_stub_combo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MagicMock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;# Using this as a stub by injecting canned contents of the file
&lt;/span&gt;        &lt;span class=&quot;n&quot;&gt;file_mock_stub_combo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__iter__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;return_value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;1234&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        
        &lt;span class=&quot;c1&quot;&gt;# Next, we treat the file open call as a mock.
&lt;/span&gt;        &lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;patch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;builtins.open&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                   &lt;span class=&quot;n&quot;&gt;return_value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_mock_stub_combo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
                   &lt;span class=&quot;n&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;
                  &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mock_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;sut&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SUT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;foo&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;file_contents&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sut&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_contents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
            
            &lt;span class=&quot;c1&quot;&gt;# Assertions on call to file open.
&lt;/span&gt;            &lt;span class=&quot;c1&quot;&gt;# Treating the 'open' call as a mock.
&lt;/span&gt;            &lt;span class=&quot;n&quot;&gt;mock_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assert_called_once_with&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;foo&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        
            &lt;span class=&quot;c1&quot;&gt;# Assertion on the contents returned.
&lt;/span&gt;            &lt;span class=&quot;c1&quot;&gt;# Treating the `read` as a stub.
&lt;/span&gt;            &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assertEquals&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;1234&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;file_contents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        
            &lt;span class=&quot;c1&quot;&gt;# Assertion on the outbound interaction of file close.
&lt;/span&gt;            &lt;span class=&quot;c1&quot;&gt;# Treating the 'close' call as a mock.
&lt;/span&gt;            &lt;span class=&quot;n&quot;&gt;file_mock_stub_combo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assert_called_once&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>DRY unit tests are bad... mkay</title>
   <link href="//srikanth.sastry.name/dry-unit-tests-are-bad/"/>
   <updated>2022-05-17T00:00:00+00:00</updated>
   <id>//srikanth.sastry.name/DRY-unit-tests-are-bad</id>
   <content type="html">&lt;p&gt;&lt;img src=&quot;/images/squeeze-cloth.jpg&quot; alt=&quot;DRY&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Don%27t_repeat_yourself&quot;&gt;“Don’t Repeat Yourself” (DRY)&lt;/a&gt; is arguably one of the most important principles in software engineering. It is considered a truism among many. A consequence of such dogmatic allegiance to DRYness is that we see a lot of DRY unit tests; this is where the utility of the DRY principle breaks downs and starts causing more problems that it solves.&lt;/p&gt;

&lt;h2 id=&quot;so-whats-wrong-with-dry-unit-tests&quot;&gt;So, what’s wrong with DRY Unit Tests?&lt;/h2&gt;
&lt;p&gt;Presumably, we are all convinced of the benefits of DRYing your code (interested readers can go &lt;a href=&quot;https://en.wikipedia.org/wiki/Don%27t_repeat_yourself&quot;&gt;the Wikipedia page&lt;/a&gt;). It does have some downsides, and so you have the notion of the &lt;a href=&quot;http://blog.jayfields.com/2006/05/dry-code-damp-dsls.html&quot;&gt;DAMP&lt;/a&gt;/&lt;a href=&quot;https://startup-cto.net/moist-code-why-code-should-not-be-completely-dry/&quot;&gt;MOIST&lt;/a&gt;/&lt;a href=&quot;https://kentcdodds.com/blog/aha-programming&quot;&gt;AHA&lt;/a&gt; principle. Interestingly, the reasons why DRYness doesn’t always work out in production code are different from why it is a bad idea to write DRY unit tests. I see five ways in which (a) test code is different from production code and (b) it contributes to why test code should not be DRY.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Tests (conceptually) do not yield well to common abstractions.&lt;/li&gt;
  &lt;li&gt;Test code’s readability always takes precedence over performance, but not so for production code.&lt;/li&gt;
  &lt;li&gt;Production code enjoys the safety net of test code, but test code has no such backstop.&lt;/li&gt;
  &lt;li&gt;DRY production code can speed up developer velocity, but DRY test code hinders developer velocity.&lt;/li&gt;
  &lt;li&gt;Complex changes to production code can be reviewed faster with pure green/pure red test code changes, but complex changes to test code cannot be reviewed easily.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Let’s explore each one in more detail.&lt;/p&gt;

&lt;h3 id=&quot;dryness-and-abstraction&quot;&gt;DRYness and Abstraction&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;/images/triangles-abstract.png&quot; alt=&quot;Abstract&quot; /&gt;
In practice, DRYing out code results in building abstractions that &lt;em&gt;represents a collection of semantically identical operations&lt;/em&gt; into common procedure. If done prematurely, then DRYing can result in poorer software. In fact, premature DRYing is the motivation for advocating the &lt;a href=&quot;https://kentcdodds.com/blog/aha-programming&quot;&gt;AHA&lt;/a&gt; principle. While that argument against DRYness works well in production code, it does not apply for test code.&lt;/p&gt;

&lt;p&gt;Test code is often a collection of procedures, and each procedure steps the System-Under-Test (SUT) through a distinct user journey and compares the SUT’s behavior against pre-defined expectations. Thus, almost by design, test code does not yield itself semantically similar abstractions. The mistake that I have seen software engineers make is to mistake syntactic similarly for semantic similarity. Just because the tests’ ‘Arrange’ sections look similar does not mean that they are doing semantically the same thing in both places; in fact, they are almost certainly doing semantically different things because otherwise, the tests are duplicates of each other!&lt;/p&gt;

&lt;p&gt;By DRYing out such test code, you are effectively forcing abstractions where none exist, and that leads to the same issues that DRYness leads to in production code (See &lt;a href=&quot;https://kentcdodds.com/blog/aha-programming&quot;&gt;[1]&lt;/a&gt;, &lt;a href=&quot;https://sandimetz.com/blog/2016/1/20/the-wrong-abstraction&quot;&gt;[2]&lt;/a&gt;, &lt;a href=&quot;https://evhaus.medium.com/using-dry-wet-damp-code-6ab3c8245bb2&quot;&gt;[3]&lt;/a&gt;, &lt;a href=&quot;https://startup-cto.net/moist-code-why-code-should-not-be-completely-dry/&quot;&gt;[4]&lt;/a&gt; for examples).&lt;/p&gt;

&lt;h3 id=&quot;readability&quot;&gt;Readability&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;/images/glasses-letters-clear.jpg&quot; alt=&quot;Abstract&quot; /&gt;
Most code is read more often than is written/edited. Unsurprisingly, it is important to favor code readability, even in production code. However, in production code, if this comes at a steep cost in performance and/or efficiency, then it is common (and prudent) to favor performance over readability. Test code, on the other hand, is less subject to the (potential) tension between readability and performance. Yes, unit tests need to be ‘fast’, but given the minuscule amount of data/inputs that unit tests process, speed is not an issue with hermetic unit tests. The upshot here is that there is no practical drawback to keeping test code readable.&lt;/p&gt;

&lt;p&gt;DRYing out test code directly affects its readability. Why? Remember that we read unit tests to understand the expected behavior of the system-under-test (SUT), and we do so in the context of a user journey. So, a readable unit test needs to explain the user journey it is executing, the role played by the SUT in realizing that user journey, and what a successful user journey looks like. This is reflected in the &lt;a href=&quot;https://java-design-patterns.com/patterns/arrange-act-assert/&quot;&gt;Arrange-Act-Assert&lt;/a&gt; structure of the unit test. When you DRY out your unit tests, you are also obfuscating at least one of those sections in your unit test. This is better illustrated with an example.&lt;/p&gt;

&lt;p&gt;A common DRYing in unit tests I have seen looks as follows:&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TestInput&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;typing&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NamedTuple&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;param1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;param2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;typing&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Optional&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TestOutput&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;typing&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NamedTuple&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SomeEnum&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;return_value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;typing&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Optional&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;exception&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;typing&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Optional&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Exception&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TestCase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;typing&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NamedTuple&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TestInput&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;expected_output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TestOutput&lt;/span&gt;
        
&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TestSequence&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;unittest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TestCase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    
    &lt;span class=&quot;o&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parameterized&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expand&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test_input1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expected_output1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test_input2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expected_output2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;test_somethings&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;test_input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TestInput&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expected_output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TestOutput&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_run_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test_input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expected_output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;_run_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;test_input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TestInput&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expected_output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TestOutput&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;sut&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SUT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(...)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;prepare_sut_for_tests&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sut&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;test_input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;output&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sut&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;do_something&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test_input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;param2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;test_output&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;make_test_output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sut&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assertEquals&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expected_output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;test_output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;On the face of it, it looks like DRY organized code. But for someone reading this test to understand what SUT does, it is very challenging. They have no idea why the set of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;test_input&lt;/code&gt;s were chosen, what is the material difference among the inputs, what user journeys do each of those test cases represent, what are the preconditions that need to be satisfied for running &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sut.do_something()&lt;/code&gt;, why is the expected output the specified output, and so on.&lt;/p&gt;

&lt;p&gt;Instead, consider a non-DRY alternative.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TestSequence&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;unittest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TestCase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;test_foo_input_under_bar_condition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot;
        This test verifies that when condition bar is true, then calling `do_something()`
        with input foo results in sigma behavior
        &quot;&quot;&quot;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;sut&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SUT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;ensure_precondition_bar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sut&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;param1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bar1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;param2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bar2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;output&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sut&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;do_something&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;foo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assertEquals&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sigma&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This code tests one user journey and is human readable at a glance by something who does not have in-depth understanding of SUT. We can similarly define all the other test cases with code duplication and greater readability, with negligible negative impact.&lt;/p&gt;

&lt;h3 id=&quot;who-watches-the-watchmen&quot;&gt;Who watches the watchmen?&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;https://upload.wikimedia.org/wikipedia/commons/thumb/0/0c/Watchmen_graffiti_1.jpg/2560px-Watchmen_graffiti_1.jpg&quot; alt=&quot;colink., CC BY-SA 2.0 &amp;lt;https://creativecommons.org/licenses/by-sa/2.0&amp;amp;gt&quot; /&gt;
&lt;em&gt;[&lt;a href=&quot;https://www.flickr.com/photos/67458569@N00/7099293919&quot;&gt;Original Image&lt;/a&gt; posted to &lt;a href=&quot;https://en.wikipedia.org/wiki/Flickr&quot; title=&quot;en:Flickr&quot;&gt;Flickr&lt;/a&gt; by colink. License: &lt;a href=&quot;https://creativecommons.org/licenses/by-sa/2.0/&quot;&gt;Creative Commons ShareAlike&lt;/a&gt;]&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Production code has the luxury of being fine tuned, optimized, DRY’d out, and subject to all sorts of gymnastics mostly because production code is defended by tests and test code. For instance, to improve performance, if you replaced a copy with a reference, and accidentally mutated that reference inside a function, you have a unit test that can catch such unintended mutations. However, test code has no such backstop. If you introduce a bug in your test code, then only a careful inspection by a human will catch it. The upshot is the following: the less simple/obvious the test code is, the more likely it is that a bug in that test code will go undetected, at least for a while. If a buggy test is passing, then it means your production code has a bug that is undetected. Conversely, if a test fails then, it might just denote a bug in the test code. If this happens, you lose confidence in your test suite, and nothing good can come from that.&lt;/p&gt;

&lt;p&gt;DRY code inevitably asks the reader to jump from one function to another and requires the reader to keep the previous context when navigating these functions. In other words, it increases the cognitive burden on the reader compared to straight line duplicated code. That makes it difficult to verify the correctness of the test code quickly and easily. So, when you DRY out your test code, you are increasing the odds that bugs creep into your test suite, and developers lose confidence in the tests, which in turn significantly reduces the utility if your tests.&lt;/p&gt;

&lt;h3 id=&quot;developer-velocity&quot;&gt;Developer Velocity&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;/images/woman-developer-frustrated.jpg&quot; alt=&quot;Woman developer&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Recall from the previous section that while tests might have duplicate code, they do not actually represent semantic abstractions replicated in multiple places. If you do mistake them for common semantic abstractions and DRY them out, then eventually there will an addition to the production code whose test breaks this semantic abstraction. At this point, the developer who is adding this feature will run into issues when trying to modify the existing test code to add the new test case. For instance, consider a class that is hermetic, stateless, and does not throw exceptions. It would not be surprising to organize DRY tests for this class that assumes that exceptions are never thrown. Now there is a new feature added to this class that requires an external dependency, and now can throw exceptions. Added a new test case into the DRY’d out unit test suite will not be easy or straightforward. The sunk cost fallacy associated with the existing test framework makes it more likely that the developer will try to force-fit the new test case(s) into existing framework. As a result:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;It slows the developer down because they now have to grok the existing test framework, think of ways in which to extend it for a use case that it was not designed for, and make those changes without breaking existing tests.&lt;/li&gt;
  &lt;li&gt;Thanks to poor abstractions, you have now incurred more technical debt in your test code.&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;code-reviews&quot;&gt;Code Reviews&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;/images/black-women-developers.jpg&quot; alt=&quot;Developers doing code reviews&quot; /&gt;&lt;/p&gt;

&lt;p&gt;DRY’d out tests not only impede developer velocity, they also make it less easy to review code/diffs/pull requests. This is a second order effect of DRYing out your test code. Let’s revisit the example where we are adding a new feature to an existing piece of code, and this is a pure addition in behavior (not modification to existing behavior). If the tests were not DRY’d out, then adding tests for this new feature would involve just adding new test cases, and thus, just green lines in the generated diff. In contrast, recall from the previous subsection that adding tests with DRY test code is likely going to involve modifying existing code and then adding new test cases. In the former case, reviewing the tests is much easier, and as a result, reviewing that the new feature is behaving correctly is also that much easier. Reviewing the diff in the latter case is cognitively more taxing because not only does the reviewer need to verify that the new feature is implemented correctly, they also have to verify that the changes to the test code is also correct, and is not introducing new holes for bugs to escape testing. This can significantly slow down code reviews in two ways (1) it requires more time to review the code, and (2) because it requires longer to review the code, the reviewers are more likely to delay even starting the code review.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Do not index on test coverage metrics</title>
   <link href="//srikanth.sastry.name/do-not-index-in-test-coverage/"/>
   <updated>2022-04-29T00:00:00+00:00</updated>
   <id>//srikanth.sastry.name/do-not-index-on-test-coverage</id>
   <content type="html">&lt;p&gt;&lt;img src=&quot;/images/chart-coverage.png&quot; alt=&quot;Coverage Chart&quot; /&gt;&lt;/p&gt;

&lt;p&gt;We live in a data driven world, and as the saying goes “[…] What is not measured, cannot be improved. […]”&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;What is not defined cannot be measured. What is not measured, cannot be improved. What is not improved, is always degraded.&lt;/p&gt;

  &lt;p&gt;– William Thomson Kelvin&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;The temptation, therefore, is to measure everything. Even the quality of your unit tests, and there where the trouble usually begins. For an detailed explanation of why indexing on the test coverage metrics is a bad idea, I highly recommend Jason Rudolph’s collection of posts on this topic &lt;a href=&quot;https://jasonrudolph.com/blog/testing-anti-patterns-how-to-fail-with-100-test-coverage/&quot;&gt;here&lt;/a&gt;. To drive home the point more explicitly (and motivate you to actually go read Jason’s posts), here are some illustrative explanations.&lt;/p&gt;

&lt;p&gt;There are many coverage metrics including function coverage, statement coverage, line coverage, branch coverage, condition coverage, etc. Here, we will only look at line coverage and branch coverage, because those are the most popular.&lt;/p&gt;

&lt;h2 id=&quot;line-coverage&quot;&gt;Line coverage&lt;/h2&gt;
&lt;p&gt;Let’s start with &lt;em&gt;line coverage&lt;/em&gt;, which is the number of lines of code executed by tests vs. the total number of lines of code. The most common target for the line coverage metric is 80%. That is, 80% of your code should be executed by your tests. While that might seem like a good idea, indexing on this metric can actually take you away from good quality test coverage! How? Consider the following (contrived example).&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;has_three_digits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;strlen&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;strlen&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TestHasThreeDigits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;unittest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TestCase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;test_has_three_digits_234&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;output_value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;has_three_digits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;234&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assertTrue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;output_value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Clearly &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TestHasThreeDigits&lt;/code&gt; inadequate as a test suite for testing &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;has_three_digits&lt;/code&gt;. Tests only the True case, and misses the False cases completely!
The line coverage of the test suite is 3/4 = 75%. You could say that the test coverage is less than 80%, and therefore not adequate. Here, it appears that the line coverage metric does indeed point of inadequate testing. However, this confidence in the metric is severely misplaced! Consider the following refactoring of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;has_three_digits&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;has_three_digits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;value_as_str&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;strlen&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value_as_str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;strlen&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Now, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TestHasThreeDigits&lt;/code&gt; line coverage magically improves to 4/5 = 80%, and as per the 80% target, the metrics seems to suggest adequate coverage! In fact, you can play this game some more and refactor &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;has_three_digits&lt;/code&gt; to&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;has_three_digits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;value_as_str&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;strlen&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value_as_str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;strlen&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Now, with the same test suite &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TestHasThreeDigits&lt;/code&gt; now has 100% coverage! Recall that semantically the test still do the same thing; they still test only the True case, and ignore the False case completely.&lt;/p&gt;

&lt;h2 id=&quot;branch-coverage&quot;&gt;Branch coverage&lt;/h2&gt;
&lt;p&gt;An easy retort to the above example is that line coverage is not a sufficiently nuanced metric, and what you really need is &lt;em&gt;branch coverage&lt;/em&gt;, which is the number of branches executed by the tests vs. the number of branches in the code.&lt;/p&gt;

&lt;p&gt;Looking at the branch coverage of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TestHasThreeDigits&lt;/code&gt;, we can see that it has a 50% branch coverage, which is inadequate. Well, here’s an easy way to improve that.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TestHasThreeDigits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;unittest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TestCase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;test_has_three_digits_true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;true_output_value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;has_three_digits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;234&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;test_has_three_digits_false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;false_output_value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;has_three_digits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;See, now the test suite has 100% branch coverage! However, not that it has no assertions at all. So, despite having 100% line and branch coverage, this test suite is completely useless! (This is a form of &lt;a href=&quot;https://jasonrudolph.com/blog/2008/06/17/testing-anti-patterns-incidental-coverage/&quot;&gt;incidental coverage anti-pattern&lt;/a&gt;.)&lt;/p&gt;

&lt;p&gt;Here is a more nuanced example:&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;HasThreeDigits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;counter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
        
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;counter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    
&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TestHasThreeDigits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;unittest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TestCase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;test_has_three_digits_234&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;output_value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;has_three_digits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;234&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assertTrue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;output_value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;test_has_three_digits_23&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;output_value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;has_three_digits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assertFalse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;output_value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The code coverage is 100%, branch coverage is 100%. But &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;self.counter&lt;/code&gt; is never verified!&lt;/p&gt;
&lt;h2 id=&quot;wait-theres-more&quot;&gt;Wait, there’s more!&lt;/h2&gt;
&lt;p&gt;Coverage metrics only consider the code the are under your project, and ignore all external libraries. However, your code is correct only if you are satisfying the preconditions of your external library calls, and test coverage metrics do not capture any of that. Here is an illustration with an contrived example.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;external.lib&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;convert_to_num&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;has_three_digits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;convert_to_num&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above code is expected return True if &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;value&lt;/code&gt; is and integer with 3 digits. Here is test suite.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TestHasThreeDigits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;unittest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TestCase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;test_has_three_digits_234&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;output_value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;has_three_digits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'234'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assertTrue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;output_value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;test_has_three_digits_23&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;output_value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;has_three_digits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'23'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assertFalse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;output_value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;test_has_three_digits_minus_23&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;output_value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;has_three_digits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'-23'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assertFalse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;output_value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;test_has_three_digits_minus_234&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;output_value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;has_three_digits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'-234'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assertTrue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;output_value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;test_has_three_digits_ten_times_ten&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;output_value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;has_three_digits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'10*10'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assertTrue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;output_value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The test suite looks reasonable. You line and branch coverage is a 100%, and so nothing in the metrics suggestg anything is amiss. Except that we have said nothing about how &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;convert_to_num&lt;/code&gt; is implemented. It is easy to imagine some preconditions for the input to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;convert_to_num&lt;/code&gt;; for instance, it throws a ValueError exception if you pass in an input of the form &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;3/0&lt;/code&gt;. Now, you can see how the test suite is not adequate! (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;has_three_digits('10/0')&lt;/code&gt; will throw an exception). But your test coverage metrics will never be able to help here.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Beware of using patch.object to test your Python code</title>
   <link href="//srikanth.sastry.name/beware-of-using-patch-object-to-test-your-python-code/"/>
   <updated>2022-02-28T00:00:00+00:00</updated>
   <id>//srikanth.sastry.name/beware-of-using-patch-object-to-test-your-python-code</id>
   <content type="html">&lt;p&gt;&lt;img src=&quot;/images/software-testing.jpg&quot; alt=&quot;Software Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Liskov_substitution_principle&quot;&gt;Liskov substitution principle&lt;/a&gt; states that a class and its subclass must be interchangeable without breaking the program. Unfortunately, Python’s &lt;a href=&quot;https://docs.python.org/3/library/unittest.mock.html#patch-object&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;patch.object&lt;/code&gt;&lt;/a&gt; breaks this principle in a big way. In fact, &lt;strong&gt;this can make your tests untrustworthy and become a maintenance headache with failures every time you extended your base class&lt;/strong&gt;. Here is a contrived, but concrete example.&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;Say, you decide to build a special class called &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ImmutableList&lt;/code&gt; with a factory that looks as follows:&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;typing&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Sequence&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ImmutableList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;staticmethod&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;create_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;ImmutableList&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ImmutableList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_inner_list&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;tuple&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;get_inner_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Sequence&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt;
    &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_inner_list&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Next, your system under test is a class &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SUT&lt;/code&gt; that uses an instance of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ImmutableList&lt;/code&gt; as an injected dependency.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SUT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wrapper&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ImmutableList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wrapper&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wrapper&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;get_wrapper_length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wrapper&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_inner_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now, when testing &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SUT&lt;/code&gt;, say, we patch the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;get_inner_list()&lt;/code&gt; method with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;patch.object&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;unittest&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mock&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;patch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ImmutableList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'get_inner_list'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;return_value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mock_method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;sut&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SUT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ImmutableList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([]))&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sut&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_wrapper_length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;FAILURE&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;SUCCESS&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;When you run this test, it does print &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SUCCESS&lt;/code&gt;, and therefore, works as intended.&lt;/p&gt;

&lt;p&gt;Now, let’s say that we found a special case of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ImmutableList&lt;/code&gt; that corresponds to a zero length list, and we implement it as follows:&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ZeroLengthImmutableList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ImmutableList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([])&lt;/span&gt;
  
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;get_inner_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Sequence&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;tuple&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Next, we modify the factory method to return this &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ZeroLengthImmutableList&lt;/code&gt;, when the input is an empty list, as follows:&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;o&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;staticmethod&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;create_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;ImmutableList&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ZeroLengthImmutableList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ImmutableList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Thus, the two classes look as follows:&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ImmutableList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;staticmethod&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;create_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;ImmutableList&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ZeroLengthImmutableList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ImmutableList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_inner_list&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;input&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;get_inner_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Sequence&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt;
    &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_inner_list&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ZeroLengthImmutableList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ImmutableList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([])&lt;/span&gt;
  
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;get_inner_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Sequence&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;tuple&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now, let’s go back to our test, which is still&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;unittest&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mock&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;patch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ImmutableList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'get_inner_list'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;return_value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mock_method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;sut&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SUT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ImmutableList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([]))&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sut&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_wrapper_length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;FAILURE&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;SUCCESS&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Since &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sut.wrapper&lt;/code&gt; is still an &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ImmutableList&lt;/code&gt;, by the Liskov Substitution Principle, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mock.patch.object(ImmutableList, 'get_inner_list', return_value=[1, 2, 3])&lt;/code&gt; should still return &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;[1, 2, 3]&lt;/code&gt; when &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sut.get_wrapper_length()&lt;/code&gt;. However, this does not happen! The above test fails with&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;AssertionError                            Traceback (most recent call last)

&amp;lt;ipython-input-21-1c1b12b89ff3&amp;gt; in &amp;lt;module&amp;gt;()
     23 with mock.patch.object(ImmutableList, 'get_inner_list', return_value=[1, 2, 3]) as mock_method:
     24   sut = SUT(ImmutableList.create_list([]))
---&amp;gt; 25   assert sut.get_wrapper_length() == 3, &quot;FAILURE&quot;
     26   print(&quot;SUCCESS&quot;)

AssertionError: FAILURE
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This forces you to change the tests every time you refactor &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ImmutableList.create_list&lt;/code&gt; to return a ‘better’ implementation of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ImmutableList&lt;/code&gt;!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>When I first realized my privilege</title>
   <link href="//srikanth.sastry.name/when-i-first-realized-my-privilege/"/>
   <updated>2022-02-26T00:00:00+00:00</updated>
   <id>//srikanth.sastry.name/when-i-first-realized-my-privilege</id>
   <content type="html">&lt;p&gt;&lt;img src=&quot;/images/handcuffed.jpg&quot; alt=&quot;Oppressed&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Ironically, a sure marker of privilege is not realizing your own privilege. I grew up being told that I am a Brahmin, which is the highest caste, and that it makes us superior and better than others. Unsurprisingly, I was taught that we were, in fact, an oppressed minority. The government reservations for the so-called Scheduled Castes and Scheduled Tribes were often cited as evidence of such oppression. So, naturally, I grew up knowing nothing about the privilege that I enjoyed.&lt;/p&gt;

&lt;p&gt;For the first 23 years of my life, I was convinced that everything that came my way was hard earned, and it was despite the oppression against our community. At 23, I was working as a young software engineer in Bangalore. I needed the house deep cleaned, and a contractor said that he would send a couple of people over who would take care of it for us. I was about to get my first glimpse into the privilege that I had enjoyed all my life.&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;The two people that the contractor send over were completely clueless. They had no idea how to go about the job. They showed up empty handed and asked us what they should be using to clean the house. They required constant supervision and direction, and it consumed most of our time, and defeated the purpose of hiring them in the first place. By the end of the day, less than half the work was done, I was completely frustrated.&lt;/p&gt;

&lt;p&gt;It is important to mention that these two folks’ work ethic was never in doubt. They worked as hard and diligently as you could be expected. They were from a village some hours away, quite illiterate, and desperate for work. They hadn’t seen houses in cities before, and so no idea what is involved in the upkeep of a proper house. They probably lived in shanty small houses, and this was all alien to them.&lt;/p&gt;

&lt;p&gt;Coming back to the main story, it was close to evening, and very little of the work was done. At this point, the they said that they had to leave because if they didn’t leave right away, then they’d miss the last bus to their village and they’d have to walk home. So if we could pay them, then they will be on their way (and settle the account with the contractor later).&lt;/p&gt;

&lt;p&gt;I was pretty upset at this point, and I told them that they hadn’t completed even half the work, and so I’ll pay them only half. They just looked at each other and simply nodded at me. They had this look of someone who has always been helpless and has resigned themselves to this fate for so long that they couldn’t imagine life any other way. I saw all of that, and but my frustration overrode that, and I gave them just half the agreed upon amount and sent them their way.&lt;/p&gt;

&lt;p&gt;As soon as they closed the gate behind them, I felt incredibly sorry for them. It wasn’t their fault that they were not skilled. It wasn’t their fault that the contractor sent them our way. And us paying them just half the amount simply means that the contractor will take a larger cut of the money. Despite all of that, all they did was meekly nod. Next, I felt shame and guilt. Me paying them the entire amount would not make a slightest difference to my finances. I spend more going out with friends on a weekend evening.&lt;/p&gt;

&lt;p&gt;All of this took about a minute to register, and I immediately called them back and gave them the full amount that was promised to them.&lt;/p&gt;

&lt;p&gt;That look of helplessness and resignation stayed with me a long time. But I simply couldn’t understand it in it’s larger context. For a while, I saw this as a fault in their character that will get them swindled, and almost felt good about me not being one of the many who cheated them out of what they earned. Nonetheless, this event stayed with me, as I learned more, I kept recasting that experience with new sociological lenses. It took me years to recognize it as a natural consequence of multi-generational societal oppression, and with that recognize my own privilege.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Reuse Code, Not Objects</title>
   <link href="//srikanth.sastry.name/reuse-code-not-objects/"/>
   <updated>2021-07-17T02:01:41+00:00</updated>
   <id>//srikanth.sastry.name/reuse-code-not-objects</id>
   <content type="html">&lt;!-- wp:image {&quot;id&quot;:666} --&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://srikanth.sastry.name/wp-content/uploads/2021/07/pexels-photo-5218009-edited.jpeg&quot; alt=&quot;&quot; class=&quot;wp-image-666&quot; /&gt;&lt;/figure&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;We all know of the importance of &lt;a href=&quot;https://en.wikipedia.org/wiki/Code_reuse&quot;&gt;code reuse&lt;/a&gt; and &lt;a href=&quot;https://en.wikipedia.org/wiki/Don%27t_repeat_yourself&quot;&gt;DRY&lt;/a&gt; code. It is important to remember that this applies to code, and &lt;em&gt;not&lt;/em&gt; to objects!&lt;br /&gt;A common anti-pattern I see in stateful classes is something along the following lines:&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:code --&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;class SomeStatefulClass {
  private ResponseType responseType;
  private final ErrMessages errMessages;
  
  public SomeStatefulClass() {
    this.ResponseType = null;
    this.errMessages = new ErrMessages();
  }
  
  public void init() {
    errMessages.clear();
  }
  
  public Response process(Request request) {
    try {
      // Process the request.
      // Update stats.
      // Update otherState.
      Response response = computeResponse();
      responseType = computeResponseType();
      return response;
    } catch (Exception e) {
      this.errMessages.append(e);
    }
    return null;
  }
  
  public LogMessages getErrMessages() {
    return this.errMessages;
  }
  
  public ResponseType getResponseType() {
    return responseType;
  }
}&lt;/code&gt;&lt;/pre&gt;
&lt;!-- /wp:code --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;This design pattern is a major code smell. Ironically, such classes are prone to be &lt;em&gt;misused through reuse&lt;/em&gt;. A common example of this is reusing the object within a loop:&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:code --&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;public void process(List&amp;lt;Request&amp;gt; requests) {
  final SomeStatefulClass statefulObject
      = new SomeStatefulClass();
  Response response;
  for (Request request: requests) {
    statefulObject.init();
    response = statefulObject.process(request);
    appendResponse(response, statefulObject.getResponseType());
    
  }
}&lt;/code&gt;&lt;/pre&gt;
&lt;!-- /wp:code --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;The issue here is subtle, but dangerous. Consider what happens if one of the requests in the list of requests passed to &lt;code&gt;process()&lt;/code&gt; causes &lt;code&gt;statefulObject&lt;/code&gt;to throw an exception inside &lt;code&gt;computeResponse()&lt;/code&gt;. Dutifully, this exception is caught by &lt;code&gt;process()&lt;/code&gt; and it returns &lt;code&gt;null&lt;/code&gt;. However, note that the value of &lt;code&gt;responseType&lt;/code&gt; in &lt;code&gt;statefulObject&lt;/code&gt; was never modified by processing of this request, and therefore, it still hold the &lt;code&gt;ResponseType&lt;/code&gt; of the previous request! Therefore, the line &lt;code&gt;appendResponse(response, statefulObject.getResponseType());&lt;/code&gt; is now passing in a null response and the response type of the previous request!&lt;br /&gt;These types of bugs are subtle and a pain to track down.&lt;br /&gt;And this happened because we chose to reuse the &lt;code&gt;statefulObject&lt;/code&gt;. If we were to use a new instance each time, this would not really be an issue.&lt;br /&gt;Moral: If feasible, do not reuse objects; create new instances and throw them away when done!&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;
</content>
 </entry>
 
 <entry>
   <title>Code reuse can prevent bugs</title>
   <link href="//srikanth.sastry.name/code-reuse-can-prevent-bugs/"/>
   <updated>2020-12-20T18:43:09+00:00</updated>
   <id>//srikanth.sastry.name/code-reuse-can-prevent-bugs</id>
   <content type="html">&lt;!-- wp:paragraph --&gt;
&lt;p&gt;I am as surprised as you are at the title. The statement does seem like &quot;Duh!&quot;, but much to my embarrassment, I have seen enough code in many code bases to need to reiterate this.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;The latest example was the following bug that I spotted. First some background. The caller to this function can choose any subset of a given set of 'modes' or 'features'. The caller represents this via a bit-mask. So 1 represents feature 1, 2 represents feature 2, 4 represents feature 3, 8 represents feature 4, and so on. So, if the caller requests with bit-mask 3, then it represents features 1 and 2, and bit-mask 10 represents features 2 and 4.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;The following piece of code is support to filter out requests depending on the requested set of 'modes/'features'.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:code --&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;if ((bitMask &amp;amp; ModeEnum.FEATURE_FOO.getValue()) == 0) {
  // FEATURE_FOO has already taken care off the by some other module. So do nothing here.
  return null;
}

/* Some more code here */

if ((bitMask &amp;amp; ModeEnum.FEATURE_BAR.getValue()) == 0) {
  // For now, we process the request only if caller explicitly specified FEATURE_BAR.
  return null;
}
/* more code to process the request with FEATURE_BAR. */&lt;/code&gt;&lt;/pre&gt;
&lt;!-- /wp:code --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;The code above has a bug because the comment inside the first if-check does not match the if-check's logic. The intent was to skip processing the request if FEATURE_FOO is enabled. Instead, it does the exact opposite. &lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;The naive way to fix it would be to replace &lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:code --&gt;
&lt;pre id=&quot;block-9dae83e5-31d7-43ad-952e-2674f85d9963&quot; class=&quot;wp-block-code&quot;&gt;&lt;code&gt;if ((bitMask &amp;amp; ModeEnum.FEATURE_FOO.getValue()) == 0) {&lt;/code&gt;&lt;/pre&gt;
&lt;!-- /wp:code --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;with&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:code --&gt;
&lt;pre id=&quot;block-9dae83e5-31d7-43ad-952e-2674f85d9963&quot; class=&quot;wp-block-code&quot;&gt;&lt;code&gt;if ((bitMask &amp;amp; ModeEnum.FEATURE_FOO.getValue()) != 0) {&lt;/code&gt;&lt;/pre&gt;
&lt;!-- /wp:code --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;However, this misses the more important point of why this bug occurred in the first place. The simple answer to that question is that this bug occurred because the author ignored the &lt;a href=&quot;https://en.wikipedia.org/wiki/Code_reuse&quot;&gt;principle of code reuse&lt;/a&gt;. By putting that principle into practice, a cleaner way to write this code (and therefore fix this bug and prevent similar bugs in the future) is as follows.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;We first encapsulate the logic to detecting various modes via this function&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:code --&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;boolean hasRequestedFeature(int bitMask, ModeEnum feature) {
  return (bitMask &amp;amp; feature.getValue()) != 1;
}&lt;/code&gt;&lt;/pre&gt;
&lt;!-- /wp:code --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;With that function in place, the new code looks as follows&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:code --&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;if (!hasRequestedFeature(bitMask, ModeEnum.FEATURE_FOO)) {
  // FEATURE_FOO has already taken care off the by some other module. So do nothing here.
  return null;
}

/* Some more code here */

if (hasRequestedFeature(bitMask, ModeEnum.FEATURE_BAR)) {
  // For now, we process the request only if caller explicitly specified FEATURE_BAR.
  return null;
}
/* more code to process the request with FEATURE_BAR. */&lt;/code&gt;&lt;/pre&gt;
&lt;!-- /wp:code --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;This make the code more readable, and as long as we reuse the &lt;code&gt;hasRequestedFeature()&lt;/code&gt; function, such bitwise operation fragility will not reoccur in the code.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Is this obvious? I think so. Was it necessary to belabor the point? Empirical evidence seems to scream &quot;YES!&quot;.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;
</content>
 </entry>
 
 <entry>
   <title>Tale of two departures</title>
   <link href="//srikanth.sastry.name/tale-of-two-departures/"/>
   <updated>2020-03-02T15:00:00+00:00</updated>
   <id>//srikanth.sastry.name/tale-of-two-departures</id>
   <content type="html">&lt;!-- wp:image {&quot;align&quot;:&quot;center&quot;,&quot;id&quot;:580,&quot;sizeSlug&quot;:&quot;large&quot;} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;aligncenter size-large&quot;&gt;&lt;img src=&quot;https://srikanth.sastry.name/wp-content/uploads/2020/02/img_0143-1024x683.jpg&quot; alt=&quot;&quot; class=&quot;wp-image-580&quot; /&gt;&lt;figcaption&gt;Image by &lt;a href=&quot;https://pixabay.com/users/MIH83-464187/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=1478118&quot;&gt;Maret Hosemann&lt;/a&gt; from &lt;a href=&quot;https://pixabay.com/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=1478118&quot;&gt;Pixabay&lt;/a&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Saying goodbye to a workplace where you have spent a considerable amount of time is never easy. But it can be made into a positive experience by the organization, or be made miserable. Netflix is famous for celebrating when an employee leaves by thanking them and wishing them well, and in contrast, Hubspot is know for firing something and calling it a ‘graduation’.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;I have two stories to share on how my departure from two different organizations played out. Both both these stories, there were only good intentions all around, but yet, the executions of the departure were very different. The juxtaposition is instructive on its own.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading --&gt;
&lt;h2&gt;&lt;strong&gt;First&lt;/strong&gt; story: I said goodbye, and they said Au &lt;strong&gt;Revoir&lt;/strong&gt;&lt;/h2&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:image {&quot;id&quot;:581,&quot;sizeSlug&quot;:&quot;large&quot;} --&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://srikanth.sastry.name/wp-content/uploads/2020/02/img_0144-1024x553.jpg&quot; alt=&quot;&quot; class=&quot;wp-image-581&quot; /&gt;&lt;figcaption&gt;Image by &lt;a href=&quot;https://pixabay.com/users/pixel2013-2364555/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=2934257&quot;&gt;S. Hermann &amp;amp; F. Richter&lt;/a&gt; from &lt;a href=&quot;https://pixabay.com/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=2934257&quot;&gt;Pixabay&lt;/a&gt;&lt;/figcaption&gt;&lt;/figure&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;In the first story, I had a meeting with my manager and told him that I accepted an offer with another company, and so was leaving. His immediate response was to check with me if there was anything he could do that will make me change my mind (he also prefaced that by saying that he thinks that the answer is ‘no’). After I said that my mind was made up, he thanked me for everything I had done so far, and said that he will set up meetings with various folks to help me transition my responsibilities. &lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;With my consent, he immediately and discretely told members of my team, set up transition discussions, and then followed that up with an org wide announcement. Then, the entire team got together for a goodbye lunch, with everyone including the manager wishing me well. Finally, before I left, he said that he wishes me the best, but if things don’t work out with the new role, then I am always welcome back.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading --&gt;
&lt;h2&gt;Second Story: I said goodbye, and they said uh.. wait, what?&lt;/h2&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:image {&quot;id&quot;:582,&quot;sizeSlug&quot;:&quot;large&quot;} --&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://srikanth.sastry.name/wp-content/uploads/2020/02/img_0145-1024x645.jpg&quot; alt=&quot;&quot; class=&quot;wp-image-582&quot; /&gt;&lt;figcaption&gt;Image by &lt;a href=&quot;https://pixabay.com/users/Alexas_Fotos-686414/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=3109992&quot;&gt;Alexas_Fotos&lt;/a&gt; from &lt;a href=&quot;https://pixabay.com/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=3109992&quot;&gt;Pixabay&lt;/a&gt;&lt;/figcaption&gt;&lt;/figure&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;In the second story, I had a meeting with my manager and told him that I did not see my skills fitting the role, and that it doesn’t play to my strengths. So, I think serves both the org and me well to plan a transition for me to move on. He tried to convince me otherwise, and this went on for some time. I indulged his thoughts and arguments and made a good faith effort to pursue the avenues he suggested, but it only served to strengthen my initial proposition. &lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;After I made my final decision, he asked to delay my decision until I had a new role. After I found a new role, he asked me to spend a month transitioning my responsibilities to someone else. But for over a week, I did not see any movement in the transition plan. Meanwhile, I am furiously preparing everything for the transition. Until about a week before my last day, there is no news of my departure, and no person or people to transition to. &lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;With just over a week left, on my request, my manager calls the team together to announce my departure, except that he had already mentioned this to each of them private well over a week ago, but didn’t really provide any guidelines to them or to me about who else had been looped in. So, no one spoke to me about it, or to each other, and kept acting like everything was business as usual. It had become an elephant in the room and made everything uncomfortable for no apparent benefit. &lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Finally, the last few days were a frantic meeting spree with my transition of responsibilities to other folks, and my brain dump spread across multiple documents that was hastily reviewed by the team as my last day at work came and went.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;My final goodbye was in an org-wide meeting where my manager thanked me for my contributions and wished me well.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;
</content>
 </entry>
 
 <entry>
   <title>Donts of processes for upward communication</title>
   <link href="//srikanth.sastry.name/donts-of-processes-for-upward-communication/"/>
   <updated>2020-02-11T15:42:53+00:00</updated>
   <id>//srikanth.sastry.name/donts-of-processes-for-upward-communication</id>
   <content type="html">&lt;!-- wp:image {&quot;align&quot;:&quot;center&quot;,&quot;id&quot;:566,&quot;sizeSlug&quot;:&quot;large&quot;} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;aligncenter size-large&quot;&gt;&lt;img src=&quot;https://srikanth.sastry.name/wp-content/uploads/2020/02/pexels-photo-3532005-1024x682.jpg&quot; alt=&quot;&quot; class=&quot;wp-image-566&quot; /&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Upward communication critical to organizational well-being and effectiveness. It is also notoriously difficult to get right due to the inherent power/authority differential involved in the hierarchy of any organization. Almost every place that I have seen upward communication done right focuses on mitigating this differential. Unfortunately, many organizations seem to be completely oblivious of how the existing power differential within a hierarchy can jeopardize upward communication. &lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Does your organization share this blind spot? For obvious reasons, it doesn’t help to ask the organization leaders about a blind spot. However, there are symptoms you can look for. Here are some examples, that I hope will help you see whether and why upward communication is failing in your organization.  Note that all my experiences are from the software industry, and so I am focused only on software engineering organizations. So please keep that in mind as you read on.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Here are four IMHO important symptoms to look for.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:list --&gt;
&lt;ul&gt;&lt;li&gt;Focusing on the format instead of a well thought out framework&lt;/li&gt;&lt;li&gt;Asymmetric commitment from the leadership on communciation&lt;/li&gt;&lt;li&gt;No reacting/responding to the contents of the communication&lt;/li&gt;&lt;li&gt;Not getting engineers’ buy-in&lt;/li&gt;&lt;/ul&gt;
&lt;!-- /wp:list --&gt;

&lt;!-- wp:heading --&gt;
&lt;h2&gt;Format instead of framework&lt;/h2&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:image {&quot;align&quot;:&quot;center&quot;,&quot;id&quot;:568,&quot;sizeSlug&quot;:&quot;large&quot;} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;aligncenter size-large&quot;&gt;&lt;img src=&quot;https://srikanth.sastry.name/wp-content/uploads/2020/02/img_0141.jpg&quot; alt=&quot;&quot; class=&quot;wp-image-568&quot; /&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Any sort of ongoing upward communication tends to be only marginally useful if the organization does not have a framework within which the receive and process the communication. For instance, an organization may care about cross team collaboration, and could get information about this from employees through upward communication channels. However, without a framework for the employees to provide that feedback, the organization may not be able to glean much. &lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Unfortunately, organizations tend to conflate framework with format/template. When this happens you tend to see rigid templates or formats within which upward communication takes place leaving little space for nuance, reflection, and awareness to unforeseen issues. An example should make this clearer. &lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;I worked in an organization which asked employees to fill out a weekly report. This report had mandatory questions such as “On a scale of 1 to 10, how happy were you working with other teams?” On the face of it, it might seem reasonable. But consider the following scenario.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;An engineer who has had a bad week at work and wants to communicate that upward. She fills out her weekly report outlining her frustrations and why she hasn’t made as much progress and what’s blocking her. She proceeds to submit her feedback, but the tool rejects her submission because she didn’t answer the mandatory question. Effectively, the organization is saying “unless you give the information we seek, in the form that we prescribed, we are not interested in listening to you”.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;When scenarios like these repeat themselves often enough, both the organization and the employees end up with blinders on what can and should be communicated. And that creates blind spots in the organization. &lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading --&gt;
&lt;h2&gt;&lt;strong&gt;Asymmetric&lt;/strong&gt; &lt;strong&gt;commitment&lt;/strong&gt; for &lt;strong&gt;communication&lt;/strong&gt; &lt;/h2&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:image {&quot;align&quot;:&quot;center&quot;,&quot;id&quot;:569,&quot;sizeSlug&quot;:&quot;large&quot;} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;aligncenter size-large&quot;&gt;&lt;img src=&quot;https://srikanth.sastry.name/wp-content/uploads/2020/02/img_0142.jpg&quot; alt=&quot;&quot; class=&quot;wp-image-569&quot; /&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;When an organization sets up expectations for upward communication, it is automatically asking its employees to invest time and effort into it. If the organization does make a corresponding commitment on its end, it becomes demotivating for the employees, and any upward communication becomes either perfunctory or severely biased. &lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;I recall a case where senior leadership wanted regular progress updates from all teams, for slightly different audiences and use cases, the content was required to be slightly different. The 'solution' to this issue was that team leads fill out almost identical, but slightly different, contents in an online form, a doc, a presentation, and a spreadsheet so it is all available for senior leadership when they want to review it. This is a really good example of asymmetric commitment. The effort here is expected entirely from the employees, and little from the leadership. &lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;In contrast, I worked in organizations where management and leadership worked on upward communication along multiple avenues depending on how the engineers worked, and how the engineers liked to communicate. There were weekly/monthly sync up meetings where the management and leadership took notes, which the engineers communicated in the manner that was most convenient for them (including just talking, or presentations, or code changes, or screenshots, or even demos). Apart from that, the managers were also always sitting with the teams they supported, paying attention to the chatter among engineers and engaging when they realized some important decision were being made. The mangers participated in the decision making by proving additional context as appropriate, noted the decision that the engineers took, and made it a point to follow up on its execution while making an effort to not be intrusive.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;That is an example of the leadership and management demonstrating their commitment to upward communication.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading --&gt;
&lt;h2&gt;Reaction to upward communication, or the lack thereof&lt;/h2&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:image {&quot;id&quot;:571,&quot;sizeSlug&quot;:&quot;large&quot;} --&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://srikanth.sastry.name/wp-content/uploads/2020/02/pexels-photo-1669158-1024x682.jpg&quot; alt=&quot;&quot; class=&quot;wp-image-571&quot; /&gt;&lt;/figure&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;One of the expectations following upward communication is that the leadership with react to the communication, and then follow through on their commitment to address the issues brought into focus. When this redressal and follow through is missing, the impact is palpable and the consequences can be detrimental.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;A common example where I have seen this is when the teams are expected to report progress and roadblocks, but the roadblocks are ignored by the leadership with the assumption 'the team will figure it out'. Or worse, at times, the leadership actually does not know what to do, but instead of making that a discussion, they choose to remain silent (for reasons that could constitute its own blog post). I assume I need not elaborate on the negative consequences of that behavior!&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;In cases where the leadership acts on upward communication, the impact can be dramatic and hugely positive. I recall two distinct cases in two different organizations I worked at, where the entire team had an unfavorable review of their manager. In response, the leadership immediately asked the managers to transition to a non-managerial role and re-org’d the teams so that they can have a different (and hopefully) more effective manager to support them.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading --&gt;
&lt;h2&gt;Not getting engineers’ buy-in&lt;/h2&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:image {&quot;id&quot;:572,&quot;sizeSlug&quot;:&quot;large&quot;} --&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://srikanth.sastry.name/wp-content/uploads/2020/02/pexels-photo-791765-1024x682.jpg&quot; alt=&quot;&quot; class=&quot;wp-image-572&quot; /&gt;&lt;/figure&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Any upward communication process that does not get the engineers’ buy-in is bound to have limited success. Interestingly, this precipitates more communication processes that also do not have employee buy-in, and the cycle continues.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;In one of the organizations I was at, the leadership, for reasons unknown, determined that a bespoke task tracking/project management tool be used. Very few engineers, if any, liked this tool. Yet, this was the tool of choice and decreed to be so. Not surprisingly, the tool was not well used, and so the leadership did not get the information they were looking for with respect to work done/progress made, etc. In response, the leadership created a new role that was focused on upward communication, and insisted that every team dedicate one person to perform this role. This not only took away one engineer from already resource-constrained teams, it also asked that engineer to execute a role that they weren’t really selected/skilled for. Naturally, that didn’t fare well either. There was improvement in upward communication as far as the leadership was concern, but it was not sufficient. So, the leadership decided that, harkening back to the Industrial Age, all teams should follow the exact same and synchronous development cadence and report progress on that exact cadence of the leadership. This cadence fit some teams better than others, and you can imagine the morale in the teams that ended with the short end of the stick there.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;At no point during this entire affair did the leadership actually sit down with the engineers in various teams and actually ask them how the teams like to get work done, and how leadership could work with each team to accomplish the goals of the upward communication that was being sought.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;
</content>
 </entry>
 
 <entry>
   <title>Responding to concerns as a people manager</title>
   <link href="//srikanth.sastry.name/responding-to-concerns-as-a-people-manager/"/>
   <updated>2020-01-01T01:58:18+00:00</updated>
   <id>//srikanth.sastry.name/responding-to-concerns-as-a-people-manager</id>
   <content type="html">&lt;!-- wp:paragraph --&gt;
&lt;p&gt;You are the people manager for a team, and a team member comes to you with a concern. How should you approach it? I have been in this situation multiple times, and have admittedly made some wrong turns. After some corrections and learning, here is what seems to work well for me (although YMMV). If you like lists, here is a snapshot of the path I take.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:list {&quot;ordered&quot;:true} --&gt;
&lt;ol&gt;&lt;li&gt;Listen&lt;/li&gt;&lt;li&gt;Empathize&lt;/li&gt;&lt;li&gt;Don't take notes&lt;/li&gt;&lt;li&gt;Descend into the particular&lt;/li&gt;&lt;li&gt;Check with others&lt;/li&gt;&lt;li&gt;Socialize, if the issue is common&lt;/li&gt;&lt;li&gt;DO NOT become an apologist for status quo&lt;/li&gt;&lt;/ol&gt;
&lt;!-- /wp:list --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Note that this doesn’t talk about the resolution for the issue. That is very specific to the issue at hand. What I have is more of an approach to understanding the issue in a manner that is respectful of the stakeholders. With that disclaimer, let’s unpack each of those bullet points.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:more --&gt;
&lt;!--more--&gt;
&lt;!-- /wp:more --&gt;

&lt;!-- wp:heading --&gt;
&lt;h2&gt;Listen&lt;/h2&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:image {&quot;align&quot;:&quot;left&quot;,&quot;id&quot;:510,&quot;sizeSlug&quot;:&quot;full&quot;} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;alignleft size-full&quot;&gt;&lt;img src=&quot;https://srikanth.sastry.name/wp-content/uploads/2019/12/what-kids-hear.jpg&quot; alt=&quot;&quot; class=&quot;wp-image-510&quot; /&gt;&lt;figcaption&gt;Source: https://richmondmom.com/2017/02/22/what-i-say-and-what-my-kids-hear/&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;When someone in the team you support talks about how things are not a 100%, just listen. And I mean really listen. Take what they are saying at face value, even if you suspect something else is at play. Be non judgmental. Give full attention here. This is a lot harder than it sounds! Beware of you mind trying to make connections with that you are hearing. Resist that impulse. Repeat back to them what they said, but in your own words. Ask for a confirmation if you have captured their thoughts and feelings well. Rinse and repeat until they respond affirmatively.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading --&gt;
&lt;h2&gt;Empathize&lt;/h2&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:image {&quot;id&quot;:512,&quot;sizeSlug&quot;:&quot;large&quot;} --&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://srikanth.sastry.name/wp-content/uploads/2019/12/pxfuel.com_-1024x683.jpg&quot; alt=&quot;&quot; class=&quot;wp-image-512&quot; /&gt;&lt;figcaption&gt;source: https://www.pxfuel.com/en/free-photo-qwnsc&lt;/figcaption&gt;&lt;/figure&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Now that you know what the team member is talking about, do not respond yet. Stop to empathize with them, or their situation. Even if you do not agree with them, still take the time to understand where they are coming from and why they are feeling the way they are. Talk to them to make sure you do understand where they are coming from. It is important not to come across as someone with all the answers, or worse, with condescension. It is important that the person feels validated and not diminished for sharing what they did share. Not giving them that luxury is a sure way to get them to express themselves less and hold things within themselves until it gets to a point where they decide to leave.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading --&gt;
&lt;h2&gt;Don't take notes&lt;/h2&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:image {&quot;id&quot;:514,&quot;sizeSlug&quot;:&quot;large&quot;} --&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://srikanth.sastry.name/wp-content/uploads/2019/12/Untitled-presentation.png&quot; alt=&quot;&quot; class=&quot;wp-image-514&quot; /&gt;&lt;figcaption&gt;Original Image by &lt;a href=&quot;https://pixabay.com/users/StartupStockPhotos-690514/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=593333&quot;&gt;StartupStockPhotos&lt;/a&gt; from &lt;a href=&quot;https://pixabay.com/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=593333&quot;&gt;Pixabay&lt;/a&gt;&lt;/figcaption&gt;&lt;/figure&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Really, put your pen, phone, laptop (or whatever you use to take notes) down. Taking notes during this process does harm on two fronts: (1) it impedes your listening and your ability to empathize, and (2) it can have a chilling effect on the other person's candor.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;When you start taking notes on what you are hearing, your brain stops listening because it's too focused on ensuring that what it hears is making it into the notes. This directly impacts empathy in that when you don't listen, you cannot empathize. You might think that by the other person see you take notes, they get the impression/message that you care and you want to make sure nothing is lost/forgotten. However, when it comes to matters where they want to be heard as much as they want their concern addressed, they are looking for a real conversation, and taking notes decidedly gets in the way.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Many such conversations where a team member is bringing a concern comes with an automatic expectation of some form of confidentiality and discretion; otherwise, they would have brought this up in a group and not in private. The moment you start taking notes, you are giving the impression that everything they are saying is 'on the record and in writing' so to speak. This makes the speaker guarded; they no longer feel comfortable speaking in a fluent stream of thoughts; they might feel the need to measure their words lest it be misinterpreted from the notes.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading --&gt;
&lt;h2&gt;Descend into the particular&lt;/h2&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:image {&quot;id&quot;:515,&quot;sizeSlug&quot;:&quot;large&quot;} --&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://srikanth.sastry.name/wp-content/uploads/2019/12/apple-1594742_1920-1024x378.jpg&quot; alt=&quot;&quot; class=&quot;wp-image-515&quot; /&gt;&lt;figcaption&gt;Image by &lt;a href=&quot;https://pixabay.com/users/geralt-9301/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=1594742&quot;&gt;Gerd Altmann&lt;/a&gt; from &lt;a href=&quot;https://pixabay.com/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=1594742&quot;&gt;Pixabay&lt;/a&gt;&lt;/figcaption&gt;&lt;/figure&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;After hearing the person out, remain focused on the specific issue they are bringing up. Do not try to generalize. By generalizing you risk losing important details that might be critical to addressing the issue. Also, when it comes to such issues, it helps to solve the exact problem at hand first, and then look to address the general case outside the scope of what the team member is bringing up.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;For instance, I had a team member come up to me and say that their lead engineer was micromanaging them too much. The lead would literally look over the engineer's shoulder and insist that the engineer do things exactly the way the lead wanted them to do it. To get away from the lead, the engineer started working away from their desk, but the lead ended up following them to where ever the engineer was and proceeded with the same behavior. Here the engineer is coming to me for a solution for this particular issue, and it does not help for me to start thinking about generalities such as hostile work environments, issues of gender and under-represented minorities, or workplace aggression. Instead, I chose to focus on the two individuals involved, and the current situation that needed addressing. I strongly recommend you do the same!&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading --&gt;
&lt;h2&gt;Check with others&lt;/h2&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- &lt;figure&gt;&lt;img src=&quot;https://srikanth.sastry.name/wp-content/uploads/2019/12/listen-1702648_1920-1024x682.jpg&quot; alt=&quot;&quot; data-id=&quot;517&quot; data-full-url=&quot;https://srikanth.sastry.name/wp-content/uploads/2019/12/listen-1702648_1920.jpg&quot; data-link=&quot;https://srikanth.sastry.name/?attachment_id=517&quot; class=&quot;wp-image-517&quot; /&gt;&lt;figcaption class=&quot;blocks-gallery-item__caption&quot;&gt;Image by &lt;a href=&quot;https://pixabay.com/users/jamesoladujoye-3409212/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=1702648&quot;&gt;jamesoladujoye&lt;/a&gt; from &lt;a href=&quot;https://pixabay.com/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=1702648&quot;&gt;Pixabay&lt;/a&gt;&lt;/figcaption&gt;&lt;/figure&gt;
&lt;figure&gt;&lt;img src=&quot;https://srikanth.sastry.name/wp-content/uploads/2019/12/people-2557396_1920-1024x683.jpg&quot; alt=&quot;&quot; data-id=&quot;518&quot; data-full-url=&quot;https://srikanth.sastry.name/wp-content/uploads/2019/12/people-2557396_1920.jpg&quot; data-link=&quot;https://srikanth.sastry.name/?attachment_id=518&quot; class=&quot;wp-image-518&quot; /&gt;&lt;figcaption class=&quot;blocks-gallery-item__caption&quot;&gt;Image by &lt;a href=&quot;https://pixabay.com/users/StockSnap-894430/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=2557396&quot;&gt;StockSnap&lt;/a&gt; from &lt;a href=&quot;https://pixabay.com/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=2557396&quot;&gt;Pixabay&lt;/a&gt;&lt;/figcaption&gt;&lt;/figure&gt; --&gt;
&lt;figure&gt;&lt;img src=&quot;https://srikanth.sastry.name/wp-content/uploads/2019/12/workplace-1245776_1920-1024x683.jpg&quot; alt=&quot;&quot; data-id=&quot;519&quot; data-full-url=&quot;https://srikanth.sastry.name/wp-content/uploads/2019/12/workplace-1245776_1920.jpg&quot; data-link=&quot;https://srikanth.sastry.name/?attachment_id=519&quot; class=&quot;wp-image-519&quot; /&gt;&lt;figcaption class=&quot;blocks-gallery-item__caption&quot;&gt;Image by &lt;a href=&quot;https://pixabay.com/photos/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=1245776&quot;&gt;Free-Photos&lt;/a&gt; from &lt;a href=&quot;https://pixabay.com/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=1245776&quot;&gt;Pixabay&lt;/a&gt;&lt;/figcaption&gt;&lt;/figure&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;So, you listened, empathized, kept your focus on the issue at hand. Next, we start trying to resolve it no? No! Don’t try to solve the issue yet. Check with others to see the issue is more widespread than the single individual. &lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;There are multiple ways to do this, and it really depends on the issue at hand. You can bring it up with others in various contexts and situations, but be sure to respect the original team member’s privacy and discretion. And do this urgently. Letting too much time go by sends the wrong signal to the person who brought up the issue in the first place.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;By checking with others you get an important signal. Is the issue singular int hat it is just this individual facing it, or is it an issue that multiple people are facing it, but one only of them brought it to you attention. This signal has a strong bearing on which way to proceed next.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading --&gt;
&lt;h2&gt;Socialize, if the issue is common&lt;/h2&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:image {&quot;id&quot;:522,&quot;sizeSlug&quot;:&quot;large&quot;} --&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://srikanth.sastry.name/wp-content/uploads/2019/12/F6A7AB0B-9B1F-4081-8F7A-5C1E36C3123D-1024x683.jpeg&quot; alt=&quot;&quot; class=&quot;wp-image-522&quot; /&gt;&lt;/figure&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;If you find that the issue raised actually affects more than one individual, it is important to socialize it. It conveys that the organization is willing to engage in difficult conversation for employees' benefit, and it is important that everyone sees that. Of course, you have to mean it, and actually follow up with actions that address the issue.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading --&gt;
&lt;h2&gt;DO NOT become an apologist &lt;/h2&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:image {&quot;id&quot;:528,&quot;sizeSlug&quot;:&quot;large&quot;} --&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://srikanth.sastry.name/wp-content/uploads/2019/12/77DCDE52-6137-447C-92B4-CB09E82F11C0-1024x678.jpeg&quot; alt=&quot;&quot; class=&quot;wp-image-528&quot; /&gt;&lt;/figure&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;This is a strong temptation. Given what you know about how your organization and your leadership works, you might want to explain how the issue arose due to misunderstandings, or how the person who brought up the issue is misinterpreting things, or how things really are working the way things should and all that this person needs is a little faith and patience, etc. The argument doesn’t matter. The mistake is to make any such argument at all. &lt;br /&gt;By becoming an apologist for the status quo, you are effectively victim-blaming. You are telling the person who brought up the issue that it is somehow their fault that this unpleasant situation has come about. You can only imagine the ramifications of that insinuation. So, just don’t try to justify any part of what happened. &lt;br /&gt;Once you have these pieces in place, whatever resolution you come up with likely to be better received, and therefore, result in a better outcome. &lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;
</content>
 </entry>
 
 <entry>
   <title>Git may not be the best for SaaS companies</title>
   <link href="//srikanth.sastry.name/git-may-not-be-the-best-for-saas-companies/"/>
   <updated>2019-12-29T21:30:07+00:00</updated>
   <id>//srikanth.sastry.name/git-may-not-be-the-best-for-saas-companies</id>
   <content type="html">&lt;!-- wp:image {&quot;id&quot;:492,&quot;sizeSlug&quot;:&quot;large&quot;} --&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://srikanth.sastry.name/wp-content/uploads/2019/12/2C08C1F4-1EF1-44F7-90FA-DB1030628817.jpeg&quot; alt=&quot;&quot; class=&quot;wp-image-492&quot; /&gt;&lt;/figure&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Yes, I realize that this is going to be pretty controversial :) Let’s dive in, shall we?&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;In the past half decade or so, Git has sky rocketed in popularity and is becoming the defacto choice for version control. While I understand its popularity, I have found it to be a poor fit for one specific, but popular, environment: SaaS development in a medium to large size enterprise.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Let’s take a quick look at what developing software in a SaaS enterprise is like. For the most part, it involves a significant number of developers concurrently committing code to a single master branch with frequent releases to prod and no long lived branches or versions. In a services environment, it also includes coordinated deployment of multiple services that have complementary server and client API spec.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;While Git has been used in such environments with varying degrees of success, I have seen teams really trying to work around Git rather than Git just work for them. I have seen Git get in the way when teams get large, when teams get siloed into their own branches, when teams starts working with junior developers, and when having to develop across multiple services. While there are mechanisms in Git workflows and tools to mitigate this, it only adds additional complexity to developing software instead of taking it away.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:more --&gt;
&lt;!--more--&gt;
&lt;!-- /wp:more --&gt;

&lt;!-- wp:heading --&gt;
&lt;h2&gt;Scaling Git with team size&lt;/h2&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:image {&quot;align&quot;:&quot;center&quot;,&quot;id&quot;:498,&quot;sizeSlug&quot;:&quot;medium&quot;} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;aligncenter size-medium&quot;&gt;&lt;img src=&quot;https://srikanth.sastry.name/wp-content/uploads/2019/12/WjxpQc4-450x395.jpg&quot; alt=&quot;&quot; class=&quot;wp-image-498&quot; /&gt;&lt;figcaption&gt;Git branches for large teams&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Git serializes all commits. So it does not scale well for large orgs natively. The common way to get around this is with more branching. Each team and developer ends up creating dependent branches from master, and either does a best effort merge into master, or designates one engineer to deal with the mess of merging multiple feature branches into master. Note that all this overhead make sense if you are having named releases and have to maintain multiple versions of the software. But in the SaaS world, you are continuously releasing to prod. There is not need to keep v2.1 around that is 8 weeks old! So all this overhead becomes an artifact of using Git.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Instead, consider Mercurial or Perforce where you can have concurrent commits as long as the commits don’t touch the same files or modules. Here is it much easier to support concurrent updates to master across different engineers who are not working on the same set of files. Granted, this can potentially break build on master despite each of the individual commits not breaking the build, but with a good CI set up, it should be quick to catch and easy to fix. And as a long as the master is in good health, you cut another release and move on.&lt;br /&gt;The use of branches in Git brings me to the next issue that I have seen with Git in SaaS software development environments.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading --&gt;
&lt;h2&gt;Git encourages branching despite conceptually not needing it&lt;/h2&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:image {&quot;align&quot;:&quot;center&quot;,&quot;id&quot;:496,&quot;sizeSlug&quot;:&quot;medium&quot;} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;aligncenter size-medium&quot;&gt;&lt;img src=&quot;https://srikanth.sastry.name/wp-content/uploads/2019/12/4994396370_c118bbce78_o-450x318.jpg&quot; alt=&quot;&quot; class=&quot;wp-image-496&quot; /&gt;&lt;figcaption&gt;Source:https://flic.kr/p/8BkA3f&lt;br /&gt;License: https://creativecommons.org/licenses/by-nc-sa/2.0/&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Anyone who has used Git has heard &quot;never commit directly to master&quot;. The common pattern is to create a feature branch for development. Let's consider this for a minute. In a SaaS deployment with continuous release, you want every diff to go into master asap, and have it deployed so that you can iterate faster. With Git, you end up doing this with creating a new branch, committing changes to it, getting it reviewed, and then (if you are smart) squash merging it to master. Now, if a team is developing a feature together, the pattern becomes that of creating a feature branch that everyone commits to, and after the feature is complete, you merge into master. Conceptually, you really just want to &quot;commit directly to master&quot;, but in Git bad things can happen with less than well-seasoned developers if you allow it. So you create branches. Effectively, Git is forcing you to create branches.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;This pattern leads to two problems: (1) Large features do not hit prod iteratively in small merges; instead they hit in one large merge to master. This has its own issues with stability and bug discovery earlier during the SDLC. (2) Unless an org is extremely vigilant against branching, you are likely to see long running ‘feature branches’ that compete with the main branch for attention. In practice, this means all fixes end up needing porting across multiple branches and the longer this goes on, the more feature branches diverge from master, which makes merging that much more unpleasant, and so it tends to get postponed making problem worse. Are there workarounds to prevent this from happening? Sure! You can write any sort of framework and tooling around Git. Have I see it often enough to think it’s standard? Not even close!&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Really, all you need is to be able to release from master, and if there is a bug, just fix it in master, and keep adding features to master. There is no need for anything more sophisticated.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;The above issue with branches is actually the symptom of a bigger attribute of Git: complexity.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading --&gt;
&lt;h2&gt;Git is complicated; a little too complicated.&lt;/h2&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:image {&quot;align&quot;:&quot;center&quot;,&quot;id&quot;:497,&quot;sizeSlug&quot;:&quot;large&quot;} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;aligncenter size-large&quot;&gt;&lt;img src=&quot;https://srikanth.sastry.name/wp-content/uploads/2019/12/push-rejected-rebaseor-merge-38-git-push-force-git-commit-amend-git-25695648.png&quot; alt=&quot;&quot; class=&quot;wp-image-497&quot; /&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Git is complicated, and there is no way around it. Git (much like C++) makes it way too easy to shoot yourself in the foot. It gives way too much power to all developers including ones who shouldn’t have it, and don’t want it. As a junior developer, I cannot count the number of times I ended up with a detached HEAD on Git despite doing very simple operations. In general, git makes it very hard to follow simple workflows. It is way too easy to get into a bad state from which recovery is very difficult, if not impossible. But that’s the benign case. Git allows you to do all kinds of crazy stuff including rewrite history. This can be very dangerous in the hands of an inexperienced developer. A bad merge to master can put your report in a state from which rollback is near impossible.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;It is easy to dismiss this argument with “With great power comes great responsibility”, but the fact of the matter is that (1) having inexperience developers is to be expected and your VCS should be robust to their shenanigans, and (2) most developers don’t want to be an Git expert. They just want to be able to write good software without the tools getting in their way, which Git steadfastly refuses to do.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Even with experienced developers, Git can get contentious/tricky. Just ask a bunch of developers if you should merge or rebase, and watch the fireworks that ensues.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading --&gt;
&lt;h2&gt;Git encourages multiple repos, and that’s not always a good thing&lt;/h2&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:image {&quot;align&quot;:&quot;center&quot;,&quot;id&quot;:499,&quot;sizeSlug&quot;:&quot;large&quot;} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;aligncenter size-large&quot;&gt;&lt;img src=&quot;https://srikanth.sastry.name/wp-content/uploads/2019/12/32n8q6.jpg&quot; alt=&quot;&quot; class=&quot;wp-image-499&quot; /&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Git does not like large repos; the recommended way around the complexity of a large repo is to split your codebase into multiple repos. This multi-repo approach to services creates a problem in the (micro)services world. Where do you define the source of truth for a service endpoint API spec? This problem is accentuated when using frameworks such as gRPC, or Thrift. Where do you store the Thrift/protobuf message definitions that need to be accessed by both the client code and the server code? Servers and clients are often distinct services that are implemented in different repos. If you define them in the server repo, then how do you ensure that when you change the API spec on the server side, the client will pick that change up as well? (Remember that this is enterprise environment where we control both client and server). Sure you can use git submodules, but that is not without its hassels. Developers could pinky swear to keep the definitions in sync, but we all know how that often goes.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;More generally, Git has encouraged us to move away from mono-repos, and I think that’s a mistake. Note that mono-repo vs multi-repo and monolith vs micro services are completely orthogonal issues. You can have a mono-repo with all micro services implemented in that single repo. Alternatively, you can have a single service implemented across multiple repos. Git’s constraints on scaling for larger code bases has created new set of problems that need working around, but if you were to use a different solution like mercurial or even a centralized version control, then the problem wouldn’t exist in the first place.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;
</content>
 </entry>
 
 <entry>
   <title>When should you build for survival?</title>
   <link href="//srikanth.sastry.name/when-should-you-build-for-survival/"/>
   <updated>2019-08-21T18:23:48+00:00</updated>
   <id>//srikanth.sastry.name/when-should-you-build-for-survival</id>
   <content type="html">&lt;!-- wp:image {&quot;align&quot;:&quot;center&quot;,&quot;id&quot;:463} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;aligncenter&quot;&gt;&lt;img src=&quot;https://srikanth.sastry.name/wp-content/uploads/2019/08/Are-You-Succeeding-Blog-thegem-blog-default-1024x512.jpg&quot; alt=&quot;&quot; class=&quot;wp-image-463&quot; /&gt;&lt;figcaption&gt;source: http://beaconbusinessmarketing.com/success-vs-survival/&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Previously, I wrote about &lt;a href=&quot;https://srikanth.sastry.name/are-you-building-for-survival-or-excellence/&quot;&gt;building for survival vs. success&lt;/a&gt;. Briefly, when building for survival, your only goal to get the product working for the specific usecase, and in contrast, when building for success, you are building to solve a bigger class of problems within the broader context of your solution space. In this post, I will talk about when you should be build for survival, and when for success.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:more --&gt;
&lt;!--more--&gt;
&lt;!-- /wp:more --&gt;

&lt;!-- wp:heading --&gt;
&lt;h2&gt;A Straw Man&lt;/h2&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:image {&quot;align&quot;:&quot;center&quot;,&quot;id&quot;:464,&quot;width&quot;:349,&quot;height&quot;:262} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;aligncenter is-resized&quot;&gt;&lt;img src=&quot;https://srikanth.sastry.name/wp-content/uploads/2019/08/Meet-You-Strawman.jpg&quot; alt=&quot;&quot; class=&quot;wp-image-464&quot; width=&quot;349&quot; height=&quot;262&quot; /&gt;&lt;figcaption&gt;source: https://prepareforchange.net/wp-content/uploads/2016/06/Meet-You-Strawman.jpg&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;On the face of it, it seems like an easy answer: &quot;&lt;em&gt;build for survival, when survival is at stake; otherwise, build for success.&lt;/em&gt;&quot; But unfortunately, that answer hides a multitude of assumptions, and oversimplifies the real-world within which the software development process operates. So, let's first breakdown the assumptions, and then address the oversimplification.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading {&quot;level&quot;:3} --&gt;
&lt;h3&gt;The assumptions&lt;/h3&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;The first assumption here is the notion that we have a common understanding of what it means to say that a project/product's &quot;survival is at stake&quot;. And the second assumption is that building for survival in all such cases will actually help. &lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading {&quot;level&quot;:4} --&gt;
&lt;h4&gt;Is your survival at stake?&lt;/h4&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt; Let's examine the first assumption: &lt;em&gt;we can agree on what it means for survival to be at stake.&lt;/em&gt; Sure, in the extreme cases, we can all agree on this notion (e.g., a startup has a runway of 6 months, and additional funding depends on delivering an alpha in 3 months), but moving past that, things become a lot more subjective. &lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Consider a new project/product incubating within a well established company such as Facebook or Google. Is it's survival ever at stake? How about a project that involves building/dismantling infrastructure with a fixed, slightly aggressive, deadline; would it's survival be at stake? The answers to the above questions are not always obvious, and they can be different depending on who you ask. They can differ depending on where you are in the organizational hierarchy; it can even differ among developers within the team. &lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading {&quot;level&quot;:4} --&gt;
&lt;h4&gt;Ok, so your survival is at stake. So should you build for survival?&lt;/h4&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Now on to the second assumption: &lt;em&gt;when survival is at stake, building for survival is actually the right thing to do&lt;/em&gt;. Again, there are some obvious cases where this is the right call. What about a case where the survival of your medical diagnostic software is at stake; would building for survival actually be the right thing (given that 'break things' is a corollary of 'move fast')?  How about when you realize that you were a little too optimistic about what the product could accomplish with the limited resources you have; is building for survival still the right thing (ask Microsoft about Windows Vista)?&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;The oversimplification made here is that we only ever have two choices: survival, or success. This is almost never the case. You can almost always negotiate. You can negotiate on deadlines, on scope, on resources, on expectations, and on outcomes. Without taking all of the above into account, the discussion of survival vs success is meaningless. &lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading --&gt;
&lt;h2&gt;So, when should you build for survival vs success?&lt;/h2&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;While you have to evaluate every situation independently and holistically to determine which approach is the right one to take, here are some rule-of-thumb symptoms that suggest that you should be building for survival.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading {&quot;level&quot;:3} --&gt;
&lt;h3&gt;You are resource constrained, and failure is an option&lt;/h3&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:image {&quot;align&quot;:&quot;center&quot;,&quot;id&quot;:465,&quot;width&quot;:234,&quot;height&quot;:156} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;aligncenter is-resized&quot;&gt;&lt;img src=&quot;https://srikanth.sastry.name/wp-content/uploads/2019/08/product-resource-graphic01.png&quot; alt=&quot;&quot; class=&quot;wp-image-465&quot; width=&quot;234&quot; height=&quot;156&quot; /&gt;&lt;figcaption&gt;source: https://www.triskellsoftware.com/wp-content/uploads/2016/01/product-resource-graphic01.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;When you are resource constrained, then there is a good chance that you cannot afford the time/effort/resources that a principled approach to software development demands. Recall, that in such a case, I talked about renegotiating the original parameters and expectations. However, they are not always negotiable. (&lt;em&gt;E.g.&lt;/em&gt;, you might have only a few months' of runway, and your investor might not be willing to fund you in case of milestone slippage.) In such cases, failure becomes a better option than renegotiation (almost vacuously). Here, building of survival makes sense.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading {&quot;level&quot;:3} --&gt;
&lt;h3&gt;Your environment is highly uncertain&lt;/h3&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:image {&quot;align&quot;:&quot;center&quot;,&quot;id&quot;:466,&quot;width&quot;:349,&quot;height&quot;:349} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;aligncenter is-resized&quot;&gt;&lt;img src=&quot;https://srikanth.sastry.name/wp-content/uploads/2019/08/Uncertainty-Reigns-Supreme-for-Fixed-Income-Investors-in-2015-e1505506674364.png&quot; alt=&quot;&quot; class=&quot;wp-image-466&quot; width=&quot;349&quot; height=&quot;349&quot; /&gt;&lt;figcaption&gt;source: https://blogs.cfainstitute.org/investor/2015/09/08/uncertainty-reigns-supreme-for-fixed-income-investors-in-2015/&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;High uncertainty is often a good trigger to build for survival. High uncertainty often requires you to 'fail fast'. If you are working on experimental technology, or on nascent problem spaces, there really isn't much to grok without actually building something and test things out. In other cases, it might not be possible to know if you are solving the right problem; this happens often when your customers tend to &quot;know it when they see it&quot;.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading {&quot;level&quot;:3} --&gt;
&lt;h3&gt;Your survival is more important than stakeholders' risks&lt;/h3&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:image {&quot;align&quot;:&quot;center&quot;,&quot;id&quot;:467,&quot;width&quot;:376,&quot;height&quot;:349} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;aligncenter is-resized&quot;&gt;&lt;img src=&quot;https://srikanth.sastry.name/wp-content/uploads/2019/08/stakeholders.png&quot; alt=&quot;&quot; class=&quot;wp-image-467&quot; width=&quot;376&quot; height=&quot;349&quot; /&gt;&lt;figcaption&gt;source: https://corporatefinanceinstitute.com/resources/knowledge/finance/stakeholder/&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;This one is less obvious. It could well be the case that your survival is at stake, you are resource constrained, and there is no negotiating. However, there still are situations when you should not build for survival. One big situation is when the stakeholders' risks trump your survival.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;The most egregious example I can think of is in medical technology. If you software you are building is for (say) medical diagnosis, and a wrong diagnosis can mean the difference between life and death of a patient, then you should never, ever, ever build for survival. From here, you can extrapolate to all other situations where your stakeholders' risk outweighs yours.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading {&quot;level&quot;:3} --&gt;
&lt;h3&gt;You are solving a one-time problem&lt;/h3&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:image {&quot;align&quot;:&quot;center&quot;,&quot;id&quot;:468} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;aligncenter&quot;&gt;&lt;img src=&quot;https://srikanth.sastry.name/wp-content/uploads/2019/08/Throw-away-Prototyping-Model.jpg&quot; alt=&quot;&quot; class=&quot;wp-image-468&quot; /&gt;&lt;figcaption&gt;source: https://prototypeinfo.com/evolutionary-prototyping-and-throw-away-prototyping/&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;This one is tricky, because solutions to one-time problems have a nasty tendency of sticking around a lot longer than they should. However, in principle, if you are writing software that is going to be used just once, and then discarded, then you should consider building for survival. However, please ensure that that software will NOT persist past it's primary use. Incidentally, if your work involves building prototypes and proof-of-concept works, then you are almost definitely building for survival.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;There are multiple ways to enforce this: (1) do not put it into version control at all, (2) put the code in a new repo that is nuked on a timer, (3) prevent importing modules from this codebase to anywhere else, &lt;em&gt;etc&lt;/em&gt;.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Can you think of any other situations where building for survival is warranted? Let me know in the comments.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;
</content>
 </entry>
 
 <entry>
   <title>Are you building for survival or Survival?</title>
   <link href="//srikanth.sastry.name/are-you-building-for-survival-or-excellence/"/>
   <updated>2019-08-15T19:53:45+00:00</updated>
   <id>//srikanth.sastry.name/are-you-building-for-survival-or-excellence</id>
   <content type="html">&lt;!-- wp:image {&quot;id&quot;:453} --&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://srikanth.sastry.name/wp-content/uploads/2019/08/maxresdefault-1024x576.jpg&quot; alt=&quot;&quot; class=&quot;wp-image-453&quot; /&gt;&lt;figcaption&gt;Source: https://www.youtube.com/attribution?v=oW2i6QpnmyY&lt;/figcaption&gt;&lt;/figure&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;In my experience, the approach to building a software artifact often falls into one of two types: &lt;em&gt;building for survival&lt;/em&gt;, or &lt;em&gt;building for success&lt;/em&gt;.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;When building for survival, your only goal to get the product working for the specific usecase(s) that will save your skin. In contrast, when building for success, you are building to solve more than just the immediate problem; you are building to set up building blocks that is incidentally used to solve the immediate problem, but can also be adapted to solve a larger class of problems within the same context.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;This post is not about when to choose what approach. Instead, it is about what each of the two approaches look like, and what purposes they serve. &lt;a href=&quot;https://srikanth.sastry.name/when-should-you-build-for-survival/&quot;&gt;A subsequent post will talk about when I think each approach is appropriate.&lt;/a&gt;&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:more --&gt;
&lt;!--more--&gt;
&lt;!-- /wp:more --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;In theory, specific circumstances should determine which of these two approaches ought to be used. Unfortunately, all too often, the developer's temperament determines the approach, and this IMHO is a mistake. I have seen consequences of such mistakes last through multiple years and impact the morale of multiple teams and engineers. &lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading --&gt;
&lt;h2&gt;Building for survival&lt;/h2&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:image {&quot;align&quot;:&quot;center&quot;,&quot;id&quot;:454,&quot;width&quot;:220,&quot;height&quot;:309} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;aligncenter is-resized&quot;&gt;&lt;img src=&quot;https://srikanth.sastry.name/wp-content/uploads/2019/08/6028945055_2271b47a5b_m.jpg&quot; alt=&quot;&quot; class=&quot;wp-image-454&quot; width=&quot;220&quot; height=&quot;309&quot; /&gt;&lt;figcaption&gt;Source: https://www.flickr.com/photos/bandrews/6028945055&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Building for survival often translates to 'being fast', taking shortcuts, and solving for the immediate use case. However, remember that when you do this, your software incurs a debt that will have to be paid eventually. Every incremental functional change you make on top of it incurs interest on the existing debt. Refusal to address it makes it incredibly difficult for your software to evolve and improve. This has a direct impact in your team’s morale. Ask any team that is left supporting ‘legacy’ code, or has some ‘black box’, ‘sacred cow’ modules that no understands, but is business critical. &lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading {&quot;level&quot;:3} --&gt;
&lt;h3&gt;What does building for survival look like?&lt;/h3&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;How do you know you are now in the regime of building for survival? There are many clues to look for. I'll list three.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:list --&gt;
&lt;ul&gt;&lt;li&gt;Typically, when building for survival, your deadlines are sacred. Think about everything that you or your company has had to do to meet GDPR deadlines. The odds are that all of that was done in the mode of &lt;em&gt;building for survival&lt;/em&gt;.&lt;/li&gt;&lt;li&gt;The second clue is that you deem it more important that some specific usecase work end-to-end, than that things are done the 'right' way (the discussion of what is a 'right' way is a topic for a whole other discussion). You see this often in early stage startups where they have an alpha customer who has promised to your product/service for some specific purpose, and your next round of funding is contingent upon demonstrating the utility of your product/service with that (isolated) context.&lt;/li&gt;&lt;li&gt;The third, and perhaps the strongest, clue is that to (the collective) you, the end product is more important than the software development process. If your engineering culture is to 'get things done' by 'hook or crook', then you are most definitely building for survival.&lt;/li&gt;&lt;/ul&gt;
&lt;!-- /wp:list --&gt;

&lt;!-- wp:heading {&quot;level&quot;:3} --&gt;
&lt;h3&gt;What does building for survival get you?&lt;/h3&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;You survive, period. It gets you to where you want to be, and within a reasonable amount of time, with potentially steep discounting of the future. There really isn't much beyond that to show for.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading {&quot;level&quot;:3} --&gt;
&lt;h3&gt;What it doesn't give you&lt;/h3&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;It is important to realize the trade-off you are making when building for survival, and not be under illusions. &lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:list --&gt;
&lt;ul&gt;&lt;li&gt;For starts, do not mistake hitting your milestones under this approach to &lt;em&gt;success&lt;/em&gt;. Sure, you may have succeeded in getting where you want to be, but that's not the end of the story. &lt;/li&gt;&lt;li&gt;Presumably, the software you just delivered is not going to be abandoned imminently. So, what you need is a path forward, and that is exactly what this approach will not provide. Building for survival does not necessarily tell you how and where to go next. It shines no light on the landscape of possibilities that could have been unlocked.&lt;/li&gt;&lt;li&gt;It doesn't tell you what else can your artifact be used for, or it fits into the larger ecosystem. In the pursuit of 'moving fast', the odds are they you have built in so many assumptions into your code that even cognitively extricating the underlying technological innovation from the business logic and the business logic from the use cases becomes challenging.&lt;/li&gt;&lt;/ul&gt;
&lt;!-- /wp:list --&gt;

&lt;!-- wp:heading --&gt;
&lt;h2&gt;Building for Success&lt;/h2&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:image {&quot;align&quot;:&quot;center&quot;,&quot;id&quot;:455} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;aligncenter&quot;&gt;&lt;img src=&quot;https://srikanth.sastry.name/wp-content/uploads/2019/08/1ijN1lAVtTBPmh2hCwDWozw.png&quot; alt=&quot;&quot; class=&quot;wp-image-455&quot; /&gt;&lt;figcaption&gt;source: https://medium.com/deliberate-data-science/deliberate-data-science-intro-eac1b1a06568&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Building for success is a much more deliberate process that includes grokking the true context of the problem you are solving, and being critical of everything you choose to build. But it is important to be sure that you actually have such a luxury; otherwise, your software will likely become part of the vast graveyard of failed projects, products, and companies.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading {&quot;level&quot;:3} --&gt;
&lt;h3&gt;What does building for success look like?&lt;/h3&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;There are lots of ways building for success is different from building for survival.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:list --&gt;
&lt;ul&gt;&lt;li&gt;You deliberate before execution. You ask questions such as: &lt;ul&gt;&lt;li&gt;What is the problem we are solving? &lt;/li&gt;&lt;li&gt;Are we solving the right problem? &lt;/li&gt;&lt;li&gt;Is our proposal the right way to solve the problem? &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;You deconstruct the problem to understand the larger context and nature of the sub-problems you are solving. You tease out the incidental nature of how these sub-problems combine versus the essential nature of the overall problem to be solved.&lt;/li&gt;&lt;li&gt;Your execution is heavily informed by the aforementioned analysis. You apply the deconstruction and analysis to each sub-problem recursively until the actual act of writing the code becomes a rote exercise. The 'magic' and 'innovation' in your execution is really in how you compose such 'simple pieces of code' to solve your non-trivial problem across layers of abstractions (which are translated directly from your deconstructions).&lt;/li&gt;&lt;li&gt;The code paths within your subsystems and modules are constrained to the supported use cases, but that is the result of intentional plumbing across the data flow. Addition of new use cases and flows is often a matter of easily understandable and incremental changes.&lt;/li&gt;&lt;li&gt;Your control flow mimics your data flow within the system. (Unless there is a very good reason for it not to be the case.)&lt;/li&gt;&lt;/ul&gt;
&lt;!-- /wp:list --&gt;

&lt;!-- wp:heading {&quot;level&quot;:3} --&gt;
&lt;h3&gt;What does building for success give you&lt;/h3&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Despite it not being the 'fast' way to build software. There is a lot of be said for Building for Success. &lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:list --&gt;
&lt;ul&gt;&lt;li&gt;The deliberation process before you build should result in a decent understanding of the context within which you are solving your problem. This often means, your team and the software is now in a much better position to solve more problems faster. Effectively you have expanded your 'pie'.&lt;/li&gt;&lt;li&gt;Almost always, problems do not occur/manifest in isolation. They are part of a larger landscape of issues, utilities, and benefits. Deconstructing the problem through this lens will help you build a solution that is more likely to have reusable and sustainable components and modules that will lower the incremental effort associated with the evolution of your systems and their adaptation to solve proximate and associated problem.&lt;/li&gt;&lt;li&gt;A well thought out design allows you to shard your development across multiple developers. This will help in three ways: &lt;ol&gt;&lt;li&gt;You can 'move fast' with concurrent execution.&lt;/li&gt;&lt;li&gt;Each developer can work on multiple workstreams, and is less likely to be completely stuck.&lt;/li&gt;&lt;li&gt;Your software's &lt;a href=&quot;https://en.wikipedia.org/wiki/Bus_factor&quot;&gt;bus factor&lt;/a&gt; is much improved with more engineers on the code.&lt;/li&gt;&lt;/ol&gt;&lt;/li&gt;&lt;li&gt;You can pivot better and faster because a lot of what you wrote is reusable and reconfigurable. You can &lt;a href=&quot;https://srikanth.sastry.name/object-composition-for-service-migration/&quot;&gt;migrate from one upstream dependency to another&lt;/a&gt; much more smoothly. A good composition-based design allows you to make disruptive changes without actually disrupting :)&lt;/li&gt;&lt;/ul&gt;
&lt;!-- /wp:list --&gt;

&lt;!-- wp:heading {&quot;level&quot;:3} --&gt;
&lt;h3&gt;What it doesn't give you&lt;/h3&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;You will not have a quick start. You will be a little slower starting from square one. It will take time to start putting together code that actually does something real and concrete.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;You are vulnerable to analysis paralysis. The bar for action is much higher when building for success. It takes a certain type of decisiveness, and ability to &lt;a href=&quot;https://en.wikipedia.org/wiki/Disagree_and_commit&quot;&gt;disagree and commit&lt;/a&gt;, to be able to flourish under this approach.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;
</content>
 </entry>
 
 <entry>
   <title>Object Composition for Service Migration</title>
   <link href="//srikanth.sastry.name/object-composition-for-service-migration/"/>
   <updated>2019-01-24T21:13:37+00:00</updated>
   <id>//srikanth.sastry.name/object-composition-for-service-migration</id>
   <content type="html">&lt;!-- wp:paragraph --&gt;
&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Object_composition&quot;&gt;Object Composition&lt;/a&gt; is a very powerful and pervasive software design technique. Yet, paradoxically, it is an underutilized design pattern whose lack of usage is the root of many anti-patterns in software development. One that I continue to come across regularly has to do with not using composition to test and migrate a piece of software from one service to another.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Briefly, &lt;em&gt;Object Composition&lt;/em&gt; is combining two or more objects to create more complex objects while keeping definitions of the constituent objects unchanged (unlike &lt;a href=&quot;https://en.wikipedia.org/wiki/Inheritance_(object-oriented_programming)&quot;&gt;inheritance&lt;/a&gt;, which extends these definitions)&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:more --&gt;
&lt;!--more--&gt;
&lt;!-- /wp:more --&gt;

&lt;!-- wp:heading --&gt;
&lt;h2&gt;Set Up &lt;/h2&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Say you have an existing backend service that your code currently uses. It has evolved over time to become a chimera that needs replacing, and you have a brand new implementation of that service that can replace your old service. &lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Say, the two client implementations looks something like the following:&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:preformatted --&gt;
&lt;pre class=&quot;wp-block-preformatted&quot;&gt;class OldAndBusted implements ServiceClient {&lt;br /&gt;  @override&lt;br /&gt;  Response process(Request request) {&lt;br /&gt;    // Hacky code.&lt;br /&gt;    if (request.type == A) {&lt;br /&gt;      // Ugly code.&lt;br /&gt;    } else if (request.type == B) {&lt;br /&gt;      // Even uglier code.&lt;br /&gt;    } else {&lt;br /&gt;      // A monstrosity that needs to be killed with fire&lt;br /&gt;    }&lt;br /&gt;    return response;&lt;br /&gt;  }&lt;br /&gt;}&lt;br /&gt;&lt;br /&gt;class NewHotness implements ServiceClient {&lt;br /&gt;  @override&lt;br /&gt;  Response process(Request request) {&lt;br /&gt;    // Best code ever written.&lt;br /&gt;    return response;&lt;br /&gt;  }&lt;br /&gt;}&lt;/pre&gt;
&lt;!-- /wp:preformatted --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;The goal is to migrate your code from using OldAndBusted to NewHotness. There are several ways to do this wrong. So it is easier if I demonstrate a right way to do this using Object Composition.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading --&gt;
&lt;h2&gt;A right way&lt;/h2&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;There are really four steps to such a migration.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:list {&quot;ordered&quot;:true} --&gt;
&lt;ol&gt;&lt;li&gt;&lt;em&gt;Verify equivalence&lt;/em&gt;: Shadow a percentage of your calls to the new service, log mismatches in the response, and fix all such mismatches.&lt;/li&gt;&lt;li&gt;&lt;em&gt;Configure migration&lt;/em&gt;: Setup service migration to proceed in phases.&lt;/li&gt;&lt;li&gt;&lt;em&gt;Migrate and clean up&lt;/em&gt;: Complete migration and delete the old service.&lt;/li&gt;&lt;/ol&gt;
&lt;!-- /wp:list --&gt;

&lt;!-- wp:heading {&quot;level&quot;:3} --&gt;
&lt;h3&gt;Step 1. Verify equivalence&lt;/h3&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;The goal here is to ensure that before we start migration, the new service is functionally identical to the old service. We accomplish this through composition of old and new service as sketched out next.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:preformatted --&gt;
&lt;pre class=&quot;wp-block-preformatted&quot;&gt;class ClientWithShadow implements ServiceClient {&lt;br /&gt;  ClientWithShadow(ServiceClient oldAndBusted, &lt;br /&gt;                   ServiceClient newHotness) {&lt;br /&gt;    this.oldAndBusted = oldAndBusted;&lt;br /&gt;    this.newHotness = newHotness;&lt;br /&gt;  }&lt;br /&gt;  @override&lt;br /&gt;  Response process(Request request) {&lt;br /&gt;    oldResponse = oldAndBusted.process(request);&lt;br /&gt;    if (shouldShadow(request)) {&lt;br /&gt;      newResponse = newHotness.process(request);&lt;br /&gt;      if (!oldResponse.equals(newResponse)) {&lt;br /&gt;        logMismatch(oldResponse, newResponse);&lt;br /&gt;      }&lt;br /&gt;    }&lt;br /&gt;    return newResponse;&lt;br /&gt;  }&lt;br /&gt;&lt;br /&gt;&lt;/pre&gt;
&lt;!-- /wp:preformatted --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;The pseudocode code above simply delegates calls to the old service, and if shadowing is requires, it additionally delegates to the new service as well and compares the two outputs. It logs any mismatches it sees so that the developer can then take a look at it to ensure that it is addressed.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;You simply replace all calls to OldAndBusted with calls to ClientWithShadow.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading {&quot;level&quot;:3} --&gt;
&lt;h3&gt;Step 2. Configure migration&lt;/h3&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;After you have determined that the two services are indeed functionally alike, we can then prep for migration. Again, object composition helps us set this up cleanly.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Pseudocode for setting up such a migration follows next. Here, I assume that there is a Config object that contains the migration related config.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:preformatted --&gt;
&lt;pre class=&quot;wp-block-preformatted&quot;&gt;class MigrationClient implements ServiceClient {&lt;br /&gt;  MigrationClient(ServiceClient oldAndBusted, &lt;br /&gt;                  ServiceClient newHotness,&lt;br /&gt;                  Config migrationConfig) {&lt;br /&gt;    this.oldAndBusted = oldAndBusted;&lt;br /&gt;    this.newHotness = newHotness;&lt;br /&gt;    this.migrationConfig = migrationConfig;&lt;br /&gt;  }&lt;br /&gt;  @override&lt;br /&gt;  Response process(Request request) {&lt;br /&gt;    if (migrationConfig.useNewService(request)) {&lt;br /&gt;     return newHotness.process(request);&lt;br /&gt;    }&lt;br /&gt;    return oldAndBusted.process(request);&lt;br /&gt;  }&lt;/pre&gt;
&lt;!-- /wp:preformatted --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;You simply replace all instances of ClientWithShadow with MigrationClient. Yes, it really is that simple! The migration config has all the info it needs to figure out whether a given request should use the new service or the old service.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading {&quot;level&quot;:3} --&gt;
&lt;h3&gt;Step 3. Migrate and clean up&lt;/h3&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Here, we do the actual migration. We set up the config to slowly start shifting some of the load from the old service to the new one, while monitoring to make sure everything is going well. We can always roll back the migration by editing the config without actually modifying the code, which is a big deal here.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;After migration to the new service a 100%, you can simply replace MigrationClient instances with NewHotness instances, and delete all the old code (OldAndBusted, ClientWithShadow, and MigrationClient). And you are all cleaned up. Profit!&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading --&gt;
&lt;h2&gt;So many wrong ways&lt;br /&gt;&lt;/h2&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Unfortunately, I have seen this done in way too many wrong ways.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:list --&gt;
&lt;ul&gt;&lt;li&gt; I have seen use of inheritance to extend OldAndBusted to NewHotness, and some hacky switch inside the NewHotness implementation to do shadowing and migration.&lt;/li&gt;&lt;li&gt;I have seen hacky if-else modification of OldAndBusted that the new if-block implementing NewHotness functionality.&lt;/li&gt;&lt;li&gt;I have seen developers skip shadowing entirely only to cause major service incidents.&lt;/li&gt;&lt;li&gt;Many more ways that are not that interesting, except for disaster tourism.&lt;/li&gt;&lt;/ul&gt;
&lt;!-- /wp:list --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;So, object composition is useful, it is powerful, and please use it more!&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;
</content>
 </entry>
 
 <entry>
   <title>folly:Future, onTimeout(), and a race condition</title>
   <link href="//srikanth.sastry.name/follyfuture-ontimeout-and-a-race-condition/"/>
   <updated>2019-01-18T00:38:48+00:00</updated>
   <id>//srikanth.sastry.name/follyfuture-ontimeout-and-a-race-condition</id>
   <content type="html">&lt;!-- wp:image {&quot;id&quot;:365,&quot;align&quot;:&quot;center&quot;,&quot;width&quot;:338,&quot;height&quot;:338} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;aligncenter is-resized&quot;&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2019/01/C-programming-in-a-nutshell-Imgur-450x450.png&quot; alt=&quot;&quot; class=&quot;wp-image-365&quot; width=&quot;338&quot; height=&quot;338&quot; /&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;&lt;strong&gt;TL;DR.&lt;/strong&gt; The inability to cancel threads in C++ can result in bizarre semantics even in seemingly straightforward (and almost) declarative code. folly::Future is an interesting case in point.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:more --&gt;
&lt;!--more--&gt;
&lt;!-- /wp:more --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/facebook/folly/blob/master/folly/docs/Futures.md&quot;&gt;Folly Futures&lt;/a&gt; is an Async C++ framework from Facebook. It has an interesting function &lt;a href=&quot;https://github.com/facebook/folly/blob/8757861f41c4b58ac2948ef3dc91aef9cdc8aba0/folly/futures/Future.h#L1545&quot;&gt;onTimeout()&lt;/a&gt;, which essentially allows to stop waiting on a Future forever. So you would typically use it as follows.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:preformatted --&gt;
&lt;pre class=&quot;wp-block-preformatted&quot;&gt;provider_.getOperationFuture(Request r)&lt;br /&gt;   .then([&amp;amp;](Response response) {&lt;br /&gt;     doFoo();  // Accesses variables in the surrounding scope&lt;br /&gt;   })&lt;br /&gt;   .onTimeout(milliseconds(500), [&amp;amp;]{&lt;br /&gt;     doBar();  // Accesses variables in the surrounding scope&lt;br /&gt;   })   &lt;br /&gt;.get();&lt;/pre&gt;
&lt;!-- /wp:preformatted --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;The semantics that I expected from this piece of code was the following: &lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:preformatted --&gt;
&lt;pre class=&quot;wp-block-preformatted&quot;&gt;if there is no response within 500 milliseconds, then&lt;br /&gt;   the future throws a timeout, thus executing  doBar()&lt;br /&gt;  else&lt;br /&gt;   the future executes the then() block, thus executing doFoo(&lt;/pre&gt;
&lt;!-- /wp:preformatted --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Importantly, I was expecting exactly one of the two function doFoo() or doBar() to be executed. And it turns out not be true!&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading --&gt;
&lt;h2&gt;Race Condition&lt;/h2&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;It turns out that the Future has a background thread running waiting for the response, and this thread is not cancelled upon timeout because: &lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:list {&quot;ordered&quot;:true} --&gt;
&lt;ol&gt;&lt;li&gt;This thread is spawned first, and that in-turn waits on the timeout, and&lt;/li&gt;&lt;li&gt;C++ does not support canceling threads.&lt;/li&gt;&lt;/ol&gt;
&lt;!-- /wp:list --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;So, we now have a race condition between the Future's response and timeout, thus potentially causing memory overruns and segfaults. How do you get around this? How do you use folly::Future with the semantics I outlined above? &lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading --&gt;
&lt;h2&gt;Remedies&lt;/h2&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;I found two possible ways for this.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading {&quot;level&quot;:3} --&gt;
&lt;h3&gt;Swap onTimeout() and then()&lt;/h3&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:preformatted --&gt;
&lt;pre class=&quot;wp-block-preformatted&quot;&gt;provider_.getOperationFuture(Request r)&lt;br /&gt;  .onTimeout(milliseconds(500), [&amp;amp;]{&lt;br /&gt;     doBar();  // Accesses variables in the surrounding scope&lt;br /&gt;     return Response::onTimeout();&lt;br /&gt;   })&lt;br /&gt;   .then([&amp;amp;](Response response) {&lt;br /&gt;     if (response == Response::onTimeout()) {&lt;br /&gt;       return;&lt;br /&gt;     }&lt;br /&gt;     doFoo();  // Accesses variables in the surrounding scope&lt;br /&gt;   })&lt;br /&gt;   .get();&lt;/pre&gt;
&lt;!-- /wp:preformatted --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Essentially, you force the onTimeout block to return a special instance of the Reponse object (called Response::onTimeout() here), this then becomes the input to the then block, and within the then block you can check if the response is valid and proceed accordingly. 
Yes, I know it's  ugly.
Worse, what if the Response object is complex enough that you cannot simply build a special instance of it? Or what if every possible instance of the Response object is potentially valid? Then you can go for the next remedy.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading {&quot;level&quot;:3} --&gt;
&lt;h3&gt;Open up onTimeout()&lt;/h3&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;It is useful to remember that onTimeout() is just syntactic sugar for the following. &lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:preformatted --&gt;
&lt;pre class=&quot;wp-block-preformatted&quot;&gt;provider_.getOperationFuture(Request r)&lt;br /&gt;   .within(milliseconds(500))&lt;br /&gt;   .onError([](const TimedOut&amp;amp; e){&lt;br /&gt;      doBar();&lt;br /&gt;     return Response::onTimeout();&lt;br /&gt;   })&lt;br /&gt;   .then(...);&lt;/pre&gt;
&lt;!-- /wp:preformatted --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;So, you can use this to refactor your code to look something like this: &lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:preformatted --&gt;
&lt;pre class=&quot;wp-block-preformatted&quot;&gt;provider_.getOperationFuture(Request r)&lt;br /&gt;   .within(milliseconds(500))&lt;br /&gt;   .then([&amp;amp;](Response response) {&lt;br /&gt;     doFoo();  // Accesses variables in the surrounding scope&lt;br /&gt;   })&lt;br /&gt;   .onError([&amp;amp;](const folly::Timeout&amp;amp; ){&lt;br /&gt;     doBar();  // Accesses variables in the surrounding scope&lt;br /&gt;   })&lt;br /&gt;   .get();&lt;/pre&gt;
&lt;!-- /wp:preformatted --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;This essentially, raises an exception after 500 milliseconds of no response, and that exception ensures that the then block is never executed!
 So, yeah, folly::Future can be tricky.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;
</content>
 </entry>
 
 <entry>
   <title>Scripts and their undo</title>
   <link href="//srikanth.sastry.name/scripts-and-their-undo/"/>
   <updated>2019-01-11T22:46:42+00:00</updated>
   <id>//srikanth.sastry.name/scripts-and-their-undo</id>
   <content type="html">&lt;!-- wp:cover {&quot;url&quot;:&quot;http://srikanth.sastry.name/wp-content/uploads/2019/01/bash-logo-672x372.png&quot;,&quot;id&quot;:313} --&gt;
&lt;div class=&quot;wp-block-cover has-background-dim&quot;&gt;&lt;p class=&quot;wp-block-cover-text&quot;&gt;&lt;strong&gt;TL;DR.&lt;/strong&gt; &lt;em&gt;Scripts are a great way to automate the mundane. But be sure you give yourself a way out --- an undo -- when running them.&lt;/em&gt;&lt;/p&gt;&lt;/div&gt;
&lt;!-- /wp:cover --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Some time ago, I had to carry out a long sequence of manual changes in the deployment of my ‘cloud’ service, and so like a good software engineer, I automated large chunks of these changes with shell scripts. Here I learned the importance of building and ‘undo’ in all your shell scripts that mutate the state of world.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:more {&quot;customText&quot;:&quot;Read more&quot;} --&gt;
&lt;!--more Read more--&gt;
&lt;!-- /wp:more --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt; A bit of background first. I discovered that one of the services in a collection of co-located services was over-provisioned by a lot. But due to interdependence among services and second order effects, I wasn’t sure by how much. A quick way to do this was to shrink the size of this service while monitoring the resource utilization for the service. For multiple reasons, I had to go through a very specific sequence of replica turn downs, and this sequence was accounted for the automation as well.&lt;br /&gt; After writing and testing the script, I unleashed it on the deployment, and things seem to be going well.&lt;br /&gt; Midway through, an engineer from a partner team pinged me to say that they were having service incident, and they my changes was introduces a lot of noise in their monitoring dashboard making it difficult to debug their issue. So, they asked me to undo my changes, and resume it after they had fixed their issue.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Well, as it turns out, I did not have an undo script, and worse, I hadn't even thought of an undo short of resetting the entire service (which was scheduled to happen at the end of the day anyway). So, I halted my existing script, and made some quick changes that I thought would effectively undo, and given how short I was on time, I just let it run.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;You can guess what happened. Instead of undoing the changes, a bug in the script caused to be more aggressive about shutting down replicas, and I now had a new service incident on my hands! :)&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;If only I had spent enough time figuring out the undo operation, and had a handy command that executed that, this could have been completely avoided. So, my advice to you is this. When writing and launching a script that mutates the state of the world, please ensure that the script logs (either to stdout, stderr, or a log file) the exact command that can be pasted into your shell prompt to undo all the mutations. You may not have to use it often (or at all(; but when you do, it will definitely be worth the effort.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;
</content>
 </entry>
 
 <entry>
   <title>Merits of unit tests &#8212; part 5</title>
   <link href="//srikanth.sastry.name/merits-of-unit-tests-part-5/"/>
   <updated>2017-12-28T21:25:49+00:00</updated>
   <id>//srikanth.sastry.name/merits-of-unit-tests-part-5</id>
   <content type="html">&lt;!-- wp:paragraph {&quot;backgroundColor&quot;:&quot;pale-cyan-blue&quot;} --&gt;
&lt;p class=&quot;has-background has-pale-cyan-blue-background-color&quot;&gt;Cross posted on &lt;a href=&quot;https://www.linkedin.com/pulse/merits-unit-tests-part-5-srikanth-sastry/&quot;&gt;LinkedIn&lt;/a&gt;.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;This is the fifth, and final, post in my series of notes on unit tests. So far, we've talked about how unit tests help us in &lt;a rel=&quot;noreferrer noopener&quot; aria-label=&quot;documenting our code (opens in a new tab)&quot; href=&quot;http://srikanth.sastry.name/merits-of-unit-tests-part-1/&quot; target=&quot;_blank&quot;&gt;documenting our code&lt;/a&gt;, &lt;a rel=&quot;noreferrer noopener&quot; aria-label=&quot;reliably refactor software (opens in a new tab)&quot; href=&quot;http://srikanth.sastry.name/the-merits-of-unit-tests-part-2/&quot; target=&quot;_blank&quot;&gt;reliably refactor software&lt;/a&gt;, &lt;a rel=&quot;noreferrer noopener&quot; aria-label=&quot;build better code (opens in a new tab)&quot; href=&quot;http://srikanth.sastry.name/the-merits-of-unit-tests-part-3/&quot; target=&quot;_blank&quot;&gt;build better code&lt;/a&gt;, and even &lt;a href=&quot;http://srikanth.sastry.name/unit-tests-ftw-part-4/&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot; aria-label=&quot;help debugging in prod (opens in a new tab)&quot;&gt;help debugging in prod&lt;/a&gt;.  In this post, we'll discuss how unit tests (more precisely, the act of  writing unit tests) help us improve the usability of our code.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:more --&gt;
&lt;!--more--&gt;
&lt;!-- /wp:more --&gt;

&lt;!-- wp:heading --&gt;
&lt;h2&gt;Usability&lt;/h2&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;It is fairly accurate to state that the simpler and more usable your 
API is, the less likely it is to be misunderstood, misused, and abused. 
Also, simpler API constrains your possible code paths making it more 
testable and less bug-prone. I claim that the very act of making unit 
tests will help you write more usable code/API. (Of course, this assumes
 an earnest effort in writing good quality unit tests, which can be a 
topic of discussion in its own right).&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;The reason for my claim is simple, by writing extensive unit tests 
that account for all your use cases, you effectively become your own 
first customer. This forces you you to wear your customer's hat and 
really probe the user experience of your API. In fact, it is not 
uncommon for me to iterate on my APIs multiple times simply because I am
 not happy with how difficult it is to set up and execute my unit tests.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:quote --&gt;
&lt;blockquote class=&quot;wp-block-quote&quot;&gt;&lt;p&gt;
  by writing extensive unit tests that account for all your use cases, you effectively become your own first customer 
&lt;/p&gt;&lt;/blockquote&gt;
&lt;!-- /wp:quote --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Let's take a fictional example of a class that does the following: It
 retrieves either a URL, or the content of the URL for a given handle 
that could potentially need to be authenticated as a specific user, and 
it can do so periodically. Here is a first crack at the API and usage 
for it.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:preformatted --&gt;
&lt;pre class=&quot;wp-block-preformatted&quot;&gt;class UrlRetriever {&lt;br /&gt;   // Unauthenticated, one-time&lt;br /&gt;   UrlRetriever(Handle handle);&lt;br /&gt;   // Authenticated, one-time&lt;br /&gt;   UrlRetriever(String user, Handle handle);&lt;br /&gt;   // Authenticated, periodic&lt;br /&gt;   UrlRetriever(String user, Handle handler, int periodInSeconds);&lt;br /&gt;   // Unauthenticated, periodic&lt;br /&gt;   UrlRetriever(Handle handler, int periodInSeconds);&lt;br /&gt;   &lt;br /&gt;   String getUrl();&lt;br /&gt;   Blob getContents();&lt;br /&gt;   void getContentsPeriodically(Callback cb);&lt;br /&gt;   void getUrlPeriodically(Callback cb)&lt;br /&gt;} &lt;/pre&gt;
&lt;!-- /wp:preformatted --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;When you start writing unit tests for this, you start seeing issues 
with usability. For example, you have to consider all possible 
constructions of UrlRetriever with getUrl() or getContents() call. 
Worse, what happens if the UrlRetriever is constructed without a 
periodInSeconds argument, and someone invokes getContentsPeriodically() 
on it? Sure, it is nonsensical, but you still need a test case for it, 
right? Which means, the clients could potentially misuse the class in 
this fashion, in part because the usability of this API is poor. &lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Making an honest attempt at writing unit tests can actually help you 
detect such usability issues! Consider the next iteration for the same 
use case, informed (or constrained) by the unit tests.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:preformatted --&gt;
&lt;pre class=&quot;wp-block-preformatted&quot;&gt;class UrlRetriever {&lt;br /&gt;   UrlRetriever(Handle handle);&lt;br /&gt;   AuthenticatedUrlRetriever withAuth(String user);&lt;br /&gt;   String getUrl();&lt;br /&gt;   Blob getContents();&lt;br /&gt;   void getPeriodically(ContentCallback cb, int periodInSeconds);&lt;br /&gt;   void getPeriodically(UrlCallback cb, int periodInSeconds); &lt;br /&gt;} &lt;br /&gt;class AuthenticatedUrlRetriever inherits UrlRetriever {&lt;br /&gt;   // Does not make sense to authenticate with another user.&lt;br /&gt;   AuthenticatedUrlRetriever withAuth(String user) throws exception;&lt;br /&gt;} &lt;/pre&gt;
&lt;!-- /wp:preformatted --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;You will see that writing unit tests for it is much easier, and 
furthermore, there is less chance of misusing this API. Both of this is 
true because the API is more usable. The clients can use it in multiple,
 but limited/tractable. Here is how it ends up looking in the unit 
tests. &lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:preformatted --&gt;
&lt;pre class=&quot;wp-block-preformatted&quot;&gt;// one-time unauthenticated &lt;br /&gt;url = UrlRetriever(handle).getUrl();&lt;br /&gt; // periodic unauthenticated (1)&lt;br /&gt; // -- MyCallback inherits UrlCallback.&lt;br /&gt;urlCallback = new MyCallback(); &lt;br /&gt;UrlRetriever(handle).getPeriodically(urlCallback, 30);&lt;br /&gt;  // periodic unauthenticated (2)&lt;br /&gt; // -- MyCallback inherits ContentCallback. &lt;br /&gt;contentCallback = new MyCallback(); UrlRetriever(handle).getPeriodically(contentCallback, 30);&lt;br /&gt;  // Authenticated&lt;br /&gt;foo = UrlRetriever(handle).withAuth(user);&lt;br /&gt; //  -- one-time&lt;br /&gt;blob = foo.getContents();&lt;br /&gt; //  -- periodic &lt;br /&gt;foo.getPeriodically(contentCallback, 60); &lt;/pre&gt;
&lt;!-- /wp:preformatted --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Much better eh? :)&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;
</content>
 </entry>
 
 <entry>
   <title>Unit tests FTW! — Part 4</title>
   <link href="//srikanth.sastry.name/unit-tests-ftw-part-4/"/>
   <updated>2017-11-28T21:21:11+00:00</updated>
   <id>//srikanth.sastry.name/unit-tests-ftw-part-4</id>
   <content type="html">&lt;!-- wp:paragraph {&quot;backgroundColor&quot;:&quot;pale-cyan-blue&quot;} --&gt;
&lt;p class=&quot;has-background has-pale-cyan-blue-background-color&quot;&gt;Cross posted on &lt;a href=&quot;https://www.linkedin.com/pulse/unit-tests-ftw-part-4-srikanth-sastry/&quot;&gt;LinkedIn&lt;/a&gt;&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;In the previous three  parts of this series, I have talked about how unit tests are useful in a  lot more than just verifying that your code works. We've talked its  uses for &lt;a rel=&quot;noreferrer noopener&quot; aria-label=&quot;documentation (opens in a new tab)&quot; href=&quot;http://srikanth.sastry.name/merits-of-unit-tests-part-1/&quot; target=&quot;_blank&quot;&gt;documentation&lt;/a&gt;, &lt;a rel=&quot;noreferrer noopener&quot; aria-label=&quot;refactoring and code health (opens in a new tab)&quot; href=&quot;http://srikanth.sastry.name/the-merits-of-unit-tests-part-2/&quot; target=&quot;_blank&quot;&gt;refactoring and code health&lt;/a&gt;, and &lt;a rel=&quot;noreferrer noopener&quot; aria-label=&quot;writing better software (opens in a new tab)&quot; href=&quot;http://srikanth.sastry.name/the-merits-of-unit-tests-part-3/&quot; target=&quot;_blank&quot;&gt;writing better software&lt;/a&gt;. Next, we'll see how unit tests helps you debug issues in production. &lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:more --&gt;
&lt;!--more--&gt;
&lt;!-- /wp:more --&gt;

&lt;!-- wp:heading {&quot;level&quot;:3} --&gt;
&lt;h3&gt;Debugging &lt;/h3&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;A single unit test is supposed to test a single code path within your
 class. I don't always follow this maxim, but it is nevertheless a very 
good rule of thumb. Given that the number of code paths within a given 
code if often increases exponentially with the size of the code, unit 
tests are often a lot more lines of code than the actual production code
 itself. This is a good thing when it comes to debugging.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;If your unit tests cover sufficiently many code paths (which any good
 unit test suite should do), then when an issue arises in production, 
and you narrow it down to your code, then you know that the offending 
code path could not have been the several code paths that your unit 
tests already covered. This pruning makes your debugging a lot simpler 
than before.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:quote --&gt;
&lt;blockquote class=&quot;wp-block-quote&quot;&gt;&lt;p&gt;
  Unit tests can prune the possible set of offending code paths to make debugging tractable, 
&lt;/p&gt;&lt;/blockquote&gt;
&lt;!-- /wp:quote --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;&lt;strong&gt;EXAMPLE&lt;/strong&gt;&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Let's go back to the example I gave you in &lt;a href=&quot;https://www.linkedin.com/pulse/merits-unit-tests-part-3-srikanth-sastry/&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;Part 3&lt;/a&gt;.
 Here is that piece of code. Recall that it takes a large query, splits 
it up into multiple subqueries, sends them off in parallel, collects 
their responses back, munges them and returns the munged response to the
 caller via a callback &lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:preformatted --&gt;
&lt;pre class=&quot;wp-block-preformatted&quot;&gt;public class QueryManager {&lt;br /&gt;   void sendRequest(Query query, Callback queryCallback) {&lt;br /&gt;     List&amp;lt;Subquery&amp;gt; subqueries = splitQuery(query);&lt;br /&gt;     for (Subquery subquery : subqueries) {&lt;br /&gt;       sendQuery(subquery, new Subquery.Callback() {&lt;br /&gt;           @Override&lt;br /&gt;           public onSuccess(Response response) {&lt;br /&gt;             // Do some processing. ...&lt;br /&gt;             if (allResponses()) {&lt;br /&gt;               queryCallback.finalResult();&lt;br /&gt;              } else {&lt;br /&gt;                queryCallback.incrementalResult();&lt;br /&gt;              }&lt;br /&gt;            }&lt;br /&gt;            @Override&lt;br /&gt;            public onFailure(Error e) {&lt;br /&gt;              // Do some error handling. ... &lt;br /&gt;              if (allResponses()) {&lt;br /&gt;                queryCallback.finalResult();&lt;br /&gt;              }&lt;br /&gt;            }&lt;br /&gt;          });&lt;br /&gt;     }&lt;br /&gt;   }&lt;br /&gt;     // Other methods. ... &lt;br /&gt;} &lt;/pre&gt;
&lt;!-- /wp:preformatted --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;I ran into this code because of an issue that we were seeing in production. &lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Every so often the logs showed a really really long query that timed 
out, but it did manage to serve the response back to the user. Digging 
into it some more, I managed to narrow it down to this class. But beyond
 that, things were a mystery. Recall that in my last post I mentioned 
how there were no unit tests here, and the code actually needed 
refactoring to pull out the anonymous class. We pick up the story here 
after all that.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Once I had all the unit tests put in, I discovered that the root cause for the bug is actually a race condition.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;The unit tests had ruled out sufficiently many code paths to lead me 
to a strong suspicion that it was a race condition in the allresponses()
 function causing two overlapping 'last' responses to both trigger the 
incrementalResult() callback function, and so the finalResult() method 
was never invoked. &lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Once you have a candidate cause, reproducing and verifying it becomes
 pretty straightforward (not necessarily easy or simple, but 
straightforward), and the rest is just mundane software engineering. &lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;See, unit tests are more than a one trick pony! :)&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;
</content>
 </entry>
 
 <entry>
   <title>The merits of unit tests — Part 3</title>
   <link href="//srikanth.sastry.name/the-merits-of-unit-tests-part-3/"/>
   <updated>2017-11-22T21:04:44+00:00</updated>
   <id>//srikanth.sastry.name/the-merits-of-unit-tests-part-3</id>
   <content type="html">&lt;!-- wp:paragraph {&quot;backgroundColor&quot;:&quot;pale-cyan-blue&quot;} --&gt;
&lt;p class=&quot;has-background has-pale-cyan-blue-background-color&quot;&gt;Cross posted on &lt;a href=&quot;https://www.linkedin.com/pulse/merits-unit-tests-part-3-srikanth-sastry/&quot;&gt;LinkedIn&lt;/a&gt;.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Previously, I talked about how unit tests serve purposes other than verifying code functionality; I talked about &lt;a rel=&quot;noreferrer noopener&quot; aria-label=&quot; (opens in a new tab)&quot; href=&quot;http://srikanth.sastry.name/merits-of-unit-tests-part-1/&quot; target=&quot;_blank&quot;&gt;unit tests serving as defacto documentation&lt;/a&gt;, and &lt;a href=&quot;http://srikanth.sastry.name/the-merits-of-unit-tests-part-2/&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot; aria-label=&quot; (opens in a new tab)&quot;&gt;unit tests helping you refactor without fear&lt;/a&gt;. In this post, I'll talk about yet another benefit to unit tests: writing better software.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:more --&gt;
&lt;!--more--&gt;
&lt;!-- /wp:more --&gt;

&lt;!-- wp:heading --&gt;
&lt;h2&gt;Better software design&lt;/h2&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;I am not talking about writing bug-free software here. Sure, good 
unit tests help you discover/avoid large classes of bugs, but that's not
 the point. Unit tests also help you enforce good design patterns and 
modularity in your software.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Unit tests help you with software design in two complementary ways. 
First, they help you establish optimal boundaries of modularity in terms
 of methods, and classes, and second, they help you understand your 
dependencies better and almost force you to use good dependency 
injection hygiene.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading {&quot;level&quot;:3} --&gt;
&lt;h3&gt;Modularity&lt;/h3&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:image {&quot;id&quot;:386} --&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2019/01/0-2.jpg&quot; alt=&quot;&quot; class=&quot;wp-image-386&quot; /&gt;&lt;/figure&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;How do you know that your class or method does 'too much', or that it
 has undesirable side-effects? A pretty good way to discover it is to 
start writing unit tests for it. If you find yourself having to test for
 too many different types of inputs, then your methods are doing too 
much. If you find yourself having to test for too many orderings of 
operations, when your methods have too many side effects. It really is 
just as simple as that!&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;For instance, some time ago, I came across a piece of code that 
essentially took a large query, split it up into multiple subqueries, 
sent them off in parallel, collected their responses back, munged them 
and returned the munged response to the caller via a callback. The code 
looked something like this:&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:preformatted --&gt;
&lt;pre class=&quot;wp-block-preformatted&quot;&gt;public class QueryManager {&lt;br /&gt;   void sendRequest(Query query, Callback queryCallback) {&lt;br /&gt;     List&amp;lt;Subquery&amp;gt; subqueries = splitQuery(query);&lt;br /&gt;     for (Subquery subquery : subqueries) {&lt;br /&gt;       sendQuery(subquery, new Subquery.Callback() {&lt;br /&gt;           @Override&lt;br /&gt;           public onSuccess(Response response) {&lt;br /&gt;             // Do some processing. ...&lt;br /&gt;             if (allResponses()) {&lt;br /&gt;               queryCallback.finalResult();&lt;br /&gt;              } else {&lt;br /&gt;                queryCallback.incrementalResult();&lt;br /&gt;              }&lt;br /&gt;            }&lt;br /&gt;            @Override&lt;br /&gt;            public onFailure(Error e) {&lt;br /&gt;              // Do some error handling. ... &lt;br /&gt;              if (allResponses()) {&lt;br /&gt;                queryCallback.finalResult();&lt;br /&gt;              }&lt;br /&gt;            }&lt;br /&gt;          });&lt;br /&gt;     }&lt;br /&gt;   }&lt;br /&gt;     // Other methods. ... &lt;br /&gt;} &lt;/pre&gt;
&lt;!-- /wp:preformatted --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;This code makes for an interesting case study on multiple fronts, and  I will come back to it in a later post. For now, it is sufficient to  state that I wanted to make changes to this code, but it was pretty  thorny because (you guessed it!) it has no unit tests.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Naturally, the first step is to write unit tests for this class, and 
that was when I realized why there were no unit tests here. This class 
is incredibly tricky to unit test. Getting the subqueries to respond 
under various conditions and ordering resulted in a combinatorial 
explosion of test cases making the task intractable. This was very 
strong code smell.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;As you have probably figured out already, this was a classic case of a
 single class doing too much. The primary culprit was the anonymous 
class that implemented the Subquery.Callback interface. It should really
 have been its own class with its own unit tests.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;After I pulled out that anonymous class into its own class, it became
 a lot easier to unit test both the Subquery.Callback and the 
QueryManager individually, and with that, the code became much more 
modular, easier to read, and much easier to maintain.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading {&quot;level&quot;:3} --&gt;
&lt;h3&gt;Dependency&lt;/h3&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:image {&quot;id&quot;:387} --&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2019/01/0-3.jpg&quot; alt=&quot;&quot; class=&quot;wp-image-387&quot; /&gt;&lt;/figure&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;If your code does not do a decent job of&lt;a href=&quot;https://en.wikipedia.org/wiki/Dependency_injection&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt; injecting its dependencies&lt;/a&gt;
 from outside, you are gonna have a bad time! Having good unit tests 
will actually keep you from getting into this pitfall pretty 
effectively. Consider the following contrived example. You have a piece 
of code that writes to an external service, and your code throttles the 
rate of writes because going over your approved rate/quota can be pretty
 expensive. So, your code could look something like this:&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:preformatted --&gt;
&lt;pre class=&quot;wp-block-preformatted&quot;&gt;class RateLimiter {&lt;br /&gt;   void writeToExternalService(const vector&amp;lt;Entries&amp;gt;&amp;amp; stuff) {&lt;br /&gt;     auto service = new ExternalService(ConnectionParameters foo);&lt;br /&gt;     for (auto entry : stuff) {&lt;br /&gt;       waitUntilQuotaAvailable();&lt;br /&gt;       service.write(entry);&lt;br /&gt;     }&lt;br /&gt;   }&lt;br /&gt;} &lt;/pre&gt;
&lt;!-- /wp:preformatted --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Remember how I said that going over the rate/quota is bad? How do you
 verify that it will not happen? Well, you could set up an elaborate 
testbed that has an ExternalService simulator, and you can run your code
 through all sorts of inputs and verify that the simulator says that the
 rate limiting is work. But that's expensive, and if you choose to go 
with a different external service, then well, good luck with that!&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Instead, you could try to unit test it. But how? You need to have 
access to the ExternalService to do that, which we have already 
established is expensive! Well, this is where unit testing it will force
 you into healthy dependency injection. For this contrived example, you 
can inject the dependency as follows.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:preformatted --&gt;
&lt;pre class=&quot;wp-block-preformatted&quot;&gt;class RateLimiter {&lt;br /&gt;   void writeToExternalService(&lt;br /&gt;       const vector&amp;lt;Entries&amp;gt;&amp;amp; stuff, &lt;br /&gt;       ExternalService service) {&lt;br /&gt;     for (auto entry : stuff) {&lt;br /&gt;       waitUntilQuotaAvailable();&lt;br /&gt;       service.write(entry);&lt;br /&gt;     }&lt;br /&gt;   }&lt;br /&gt;} &lt;/pre&gt;
&lt;!-- /wp:preformatted --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Your unit tests could do this:&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:preformatted --&gt;
&lt;pre class=&quot;wp-block-preformatted&quot;&gt;TEST(AwesomeTestCase, testWrite) {&lt;br /&gt;   vector&amp;lt;Entries&amp;gt; stuff = generateLotsOfStuff();&lt;br /&gt;   RateLimits limit;  // Set your limits here.&lt;br /&gt;   ExternalService svc = MockExternalService(limit);&lt;br /&gt;   RateLimiter rateLimiter = new RateLimiter(limit); &lt;br /&gt;   rateLimiter.writeToExternalService(stuff, svc);&lt;br /&gt;   ASSERT_TRUE(svc.writesWithinLimits()); &lt;br /&gt;} &lt;/pre&gt;
&lt;!-- /wp:preformatted --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;And you can put your implementation through the wringer without breaking a sweat.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;
</content>
 </entry>
 
 <entry>
   <title>The merits of unit tests — Part 2</title>
   <link href="//srikanth.sastry.name/the-merits-of-unit-tests-part-2/"/>
   <updated>2017-11-13T00:04:46+00:00</updated>
   <id>//srikanth.sastry.name/the-merits-of-unit-tests-part-2</id>
   <content type="html">&lt;!-- wp:paragraph --&gt;
&lt;p&gt;In the &lt;a href=&quot;http://srikanth.sastry.name/merits-of-unit-tests-part-1/&quot;&gt;previous post&lt;/a&gt;,  we saw how unit tests can serve as a reliable source of documentation  for your code. There is a lot more that unit tests can do for you. In this post I'll talk about a fairly obvious, but often ignored, benefit  to unit testing: Refactoring.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:more --&gt;
&lt;!--more--&gt;
&lt;!-- /wp:more --&gt;

&lt;!-- wp:paragraph {&quot;textColor&quot;:&quot;very-dark-gray&quot;,&quot;backgroundColor&quot;:&quot;pale-cyan-blue&quot;} --&gt;
&lt;p class=&quot;has-text-color has-background has-very-dark-gray-color has-pale-cyan-blue-background-color&quot;&gt;I posted this article on &lt;a href=&quot;https://www.linkedin.com/pulse/merits-unit-tests-part-2-srikanth-sastry/&quot;&gt;LinkedIn&lt;/a&gt; and am reposting it here cuz’ this is the authoritative source for it :)&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading {&quot;level&quot;:3} --&gt;
&lt;h3&gt;Refactoring&lt;/h3&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Refactoring is a less than pleasant, nevertheless, essential part of 
developing and maintaining high quality software. No matter how well 
designed your software is, over time a few things happen to it.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;1. The assumptions you made about the environment change, and that triggers unanticipated changes to your code.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:image {&quot;id&quot;:375,&quot;linkDestination&quot;:&quot;custom&quot;} --&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;a href=&quot;http://dilbert.com/strip/2011-05-16&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2019/01/dt_c110516-1024x319.gif&quot; alt=&quot;Boss: Did I remember to tell you before you finished the coding that the user's specifications changed? Dilbert: AAAIII-YIIIII-YIIII-YIII!!! Boss: So, no-ish? Dilbert: BAM! BAM! BAM! &quot; class=&quot;wp-image-375&quot; /&gt;&lt;/a&gt;&lt;/figure&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;&lt;em&gt;You started with the assumption that every account will have a 
unique username, but with the introduction of shared family-accounts, 
this may not be true anymore.&lt;/em&gt;&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;2. New/junior engineers make changes to the code that run antithetical to the original design.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:image {&quot;id&quot;:376} --&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2019/01/0.jpg&quot; alt=&quot;&quot; class=&quot;wp-image-376&quot; /&gt;&lt;/figure&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;&lt;em&gt;While you were out on vacation, your colleague's intern made a 
less-than well thought out change to add an session expiry feature to 
your code with a bunch of if-checks that see if the session has not 
already expired. By the the time you returned from your vacation, this 
code has been in production for two weeks, and you have more important 
things to do.&lt;/em&gt;&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;3. The software is co-opted for something that it was never intended for in the first place.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:image {&quot;id&quot;:377,&quot;linkDestination&quot;:&quot;custom&quot;} --&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;a href=&quot;http://www.gorillafabrication.com/modifications/16-repurposed-trucks-and-cars/&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2019/01/0-1.jpg&quot; alt=&quot;&quot; class=&quot;wp-image-377&quot; /&gt;&lt;/a&gt;&lt;/figure&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;&lt;em&gt;That awesome geo-spatial indexing service that you wrote for 
indexing cities became so popular that it is now being used to index 
stores in malls across the country, and to accommodate that, the schema 
now includes fields such as 'store name', 'floor number', etc. which 
make no sense in your original use case; it has just been shoehorned 
here.&lt;/em&gt;&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Every time any of those things happen, you accrue some tech debt, and
 eventually the tech debt gets so high that it start impeding your 
ability to make future changes. This is the point at which you have to 
redesign your software to reflect the new world it is in.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;In my experience, one of the most delicate things about refactoring 
such code is that you often have to rewrite the software but keep all of
 its existing behavior intact. Any failure to do so will start 
triggering failures in the system-at-large. Having good unit tests can 
be an indispensable asset. If, throughout the evolution of your 
software, there has been a diligent effort to keep the unit tests up to 
date and with sufficient code/path coverage, the task of refactoring 
becomes a lot easier.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:pullquote {&quot;className&quot;:&quot;is-style-default&quot;} --&gt;
&lt;figure class=&quot;wp-block-pullquote is-style-default&quot;&gt;&lt;blockquote&gt;&lt;p&gt;
  The rule of thumb is simply “As long as the unit tests pass, every iteration of your refactor is (most likely) correct.” 
&lt;/p&gt;&lt;/blockquote&gt;&lt;/figure&gt;
&lt;!-- /wp:pullquote --&gt;

&lt;!-- wp:image {&quot;id&quot;:379,&quot;align&quot;:&quot;center&quot;,&quot;linkDestination&quot;:&quot;custom&quot;} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;aligncenter&quot;&gt;&lt;a href=&quot;http://upload.wikimedia.org/wikipedia/commons/0/0b/TDD_Global_Lifecycle.png&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2019/01/refactoringg-884x1024.png&quot; alt=&quot;&quot; class=&quot;wp-image-379&quot; /&gt;&lt;/a&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Good unit tests can save you multiple days or even weeks of making 
incremental changes and testing them out in production in a gingerly 
fashion in ensure that nothing breaks.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;
</content>
 </entry>
 
 <entry>
   <title>My code is bugfree! Why should I unit test?</title>
   <link href="//srikanth.sastry.name/merits-of-unit-tests-part-1/"/>
   <updated>2017-11-01T20:33:01+00:00</updated>
   <id>//srikanth.sastry.name/merits-of-unit-tests-part-1</id>
   <content type="html">&lt;!-- wp:paragraph --&gt;
&lt;p&gt;There are multiple reasons to write unit tests. Verification is only one of them, and the least interesting. This is part 1 of a five part series on why you should write unit tests (apart from the obvious): Documentation!&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:more --&gt;
&lt;!--more--&gt;
&lt;!-- /wp:more --&gt;

&lt;!-- wp:paragraph {&quot;textColor&quot;:&quot;very-dark-gray&quot;,&quot;backgroundColor&quot;:&quot;pale-cyan-blue&quot;} --&gt;
&lt;p class=&quot;has-text-color has-background has-very-dark-gray-color has-pale-cyan-blue-background-color&quot;&gt;I posted this article on &lt;a href=&quot;https://www.linkedin.com/pulse/my-code-bugfree-why-should-i-unit-tests-srikanth-sastry/&quot;&gt;LinkedIn&lt;/a&gt; and am reposting it here cuz' this is the authoritative source for it :)&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;We have all heard this 
repeatedly: “You have to have unit tests. Unit tests are how you find 
issues in your code and fix them before they hit the trunk.” Ok, so that
 argument sounded a little weak. Here is a much stronger version of the 
same argument.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;&lt;em&gt;You have to write unit tests because unit tests are a &lt;/em&gt;&lt;a href=&quot;https://l.facebook.com/l.php?u=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FScientific_method&amp;amp;h=ATNU99lLyWx55l8BBlgT8AIDwdfUHBUjrSOtbRUQbP42vH_k7pVzTOXviC2N0Ze44RbFVdkFCWKSsvNoCovWLh8gaOuHG9eEAsu4GKloIbcHKwPbQdRFAdhFdNCPSDHmdBjCaYcBKEXAxhC-i735nThHQPOCEuD39p2iuu6K8bulWw&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;&lt;em&gt;scientific&lt;/em&gt;&lt;/a&gt;&lt;em&gt;
 mechanism to verify that your implementation satisfies the 
specification (that is, you code does what you say it does). To 
elaborate, your claim of what your code does is a &lt;/em&gt;&lt;a href=&quot;https://l.facebook.com/l.php?u=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FFalsifiability&amp;amp;h=ATPEcKK4eeXOCNWcc8BCYwdplxHx1zCDAuE74Z4TapMJOVwgCqukHCEuH21QaLSEGYvUA1ouxan-XttxS4n2cgnjJBzJY5CWV-quFVTNq18bpJSTq2l3NZyjuw2yd1-O3mWdupeKygwazafitDpYrhAWIt8nLBIlTkuxKG0nTn0oSA&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;&lt;em&gt;falsifiable&lt;/em&gt;&lt;/a&gt;&lt;em&gt;
 hypothesis in that it is possible to conceive of an observation that 
could negate your claim. Unit tests are the experiments that can be 
performed to test your hypothesis. If all your unit tests pass, then it 
is increasingly likely that your claim is correct. (Note that we cannot 
claim to have proved correctness; that is an impossible task in the 
general case).&lt;/em&gt;&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;This still an unsatisfying argument at best. What if I were a perfect
 developer who writes perfect code, and everyone around me agrees that I
 write perfect code. Do I still need to write unit tests? Or what about 
the cases where visual inspection of the code makes correctness obvious.
 Do I still need to spend precious time writing unit tests?&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;While verification is an important reason to have unit tests, IMHO, 
it is also the least interesting. There are many more reasons to be 
rigorous about unit tests.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Let's start with my favorite.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading {&quot;level&quot;:3} --&gt;
&lt;h3&gt;Documentation&lt;/h3&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:image {&quot;id&quot;:370,&quot;align&quot;:&quot;center&quot;,&quot;linkDestination&quot;:&quot;custom&quot;} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;aligncenter&quot;&gt;&lt;a href=&quot;http://www.quickmeme.com/meme/3t1i87&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2019/01/a0a8c4ab0bec170a748228f0982da6795e6af515a8048b11c2b4c9e794d7b4f9.jpg&quot; alt=&quot;&quot; class=&quot;wp-image-370&quot; /&gt;&lt;/a&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Unit tests makes the best documentation for your code. We were all 
hired as software engineers because we can write good software. That 
means a lot of us are not very good at technical writing, and for many 
of us, English isn't our native tongue. This creates barriers for us in 
communicating what our software does so that others can use it well.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;We could write wiki/docs describing what our code does, but that has three major issues.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:list {&quot;ordered&quot;:true} --&gt;
&lt;ol&gt;&lt;li&gt;The documentation doesn't live anywhere near the code, and so discoverability is difficult&lt;/li&gt;&lt;li&gt;English is not the primary language for a lot of us, and technical 
writing is not our strong suit, and so the quality of the writing can be
 suspect&lt;/li&gt;&lt;li&gt;As the code evolves, the documentation becomes obsolete. The only thing worse than no documentation is wrong documentation!&lt;/li&gt;&lt;/ol&gt;
&lt;!-- /wp:list --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;We could write comments in the code itself. So discoverability is not
 a problem. However, the other two issues still remain. (Raise your hand
 if you have seen comments that are out of sync with the code that it is
 supposed to clarify.)&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;What we could really use it a mechanism that leverages our strength 
(writing software) to create documentation, and automation to ensure 
that documentation is never obsolete. Unit tests turn out to be the 
perfect tool for this!&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Think of each unit test as a how-do example of how to use your code. 
So, if anyone wants to use the code that your wrote, all they need to do
 is look at your unit tests, the job is done!&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;&lt;strong&gt;EXAMPLE&lt;/strong&gt;&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;A great example is the &lt;a href=&quot;https://github.com/facebook/folly&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;folly&lt;/a&gt; library. Let's take folly Futures for instance. The primary header file &lt;a href=&quot;https://github.com/facebook/folly/blob/master/folly/futures/Future.h&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;Future.h&lt;/a&gt; tells you the API, but figuring out how to use it is not straightforward from there. However, go over to the unit tests at &lt;a href=&quot;https://l.facebook.com/l.php?u=https%3A%2F%2Fgithub.com%2Ffacebook%2Ffolly%2Fblob%2Fmaster%2Ffolly%2Ffutures%2Ftest%2FFutureTest.cpp&amp;amp;h=ATNiTV-rdTNS1lEjxiC29ETboF-w94bQpQhXUxFugGI897McF_YyCo-jvJX_kzLzDyVSjokYlYY9wbhcS4dJsTQlrgkVGXW8Fw7BBKx537cGoHDELiJcF4gBHMQq2CzZXV158ToPWPV0j0Xbt4WNDiLY13bFtRv7cWPEgKLJZsHe0Q&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;FutureTest.cpp&lt;/a&gt;,
 and you will come away knowing how to use Futures for your use case in a
 matter of minutes. For each minute spent by a folly developer to write 
these unit tests, it has saved thousands of developers countless hours.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:heading {&quot;level&quot;:3} --&gt;
&lt;h3&gt;But wait, there more!&lt;/h3&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;There are many other things that work better when you have unit tests.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:list --&gt;
&lt;ul&gt;&lt;li&gt;&lt;a rel=&quot;noreferrer noopener&quot; aria-label=&quot;Refactoring (opens in a new tab)&quot; href=&quot;http://srikanth.sastry.name/the-merits-of-unit-tests-part-2/&quot; target=&quot;_blank&quot;&gt;Refactoring&lt;/a&gt;.&lt;/li&gt;&lt;li&gt;&lt;a rel=&quot;noreferrer noopener&quot; href=&quot;https://www.linkedin.com/pulse/merits-unit-tests-part-3-srikanth-sastry/&quot; target=&quot;_blank&quot;&gt;Better code design.&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a rel=&quot;noreferrer noopener&quot; aria-label=&quot; (opens in a new tab)&quot; href=&quot;http://srikanth.sastry.name/unit-tests-ftw-part-4/&quot; target=&quot;_blank&quot;&gt;Debugging prod issues.&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;http://srikanth.sastry.name/merits-of-unit-tests-part-5/&quot;&gt;API usability&lt;/a&gt;.&lt;/li&gt;&lt;/ul&gt;
&lt;!-- /wp:list --&gt;
</content>
 </entry>
 
 <entry>
   <title>Small town Bulgaria</title>
   <link href="//srikanth.sastry.name/sevlievo/"/>
   <updated>2015-09-05T00:20:24+00:00</updated>
   <id>//srikanth.sastry.name/sevlievo</id>
   <content type="html">&lt;!-- wp:paragraph --&gt;
&lt;p&gt;I had a really good time visiting Mira's family in &lt;a href=&quot;https://en.wikipedia.org/wiki/Sevlievo&quot;&gt;Sevlievo, Bulgaria&lt;/a&gt;. &amp;nbsp;I am intrigued by the culture and sensibilities in small town Bulgaria.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;We started with visiting the old St. Prophet Eliah Church. The last place I was allowed to take photos was the entrance. It was pretty quaint on the inside, but we were not allowed to take any pictures.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:gallery {&quot;ids&quot;:[130,131],&quot;linkTo&quot;:&quot;attachment&quot;,&quot;align&quot;:&quot;center&quot;,&quot;className&quot;:&quot;aligncenter&quot;} --&gt;
&lt;ul class=&quot;wp-block-gallery aligncenter columns-2 is-cropped&quot;&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;a href=&quot;http://srikanth.sastry.name/sevlievo/img_20150828_100426/&quot;&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150828_100426-768x1024.jpg&quot; alt=&quot;&quot; data-id=&quot;130&quot; data-link=&quot;http://srikanth.sastry.name/sevlievo/img_20150828_100426/&quot; class=&quot;wp-image-130&quot; /&gt;&lt;/a&gt;&lt;figcaption&gt;St Prophet Eliah Church&lt;/figcaption&gt;&lt;/figure&gt;&lt;/li&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;a href=&quot;http://srikanth.sastry.name/sevlievo/img_20150828_100506/&quot;&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150828_100506-768x1024.jpg&quot; alt=&quot;&quot; data-id=&quot;131&quot; data-link=&quot;http://srikanth.sastry.name/sevlievo/img_20150828_100506/&quot; class=&quot;wp-image-131&quot; /&gt;&lt;/a&gt;&lt;figcaption&gt;Church entrance&lt;/figcaption&gt;&lt;/figure&gt;&lt;/li&gt;&lt;/ul&gt;
&lt;!-- /wp:gallery --&gt;

&lt;!-- wp:more --&gt;
&lt;!--more--&gt;
&lt;!-- /wp:more --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;There are a few more churches around the corner, and none are like the churches I am used to seeing in India and in the US.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:gallery {&quot;ids&quot;:[186,187]} --&gt;
&lt;ul class=&quot;wp-block-gallery columns-2 is-cropped&quot;&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_095912_low-1024x760.jpg&quot; alt=&quot;&quot; data-id=&quot;186&quot; data-link=&quot;http://srikanth.sastry.name/sevlievo/img_20150830_095912_low/&quot; class=&quot;wp-image-186&quot; /&gt;&lt;figcaption&gt;Another orthodox church&lt;/figcaption&gt;&lt;/figure&gt;&lt;/li&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_095706-1024x760.jpg&quot; alt=&quot;&quot; data-id=&quot;187&quot; data-link=&quot;http://srikanth.sastry.name/sevlievo/img_20150830_095706/&quot; class=&quot;wp-image-187&quot; /&gt;&lt;figcaption&gt;Yet another orthodox church&lt;/figcaption&gt;&lt;/figure&gt;&lt;/li&gt;&lt;/ul&gt;
&lt;!-- /wp:gallery --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Interestingly, the insignia on one of the church doors, often associated with the Byzantine empire, looked a lot like &lt;a href=&quot;https://en.wikipedia.org/wiki/Gandaberunda&quot;&gt;Gandaberunda&lt;/a&gt;, the official emblem of the state of &lt;a href=&quot;https://en.wikipedia.org/wiki/Karnataka&quot;&gt;Karnataka&lt;/a&gt;.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:gallery {&quot;ids&quot;:[194,360],&quot;align&quot;:&quot;center&quot;} --&gt;
&lt;ul class=&quot;wp-block-gallery aligncenter columns-2 is-cropped&quot;&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_095753-775x1024.jpg&quot; alt=&quot;&quot; data-id=&quot;194&quot; data-link=&quot;http://srikanth.sastry.name/sevlievo/img_20150830_095753/&quot; class=&quot;wp-image-194&quot; /&gt;&lt;figcaption&gt;Notice the double headed eagle on the church door&lt;/figcaption&gt;&lt;/figure&gt;&lt;/li&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2019/01/GBerunda.jpg&quot; alt=&quot;&quot; data-id=&quot;360&quot; data-link=&quot;http://srikanth.sastry.name/sevlievo/gberunda/&quot; class=&quot;wp-image-360&quot; /&gt;&lt;figcaption&gt;Karnataka state insignia&lt;/figcaption&gt;&lt;/figure&gt;&lt;/li&gt;&lt;/ul&gt;
&lt;!-- /wp:gallery --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;As I read up more about it, I discovered that two headed birds are ubiquitous in &lt;a href=&quot;https://en.wikipedia.org/wiki/Double-headed_eagle&quot;&gt;state insignias&lt;/a&gt; and &lt;a href=&quot;http://www.hubert-herald.nl/TwoHeadedEagle.htm&quot;&gt;mythologies&lt;/a&gt;.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;As it turns out, there is a mosque in town as well, but only muslims are allowed in. So this is pretty much all I got to see.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:image {&quot;id&quot;:135,&quot;align&quot;:&quot;center&quot;} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;aligncenter&quot;&gt;&lt;a href=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150828_102614.jpg&quot; rel=&quot;attachment wp-att-135&quot;&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150828_102614-450x334.jpg&quot; alt=&quot;Mosque&quot; class=&quot;wp-image-135&quot; /&gt;&lt;/a&gt;&lt;figcaption&gt;The only mosque in town, and we are not allowed in.&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Next, we head to the city center. The old town. Not the most happening place, but nice nevertheless. Mostly clean streets with plenty of space to relax and lounge. Here is a sample of small-town Bulgarian main streets.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:gallery {&quot;ids&quot;:[132,134,133,198],&quot;columns&quot;:2} --&gt;
&lt;ul class=&quot;wp-block-gallery columns-2 is-cropped&quot;&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150828_101405-1024x768.jpg&quot; alt=&quot;&quot; data-id=&quot;132&quot; data-link=&quot;http://srikanth.sastry.name/sevlievo/img_20150828_101405/&quot; class=&quot;wp-image-132&quot; /&gt;&lt;figcaption&gt;The main street continues on with businesses on either side&lt;/figcaption&gt;&lt;/figure&gt;&lt;/li&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150828_101504-1024x760.jpg&quot; alt=&quot;&quot; data-id=&quot;134&quot; data-link=&quot;http://srikanth.sastry.name/sevlievo/img_20150828_101504/&quot; class=&quot;wp-image-134&quot; /&gt;&lt;figcaption&gt;Start of a main street in town center largely for pedestrians&lt;/figcaption&gt;&lt;/figure&gt;&lt;/li&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150828_101414-1024x768.jpg&quot; alt=&quot;&quot; data-id=&quot;133&quot; data-link=&quot;http://srikanth.sastry.name/sevlievo/img_20150828_101414/&quot; class=&quot;wp-image-133&quot; /&gt;&lt;figcaption&gt;The other side of the same main street.&lt;/figcaption&gt;&lt;/figure&gt;&lt;/li&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_094414-1024x760.jpg&quot; alt=&quot;&quot; data-id=&quot;198&quot; data-link=&quot;http://srikanth.sastry.name/sevlievo/img_20150830_094414/&quot; class=&quot;wp-image-198&quot; /&gt;&lt;figcaption&gt;Notice the wide sidewalk , and benches to sit on.&lt;/figcaption&gt;&lt;/figure&gt;&lt;/li&gt;&lt;/ul&gt;
&lt;!-- /wp:gallery --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;The city center also has an impressive statue on a pillar. Apparently, the pillar it stands on is an original Roman pillar from the &lt;a href=&quot;https://en.wikipedia.org/wiki/Nicopolis_ad_Istrum&quot;&gt;Nicopolis ad Istrum&lt;/a&gt;, and the statue was made in Vienna.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:gallery {&quot;ids&quot;:[200,242],&quot;linkTo&quot;:&quot;attachment&quot;,&quot;align&quot;:&quot;center&quot;} --&gt;
&lt;ul class=&quot;wp-block-gallery aligncenter columns-2 is-cropped&quot;&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;a href=&quot;http://srikanth.sastry.name/sevlievo/img_20150830_093907/&quot;&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_093907-763x1024.jpg&quot; alt=&quot;&quot; data-id=&quot;200&quot; data-link=&quot;http://srikanth.sastry.name/sevlievo/img_20150830_093907/&quot; class=&quot;wp-image-200&quot; /&gt;&lt;/a&gt;&lt;figcaption&gt;The pillar is from Nicopolis ad Istrum&lt;/figcaption&gt;&lt;/figure&gt;&lt;/li&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;a href=&quot;http://srikanth.sastry.name/img_20150830_093927/&quot;&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_093927-1024x780.jpg&quot; alt=&quot;&quot; data-id=&quot;242&quot; data-link=&quot;http://srikanth.sastry.name/img_20150830_093927/&quot; class=&quot;wp-image-242&quot; /&gt;&lt;/a&gt;&lt;figcaption&gt;Close up of the statue from Vienna&lt;/figcaption&gt;&lt;/figure&gt;&lt;/li&gt;&lt;/ul&gt;
&lt;!-- /wp:gallery --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;In true European fashion, Sevlievo is also home to some old european houses that once belonged to the rich, but are now run down, but maintained. I remember seeing similar houses in New Castle Upon Tyne, Madrid, and other old cities in Europe.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:gallery {&quot;ids&quot;:[202,203]} --&gt;
&lt;ul class=&quot;wp-block-gallery columns-2 is-cropped&quot;&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_093339-1024x760.jpg&quot; alt=&quot;&quot; data-id=&quot;202&quot; data-link=&quot;http://srikanth.sastry.name/sevlievo/img_20150830_093339/&quot; class=&quot;wp-image-202&quot; /&gt;&lt;figcaption&gt;Medieval aristocrat's dwelling? At least, it looks like it.&lt;/figcaption&gt;&lt;/figure&gt;&lt;/li&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_095233-1024x760.jpg&quot; alt=&quot;&quot; data-id=&quot;203&quot; data-link=&quot;http://srikanth.sastry.name/sevlievo/img_20150830_095233/&quot; class=&quot;wp-image-203&quot; /&gt;&lt;figcaption&gt;Looks like an old time house whose owner was a rich and influential person.&lt;/figcaption&gt;&lt;/figure&gt;&lt;/li&gt;&lt;/ul&gt;
&lt;!-- /wp:gallery --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Interestingly, Sevlievo is also home to &lt;a href=&quot;http://www.bulgariainside.eu/en/articles/Sevlievos-Clock-Tower/542/1&quot;&gt;one of the oldest clock towers&lt;/a&gt; in Bulgaria, built in 1777/1779.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:image {&quot;id&quot;:136,&quot;align&quot;:&quot;center&quot;} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;aligncenter&quot;&gt;&lt;a href=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150828_104216.jpg&quot; rel=&quot;attachment wp-att-136&quot;&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150828_104216-334x450.jpg&quot; alt=&quot;Clock Tower&quot; class=&quot;wp-image-136&quot; /&gt;&lt;/a&gt;&lt;figcaption&gt;One of the oldest clock towers in Bulgaria.&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Moving on, the city also has a &quot;palace of culture&quot;, which ironically looks rather drab.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:image {&quot;id&quot;:205,&quot;align&quot;:&quot;center&quot;} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;aligncenter&quot;&gt;&lt;a href=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_094659.jpg&quot; rel=&quot;attachment wp-att-205&quot;&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_094659-450x334.jpg&quot; alt=&quot;Palace of culture&quot; class=&quot;wp-image-205&quot; /&gt;&lt;/a&gt;&lt;figcaption&gt;Palace of culture&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Speaking of culture, the town also has plenty of monuments and installations from the communist days. I was surprised by the monotony of these installations. Here is a sample to give you an idea of what I mean.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:gallery {&quot;ids&quot;:[210,209,208]} --&gt;
&lt;ul class=&quot;wp-block-gallery columns-3 is-cropped&quot;&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_103142-760x1024.jpg&quot; alt=&quot;&quot; data-id=&quot;210&quot; data-link=&quot;http://srikanth.sastry.name/sevlievo/img_20150830_103142/&quot; class=&quot;wp-image-210&quot; /&gt;&lt;/figure&gt;&lt;/li&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_102617-776x1024.jpg&quot; alt=&quot;&quot; data-id=&quot;209&quot; data-link=&quot;http://srikanth.sastry.name/sevlievo/img_20150830_102617/&quot; class=&quot;wp-image-209&quot; /&gt;&lt;/figure&gt;&lt;/li&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_094731-760x1024.jpg&quot; alt=&quot;&quot; data-id=&quot;208&quot; data-link=&quot;http://srikanth.sastry.name/sevlievo/img_20150830_094731/&quot; class=&quot;wp-image-208&quot; /&gt;&lt;/figure&gt;&lt;/li&gt;&lt;/ul&gt;
&lt;!-- /wp:gallery --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;In fact, it appears that everything was pretty monotonous during the communist days. Sevlievo retains some a of communist-era buildings that served as&amp;nbsp;stores and supermarkets. Here are a couple of them.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:gallery {&quot;ids&quot;:[213,214]} --&gt;
&lt;ul class=&quot;wp-block-gallery columns-2 is-cropped&quot;&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_103711-1024x760.jpg&quot; alt=&quot;&quot; data-id=&quot;213&quot; data-link=&quot;http://srikanth.sastry.name/sevlievo/img_20150830_103711/&quot; class=&quot;wp-image-213&quot; /&gt;&lt;/figure&gt;&lt;/li&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_103722-1024x760.jpg&quot; alt=&quot;&quot; data-id=&quot;214&quot; data-link=&quot;http://srikanth.sastry.name/sevlievo/img_20150830_103722/&quot; class=&quot;wp-image-214&quot; /&gt;&lt;/figure&gt;&lt;/li&gt;&lt;/ul&gt;
&lt;!-- /wp:gallery --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;For contrast, compare them to the new bookstore that right down the street.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:image {&quot;id&quot;:215,&quot;align&quot;:&quot;center&quot;} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;aligncenter&quot;&gt;&lt;a href=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_103805.jpg&quot; rel=&quot;attachment wp-att-215&quot;&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_103805-334x450.jpg&quot; alt=&quot;The bookstore looks a lot more like in the west.&quot; class=&quot;wp-image-215&quot; /&gt;&lt;/a&gt;&lt;figcaption&gt;The bookstore looks a lot more like in the west.&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Among all the things uniquely Bulgarian, the most intriguing is the death notice. We are all familiar with the &lt;a href=&quot;https://en.wikipedia.org/wiki/Obituary&quot;&gt;obituary section&lt;/a&gt; in the newspapers. In Bulgaria, there are such obituary notices all over town to announce a death, or a death anniversary. For instance, here is a tree that is used as a obituary notice board.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:image {&quot;id&quot;:212,&quot;align&quot;:&quot;center&quot;} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;aligncenter&quot;&gt;&lt;a href=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_093301.jpg&quot; rel=&quot;attachment wp-att-212&quot;&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_093301-334x450.jpg&quot; alt=&quot;A tree trunk used as a obituary notice board&quot; class=&quot;wp-image-212&quot; /&gt;&lt;/a&gt;&lt;figcaption&gt;A tree trunk used as a obituary notice board.&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;People also post similar notices on the doors of their homes as well, and at times, it is accompanied by a black ribbon tie.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:gallery {&quot;ids&quot;:[297,298],&quot;columns&quot;:2,&quot;linkTo&quot;:&quot;attachment&quot;} --&gt;
&lt;ul class=&quot;wp-block-gallery columns-2 is-cropped&quot;&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150830_104750.jpg&quot; alt=&quot;&quot; data-id=&quot;297&quot; class=&quot;wp-image-297&quot; /&gt;&lt;/figure&gt;&lt;/li&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150901_185800.jpg&quot; alt=&quot;&quot; data-id=&quot;298&quot; class=&quot;wp-image-298&quot; /&gt;&lt;/figure&gt;&lt;/li&gt;&lt;/ul&gt;
&lt;!-- /wp:gallery --&gt;
</content>
 </entry>
 
 <entry>
   <title>Shipka Memorial Church</title>
   <link href="//srikanth.sastry.name/shipka-memorial-church/"/>
   <updated>2015-09-04T16:20:51+00:00</updated>
   <id>//srikanth.sastry.name/shipka-memorial-church</id>
   <content type="html">&lt;!-- wp:paragraph --&gt;
&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Shipka_Memorial_Church&quot;&gt;Shipka memorial church&lt;/a&gt; is a Bulgarian Orthodox church built in the style of a Russian Orthodox church.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:image {&quot;id&quot;:283,&quot;align&quot;:&quot;center&quot;,&quot;linkDestination&quot;:&quot;attachment&quot;} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;aligncenter&quot;&gt;&lt;a href=&quot;http://srikanth.sastry.name/shipka-memorial-church/img_20150901_134154/&quot;&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/09/IMG_20150901_134154-334x450.jpg&quot; alt=&quot;The front of the Shipka Memorial Church&quot; class=&quot;wp-image-283&quot; /&gt;&lt;/a&gt;&lt;figcaption&gt;The front of the Shipka Memorial Church&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;It was build during late 19th century as a dedication to the Bulgarian, Russian, and Ukrainian soldiers who lost their lives in liberating Bulgaria from the &lt;a href=&quot;https://en.wikipedia.org/wiki/Ottoman_Empire&quot;&gt;Ottoman empire&lt;/a&gt;. The gold plated domes are of typical Muscovite style from the late 19th century.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:more --&gt;
&lt;!--more--&gt;
&lt;!-- /wp:more --&gt;

&lt;!-- wp:gallery {&quot;ids&quot;:[284,285,286],&quot;columns&quot;:1,&quot;linkTo&quot;:&quot;attachment&quot;} --&gt;
&lt;ul class=&quot;wp-block-gallery columns-1 is-cropped&quot;&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/09/IMG_20150901_134301.jpg&quot; alt=&quot;&quot; data-id=&quot;284&quot; class=&quot;wp-image-284&quot; /&gt;&lt;/figure&gt;&lt;/li&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/09/IMG_20150901_135548.jpg&quot; alt=&quot;&quot; data-id=&quot;285&quot; class=&quot;wp-image-285&quot; /&gt;&lt;/figure&gt;&lt;/li&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/09/IMG_20150901_135851.jpg&quot; alt=&quot;&quot; data-id=&quot;286&quot; class=&quot;wp-image-286&quot; /&gt;&lt;/figure&gt;&lt;/li&gt;&lt;/ul&gt;
&lt;!-- /wp:gallery --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;The inside, however, looks a lot like a &lt;a href=&quot;https://en.wikipedia.org/wiki/Bulgarian_Orthodox_Church&quot;&gt;Bulgarian Orthodox church&lt;/a&gt;.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:gallery {&quot;ids&quot;:[290,289,291],&quot;columns&quot;:1,&quot;linkTo&quot;:&quot;attachment&quot;} --&gt;
&lt;ul class=&quot;wp-block-gallery columns-1 is-cropped&quot;&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/09/IMG_20150901_135343.jpg&quot; alt=&quot;&quot; data-id=&quot;290&quot; class=&quot;wp-image-290&quot; /&gt;&lt;/figure&gt;&lt;/li&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/09/IMG_20150901_135329.jpg&quot; alt=&quot;&quot; data-id=&quot;289&quot; class=&quot;wp-image-289&quot; /&gt;&lt;/figure&gt;&lt;/li&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/09/IMG_20150901_135423.jpg&quot; alt=&quot;&quot; data-id=&quot;291&quot; class=&quot;wp-image-291&quot; /&gt;&lt;/figure&gt;&lt;/li&gt;&lt;/ul&gt;
&lt;!-- /wp:gallery --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;There is a crypt in the basement that has graves that serves as a memorial for and contains remains of&amp;nbsp;the soldiers who lost their lives in &lt;a href=&quot;https://en.wikipedia.org/wiki/Battle_of_Shipka_Pass&quot;&gt;battles of Shipka Pass&lt;/a&gt; during the &lt;a href=&quot;https://en.wikipedia.org/wiki/Russo-Turkish_War_(1877%E2%80%9378)&quot;&gt;Russo-Turkish war&lt;/a&gt;.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:gallery {&quot;ids&quot;:[294,293],&quot;columns&quot;:1,&quot;linkTo&quot;:&quot;attachment&quot;} --&gt;
&lt;ul class=&quot;wp-block-gallery columns-1 is-cropped&quot;&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/09/IMG_20150901_135137.jpg&quot; alt=&quot;&quot; data-id=&quot;294&quot; class=&quot;wp-image-294&quot; /&gt;&lt;/figure&gt;&lt;/li&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/09/IMG_20150901_135040.jpg&quot; alt=&quot;&quot; data-id=&quot;293&quot; class=&quot;wp-image-293&quot; /&gt;&lt;/figure&gt;&lt;/li&gt;&lt;/ul&gt;
&lt;!-- /wp:gallery --&gt;
</content>
 </entry>
 
 <entry>
   <title>Troyan Monastery</title>
   <link href="//srikanth.sastry.name/troyan-monastery/"/>
   <updated>2015-08-31T23:26:17+00:00</updated>
   <id>//srikanth.sastry.name/troyan-monastery</id>
   <content type="html">&lt;!-- wp:paragraph --&gt;
&lt;p&gt;If you are in northern Bulgarian, I recommend stopping by &lt;a href=&quot;https://en.wikipedia.org/wiki/Troyan_Monastery&quot;&gt;Troyan Monastery&lt;/a&gt;.&amp;nbsp;&amp;nbsp;It is definitely worth a couple of hours of your time.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Walking up to it, the entrance is fairly simplistic, which is to be expected from a monastery.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:image {&quot;id&quot;:259,&quot;align&quot;:&quot;center&quot;} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;aligncenter&quot;&gt;&lt;a href=&quot;/troyan-monastery/img_20150831_154933/&quot;&gt;&lt;img src=&quot;/wp-content/uploads/2015/08/IMG_20150831_154933-1024x760.jpg&quot; alt=&quot;The entrance to Troyan Monastery; very simple, as expected. However, your attention diverts to the mosaic to the left.&quot; class=&quot;wp-image-259&quot; /&gt;&lt;/a&gt;&lt;figcaption&gt;The entrance to Troyan Monastery; very simple, as expected. However, your attention diverts to the mosaic to the left.&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;The mosaic on top of the left entrance doorway is a new modern day recreation of a roman style mosaic of virgin Mary with baby Christ.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:more --&gt;
&lt;!--more--&gt;
&lt;!-- /wp:more --&gt;

&lt;!-- wp:image {&quot;id&quot;:261,&quot;align&quot;:&quot;center&quot;} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;aligncenter&quot;&gt;&lt;a href=&quot;/wp-content/uploads/2015/08/IMG_20150831_155017.jpg&quot;&gt;&lt;img src=&quot;/wp-content/uploads/2015/08/IMG_20150831_155017-760x1024.jpg&quot; alt=&quot;Roman-style mosaic of virgin Mary and baby Christ.&quot; class=&quot;wp-image-261&quot; /&gt;&lt;/a&gt;&lt;figcaption&gt;Roman-style mosaic of virgin Mary and baby Christ.&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Virgin Mary has a special place in this monastery. The church here is home to the three handed virgin. Here is an &lt;a href=&quot;https://en.wikipedia.org/wiki/Troyan_Monastery#/media/File:Three_Handed_Virgin_of_Troyan_Monastery.JPG&quot;&gt;image of it from wikipedia&lt;/a&gt;.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:image {&quot;align&quot;:&quot;center&quot;} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;aligncenter&quot;&gt;&lt;a href=&quot;https://upload.wikimedia.org/wikipedia/commons/d/d8/Three_Handed_Virgin_of_Troyan_Monastery.JPG&quot;&gt;&lt;img src=&quot;https://upload.wikimedia.org/wikipedia/commons/d/d8/Three_Handed_Virgin_of_Troyan_Monastery.JPG&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;figcaption&gt;Three handed virgin; considered holy in Bulgarian Orthodox Christianity. Maybe the artist was tripping and drew 3 hands, which then became holy. [Image source: wikipedia]&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;The dwellings in the monastery are simple as well.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:image {&quot;id&quot;:264,&quot;align&quot;:&quot;center&quot;} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;aligncenter&quot;&gt;&lt;a href=&quot;/wp-content/uploads/2015/08/IMG_20150831_160245.jpg&quot;&gt;&lt;img src=&quot;/wp-content/uploads/2015/08/IMG_20150831_160245-1024x760.jpg&quot; alt=&quot;Simple, but adequate, dwellings in the monastery.&quot; class=&quot;wp-image-264&quot; /&gt;&lt;/a&gt;&lt;figcaption&gt;Simple, but adequate, dwellings in the monastery.&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;The only splash of &quot;opulence&quot; I saw among the dwellings was this&amp;nbsp;fresco.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:image {&quot;id&quot;:265,&quot;align&quot;:&quot;center&quot;} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;aligncenter&quot;&gt;&lt;a href=&quot;/wp-content/uploads/2015/08/IMG_20150831_160420.jpg&quot;&gt;&lt;img src=&quot;/wp-content/uploads/2015/08/IMG_20150831_160420-1024x760.jpg&quot; alt=&quot;19th century style fresco among the monastery rooms&quot; class=&quot;wp-image-265&quot; /&gt;&lt;/a&gt;&lt;figcaption&gt;19th century style fresco among the monastery rooms&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;However, the church located in the middle is pretty impressive. It built on a low elevation, much like many other churches build during the Ottoman rule. This is largely because the law during the Ottoman rule was that no church should be taller than the mosque in town, and so churches were build at low elevation so that they can build high ceilings without it looming higher than the local mosque.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Here is are views of the outer walls of the church from the lower ground level, and from a higher elevation.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;p&gt;&lt;a href=&quot;/wp-content/uploads/2015/08/IMG_20150831_155051.jpg&quot;&gt;&lt;img src=&quot;/wp-content/uploads/2015/08/IMG_20150831_155051.jpg&quot; alt=&quot;View of the church from the ground level that is lower than the surrounding land&quot; /&gt;&lt;/a&gt;
&lt;em&gt;View of the church from the ground level that is lower than the surrounding land&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/wp-content/uploads/2015/08/IMG_20150831_160950.jpg&quot;&gt;&lt;img src=&quot;/wp-content/uploads/2015/08/IMG_20150831_160950.jpg&quot; alt=&quot;View of the church from a higher level (from the patriarchs’ graves)&quot; /&gt;&lt;/a&gt;
&lt;em&gt;View of the church from a higher level (from the patriarchs’ graves).&lt;/em&gt;&lt;/p&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;It is the 19th century frescos that impress the most. The pillars along the entrance walls make a favorable first impression.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;p&gt;&lt;a href=&quot;/wp-content/uploads/2015/08/IMG_20150831_155120.jpg&quot;&gt;&lt;img src=&quot;/wp-content/uploads/2015/08/IMG_20150831_155120.jpg&quot; alt=&quot;Notice the paintings along the frieze&quot; /&gt;&lt;/a&gt;
&lt;em&gt;Notice the paintings along the frieze&lt;/em&gt;
&lt;a href=&quot;/wp-content/uploads/2015/08/IMG_20150831_160219.jpg&quot;&gt;&lt;img src=&quot;/wp-content/uploads/2015/08/IMG_20150831_160219.jpg&quot; alt=&quot;Another view of the frieze along both entrances to the church&quot; /&gt;&lt;/a&gt;
&lt;em&gt;Another view of the frieze along both entrances to the church&lt;/em&gt;&lt;/p&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;However, it is the frescos along the walls and ceilings both inside and outside the church that impress the most. While I did not take any photographs of the inside, here is a collection of the frescos on the outside that should give you an inkling of what lies inside the church.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;p&gt;&lt;a href=&quot;/wp-content/uploads/2015/08/IMG_20150831_155159.jpg&quot;&gt;&lt;img src=&quot;/wp-content/uploads/2015/08/IMG_20150831_155159.jpg&quot; alt=&quot;Fresco with a skeleton rowing in a sarcophagus and a fish in it swallowing a person. I have no idea what this is about.&quot; /&gt;&lt;/a&gt;
&lt;em&gt;Fresco with a skeleton rowing in a sarcophagus and a fish in it swallowing a person. I have no idea what this is about.&lt;/em&gt;
&lt;a href=&quot;/wp-content/uploads/2015/08/IMG_20150831_155216.jpg&quot;&gt;&lt;img src=&quot;/wp-content/uploads/2015/08/IMG_20150831_155216.jpg&quot; alt=&quot;This is a continuation of fresco along the ceiling.&quot; /&gt;&lt;/a&gt;
&lt;em&gt;This is a continuation of fresco along the ceiling.&lt;/em&gt;
&lt;a href=&quot;/wp-content/uploads/2015/08/IMG_20150831_155247.jpg&quot;&gt;&lt;img src=&quot;/wp-content/uploads/2015/08/IMG_20150831_155247.jpg&quot; alt=&quot;Another fresco at another part of the ceiling.&quot; /&gt;&lt;/a&gt;
&lt;em&gt;Another fresco at another part of the ceiling.&lt;/em&gt;&lt;/p&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;You will be much more impressed with what's inside the church. It is covered in murals along all walls and&amp;nbsp;ceiling.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;At the side of the church, I came across a small entrance with some writing on it.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:image {&quot;id&quot;:271,&quot;align&quot;:&quot;center&quot;} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;aligncenter&quot;&gt;&lt;a href=&quot;/wp-content/uploads/2015/08/IMG_20150831_160632.jpg&quot;&gt;&lt;img src=&quot;/wp-content/uploads/2015/08/IMG_20150831_160632-1024x760.jpg&quot; alt=&quot;A sign that says that inside lies the bones of monks, freedom fighter, and area orthodox christians&quot; class=&quot;wp-image-271&quot; /&gt;&lt;/a&gt;&lt;figcaption&gt;A sign that says that inside lies the bones of monks, freedom fighters, and area orthodox christians&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Based on the sign at the entrance, I had to go see it for myself, and it did not disappoint.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:image {&quot;id&quot;:272,&quot;align&quot;:&quot;center&quot;} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;aligncenter&quot;&gt;&lt;a href=&quot;/wp-content/uploads/2015/08/IMG_20150831_160549.jpg&quot;&gt;&lt;img src=&quot;/wp-content/uploads/2015/08/IMG_20150831_160549-760x1024.jpg&quot; alt=&quot;The bones, as promised.&quot; class=&quot;wp-image-272&quot; /&gt;&lt;/a&gt;&lt;figcaption&gt;The bones, as promised.&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;The place also has a separate section for the patriarchs' graves, and a bell tower, but it really didn't offer much to an atheist tourist :)&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:gallery {&quot;ids&quot;:[274,275],&quot;columns&quot;:2,&quot;linkTo&quot;:&quot;attachment&quot;} --&gt;
&lt;figure&gt;&lt;img src=&quot;/wp-content/uploads/2015/08/IMG_20150831_161018.jpg&quot; alt=&quot;&quot; data-id=&quot;274&quot; class=&quot;wp-image-274&quot; /&gt;&lt;/figure&gt;
&lt;figure&gt;&lt;img src=&quot;/wp-content/uploads/2015/08/IMG_20150831_161112.jpg&quot; alt=&quot;&quot; data-id=&quot;275&quot; class=&quot;wp-image-275&quot; /&gt;&lt;/figure&gt;
&lt;!-- /wp:gallery --&gt;
</content>
 </entry>
 
 <entry>
   <title>Hitar Petar</title>
   <link href="//srikanth.sastry.name/hitar-petar/"/>
   <updated>2015-08-31T19:28:06+00:00</updated>
   <id>//srikanth.sastry.name/hitar-petar</id>
   <content type="html">&lt;p&gt;&lt;a href=&quot;http://hitar-petar.com/&quot;&gt;Hitar Pitar&lt;/a&gt; is a quaint little restaurant and hotel in the village of Beli Osam in Bulgaria (close to the Troyan Monastery). It has a neat collection of decorative artifacts that make for an interesting collection of photos.&lt;/p&gt;

&lt;p&gt;The restaurant is located on the banks of the Beli Osam river.
&lt;a href=&quot;/wp-content/uploads/2015/08/IMG_20150831_140829.jpg&quot;&gt;&lt;img src=&quot;/wp-content/uploads/2015/08/IMG_20150831_140829.jpg&quot; alt=&quot;Hitar Petar restaurant as seen from across the river&quot; /&gt;&lt;/a&gt;
&lt;em&gt;Hitar Petar restaurant as seen from across the river&lt;/em&gt;&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;Across the river, on the other bank, we see an interesting decoration; it is a 2.5D fresco/mural of a house, a man on a donkey, a water wheel, and a wooden window A/C unit. Check it out.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/wp-content/uploads/2015/08/IMG_20150831_135241.jpg&quot;&gt;&lt;img src=&quot;/wp-content/uploads/2015/08/IMG_20150831_135241.jpg&quot; alt=&quot; 2.5D mural/fresco of Aahouse and a man on a donkey&quot; title=&quot;2.5D mural/fresco of Aahouse and a man on a donkey&quot; /&gt;&lt;/a&gt;
&lt;em&gt;2.5D mural/fresco of Aahouse and a man on a donkey&lt;/em&gt;
&lt;a href=&quot;/wp-content/uploads/2015/08/IMG_20150831_135210.jpeg&quot;&gt;&lt;img src=&quot;/wp-content/uploads/2015/08/IMG_20150831_135210.jpeg&quot; alt=&quot;Water wheel and wooden AC unit pasted on the wall&quot; title=&quot;Water wheel and wooden AC unit pasted on the wall&quot; /&gt;&lt;/a&gt;
&lt;em&gt;Water wheel and wooden AC unit pasted on the wall&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;At the entrance to the restaurant is a wooden cannon made from the trunk of a cherry tree.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/wp-content/uploads/2015/08/IMG_20150831_151627.jpg&quot;&gt;&lt;img src=&quot;/wp-content/uploads/2015/08/IMG_20150831_151627.jpg&quot; alt=&quot;Cannon made from Cherry tree trunk&quot; /&gt;&lt;/a&gt;
&lt;em&gt;Cannon made from Cherry tree trunk&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;To the right is an outdoor chapel that looks a lot like a small temple in rural india.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/wp-content/uploads/2015/08/IMG_20150831_151540.jpg&quot;&gt;&lt;img src=&quot;/wp-content/uploads/2015/08/IMG_20150831_151540.jpg&quot; alt=&quot;Chapel to the right of the wooden cannon&quot; /&gt;&lt;/a&gt;
&lt;em&gt;Chapel to the right of the wooden cannon&lt;/em&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Tsarevets: a photo essay</title>
   <link href="//srikanth.sastry.name/tsarevets-a-photo-essay/"/>
   <updated>2015-08-30T13:25:07+00:00</updated>
   <id>//srikanth.sastry.name/tsarevets-a-photo-essay</id>
   <content type="html">&lt;!-- wp:paragraph {&quot;className&quot;:&quot;firstHeading&quot;} --&gt;
&lt;p class=&quot;firstHeading&quot;&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Tsarevets_(fortress)&quot;&gt;Tsarevets fortress&lt;/a&gt; was a medieval stronghold of the erstwhile &lt;a href=&quot;https://en.wikipedia.org/wiki/Second_Bulgarian_Empire&quot;&gt;Second Bulgarian Empire&lt;/a&gt; located near the city of&amp;nbsp;&lt;a href=&quot;https://en.wikipedia.org/wiki/Veliko_Tarnovo&quot;&gt;Veliko Tarnovo&lt;/a&gt;&amp;nbsp;(which was also the capital city of that empire).&amp;nbsp;While the fortress is in ruins, the recent reconstructions and restorations make it worth visiting.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:image {&quot;id&quot;:141,&quot;align&quot;:&quot;none&quot;} --&gt;
&lt;figure class=&quot;wp-block-image alignnone&quot;&gt;&lt;a href=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150829_110825-e1440950848706.jpg&quot;&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150829_110825-e1440950848706.jpg&quot; alt=&quot;View of the fortress from the city.&quot; class=&quot;wp-image-141&quot; /&gt;&lt;/a&gt;&lt;figcaption&gt;View of the fortress from the city.&lt;/figcaption&gt;&lt;/figure&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;The fortress itself is situated on top of a hill of the same name. The stronghold consisted of two forts, one on each hill. You can see the ruins of the second fort on the hill in the left hand side of the photograph above. The second fort is not reconstructed well enough to attract tourists.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Let's step inside.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:more --&gt;
&lt;!--more--&gt;
&lt;!-- /wp:more --&gt;

&lt;!-- wp:heading --&gt;
&lt;h2&gt;Entry&lt;/h2&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:image {&quot;id&quot;:142,&quot;align&quot;:&quot;none&quot;} --&gt;
&lt;figure class=&quot;wp-block-image alignnone&quot;&gt;&lt;a href=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150829_111416.jpg&quot;&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150829_111416-1024x760.jpg&quot; alt=&quot;You enter the fort complex from the city on a ridge&quot; class=&quot;wp-image-142&quot; /&gt;&lt;/a&gt;&lt;figcaption&gt;You enter the fort complex from the city on a ridge&lt;/figcaption&gt;&lt;/figure&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;The ridge separating the fortress and the city is more apparent when viewing the city from inside the fort.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:image {&quot;id&quot;:143,&quot;align&quot;:&quot;none&quot;} --&gt;
&lt;figure class=&quot;wp-block-image alignnone&quot;&gt;&lt;a href=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150829_112018.jpg&quot;&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150829_112018-1024x760.jpg&quot; alt=&quot;Notice the ridge that connects Veliko Tarnovo city to the fortress&quot; class=&quot;wp-image-143&quot; /&gt;&lt;/a&gt;&lt;figcaption&gt;Notice the ridge that connects Veliko Tarnovo city to the fortress.&lt;/figcaption&gt;&lt;/figure&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;From the Tsarevets fortress, you can see parts of the reconstructions of the second fortress (Trapezitsa) on the neighboring hill.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:image {&quot;id&quot;:145,&quot;align&quot;:&quot;none&quot;} --&gt;
&lt;figure class=&quot;wp-block-image alignnone&quot;&gt;&lt;a href=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150829_112024.jpg&quot;&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150829_112024-e1440951061942.jpg&quot; alt=&quot;Reconstructed watch tower of Trapezitsa as seen from Tsarevets.&quot; class=&quot;wp-image-145&quot; /&gt;&lt;/a&gt;&lt;figcaption&gt;Reconstructed watch tower on Trapezitsa as seen from Tsarevets.&lt;/figcaption&gt;&lt;/figure&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:heading --&gt;
&lt;h2&gt;Ruins&lt;/h2&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;The ruins in the fortress have been well preserved, for the most part.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:image {&quot;id&quot;:146,&quot;align&quot;:&quot;none&quot;} --&gt;
&lt;figure class=&quot;wp-block-image alignnone&quot;&gt;&lt;a href=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150829_122506.jpg&quot;&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150829_122506-e1440951090373.jpg&quot; alt=&quot;Well preserved ruins&quot; class=&quot;wp-image-146&quot; /&gt;&lt;/a&gt;&lt;figcaption&gt;Well preserved ruins.&lt;/figcaption&gt;&lt;/figure&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:image {&quot;id&quot;:147,&quot;align&quot;:&quot;none&quot;} --&gt;
&lt;figure class=&quot;wp-block-image alignnone&quot;&gt;&lt;a href=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150829_123317-e1440951114883.jpg&quot;&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150829_123317-e1440951114883.jpg&quot; alt=&quot;Most of these ruins were civilian buildings. After all this was the capital city.&quot; class=&quot;wp-image-147&quot; /&gt;&lt;/a&gt;&lt;figcaption&gt;Most of these ruins were civilian buildings. After all this was part of the capital city.&lt;/figcaption&gt;&lt;/figure&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:heading --&gt;
&lt;h2&gt;Reconstructions&lt;/h2&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Also, there are a lot of reconstructions, especially along the outer wall of the fortress.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:image {&quot;id&quot;:148,&quot;align&quot;:&quot;left&quot;} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;alignleft&quot;&gt;&lt;a href=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150829_120235-e1440951134858.jpg&quot;&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150829_120235-e1440951134858.jpg&quot; alt=&quot;This is a reconstructed small chamber attached to outer wall.&quot; class=&quot;wp-image-148&quot; /&gt;&lt;/a&gt;&lt;figcaption&gt;This is a reconstructed small chamber attached to outer wall.&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:image {&quot;id&quot;:149,&quot;align&quot;:&quot;left&quot;} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;alignleft&quot;&gt;&lt;a href=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150829_122451-e1440951158106.jpg&quot;&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150829_122451-e1440951158106.jpg&quot; alt=&quot;Only the outer wall is reconstructed. The inner buildings' ruins remain as just plans on the ground.&quot; class=&quot;wp-image-149&quot; /&gt;&lt;/a&gt;&lt;figcaption&gt;Only the outer wall is reconstructed. The inner buildings' ruins remain as just plans on the ground.&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:image {&quot;id&quot;:150,&quot;align&quot;:&quot;left&quot;} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;alignleft&quot;&gt;&lt;a href=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150829_122457-e1440951268695.jpg&quot;&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150829_122457-e1440951268695.jpg&quot; alt=&quot;Part of the outer wall is reconstructed. Notice the reconstructed turret.&quot; class=&quot;wp-image-150&quot; /&gt;&lt;/a&gt;&lt;figcaption&gt;Part of the outer wall is reconstructed. Notice the reconstructed turret.&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:image {&quot;id&quot;:151,&quot;align&quot;:&quot;left&quot;} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;alignleft&quot;&gt;&lt;a href=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150829_123355.jpg&quot;&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150829_123355-e1440951294652.jpg&quot; alt=&quot;The outer wall reconstruction is impressive. Notice the reconstructed watch tower&quot; class=&quot;wp-image-151&quot; /&gt;&lt;/a&gt;&lt;figcaption&gt;The outer wall reconstruction is impressive. Notice the reconstructed watch tower and a reconstructed turret.&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:heading --&gt;
&lt;h2&gt;Church&lt;/h2&gt;
&lt;!-- /wp:heading --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;At the top of the fortress is a reconstruction of the church that once stood there. The church is called the &lt;a href=&quot;https://en.wikipedia.org/wiki/Patriarchal_Cathedral_of_the_Holy_Ascension_of_God&quot;&gt;Patriarchal Cathedral of the Holy Ascension of God&lt;/a&gt;. It was built in the place of an early Christian church.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:image {&quot;id&quot;:152,&quot;align&quot;:&quot;none&quot;} --&gt;
&lt;figure class=&quot;wp-block-image alignnone&quot;&gt;&lt;a href=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150829_115024-e1440951320333.jpg&quot;&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150829_115024-e1440951320333.jpg&quot; alt=&quot;The reconstructed church. While the outside looks simple, the inside is simply beautiful.&quot; class=&quot;wp-image-152&quot; /&gt;&lt;/a&gt;&lt;figcaption&gt;The reconstructed church. &lt;br /&gt;While the outside looks simple, the inside is simply beautiful.&lt;/figcaption&gt;&lt;/figure&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;When you step inside the church, you realize that this is really not a reconstruction, but in fact, a complete reimagining of an early christian church with a modernist abstract expression.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;For instance, consider this painting of Christ&amp;nbsp;at the altar.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:image {&quot;id&quot;:153,&quot;align&quot;:&quot;none&quot;} --&gt;
&lt;figure class=&quot;wp-block-image alignnone&quot;&gt;&lt;a href=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150829_113900.jpg&quot;&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150829_113900-760x1024.jpg&quot; alt=&quot;Christ and Mary at the altar of the church. The style is very modernist.&quot; class=&quot;wp-image-153&quot; /&gt;&lt;/a&gt;&lt;figcaption&gt;Christ and Mary at the altar of the church. The style is very modernist.&lt;/figcaption&gt;&lt;/figure&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;The murals along the walls and ceilings are absolutely stunning. Take a look.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:gallery {&quot;ids&quot;:[160,159,158,157,156,155,154]} --&gt;
&lt;ul class=&quot;wp-block-gallery columns-3 is-cropped&quot;&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150829_114523-760x1024.jpg&quot; alt=&quot;&quot; data-id=&quot;160&quot; data-link=&quot;http://srikanth.sastry.name/tsarevets-a-photo-essay/img_20150829_114523/&quot; class=&quot;wp-image-160&quot; /&gt;&lt;/figure&gt;&lt;/li&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150829_114123-e1440929171895-1024x760.jpg&quot; alt=&quot;&quot; data-id=&quot;159&quot; data-link=&quot;http://srikanth.sastry.name/tsarevets-a-photo-essay/img_20150829_114123/&quot; class=&quot;wp-image-159&quot; /&gt;&lt;/figure&gt;&lt;/li&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150829_114056-760x1024.jpg&quot; alt=&quot;&quot; data-id=&quot;158&quot; data-link=&quot;http://srikanth.sastry.name/tsarevets-a-photo-essay/img_20150829_114056/&quot; class=&quot;wp-image-158&quot; /&gt;&lt;/figure&gt;&lt;/li&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150829_114014-760x1024.jpg&quot; alt=&quot;&quot; data-id=&quot;157&quot; data-link=&quot;http://srikanth.sastry.name/tsarevets-a-photo-essay/img_20150829_114014/&quot; class=&quot;wp-image-157&quot; /&gt;&lt;/figure&gt;&lt;/li&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150829_113946-760x1024.jpg&quot; alt=&quot;&quot; data-id=&quot;156&quot; data-link=&quot;http://srikanth.sastry.name/tsarevets-a-photo-essay/img_20150829_113946/&quot; class=&quot;wp-image-156&quot; /&gt;&lt;/figure&gt;&lt;/li&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150829_113921-760x1024.jpg&quot; alt=&quot;&quot; data-id=&quot;155&quot; data-link=&quot;http://srikanth.sastry.name/tsarevets-a-photo-essay/img_20150829_113921/&quot; class=&quot;wp-image-155&quot; /&gt;&lt;/figure&gt;&lt;/li&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150829_113833-760x1024.jpg&quot; alt=&quot;&quot; data-id=&quot;154&quot; data-link=&quot;http://srikanth.sastry.name/tsarevets-a-photo-essay/img_20150829_113833/&quot; class=&quot;wp-image-154&quot; /&gt;&lt;/figure&gt;&lt;/li&gt;&lt;/ul&gt;
&lt;!-- /wp:gallery --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;The city seems to have taken this style in pretty well. You can see murals in a similar style all over the city. Here is an example.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:image {&quot;id&quot;:163,&quot;align&quot;:&quot;none&quot;} --&gt;
&lt;figure class=&quot;wp-block-image alignnone&quot;&gt;&lt;a href=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150829_110451.jpg&quot;&gt;&lt;img src=&quot;http://srikanth.sastry.name/wp-content/uploads/2015/08/IMG_20150829_110451-e1440951390918.jpg&quot; alt=&quot;Modernist mural in Veliko Tarnovo&quot; class=&quot;wp-image-163&quot; /&gt;&lt;/a&gt;&lt;figcaption&gt;Modernist mural in Veliko Tarnovo&lt;/figcaption&gt;&lt;/figure&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;In all, it was a very interesting visit, and worth your time, if you are a history buff.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:paragraph --&gt;
&lt;p&gt;Oh, and two&amp;nbsp;notable missing images are that of Baldwin's tower and the palace ruins. Unfortunately, I just forgot to photograph them. So here are images from the web as consolation.&lt;/p&gt;
&lt;!-- /wp:paragraph --&gt;

&lt;!-- wp:image {&quot;align&quot;:&quot;left&quot;} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;alignleft&quot;&gt;&lt;a href=&quot;https://upload.wikimedia.org/wikipedia/commons/a/a4/Bal.Kyla.jpg&quot;&gt;&lt;img src=&quot;https://upload.wikimedia.org/wikipedia/commons/a/a4/Bal.Kyla.jpg&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;figcaption&gt;Baldwin's tower.&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;

&lt;!-- wp:image {&quot;align&quot;:&quot;center&quot;} --&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;aligncenter&quot;&gt;&lt;a href=&quot;https://upload.wikimedia.org/wikipedia/commons/5/57/Veliko_Tarnovo_%28%D0%92%D0%B5%D0%BB%D0%B8%D0%BA%D0%BE_%D0%A2%D1%8A%D1%80%D0%BD%D0%BE%D0%B2%D0%BE%29_-_Tsarevets_%28Palace%29.JPG&quot;&gt;&lt;img src=&quot;https://upload.wikimedia.org/wikipedia/commons/5/57/Veliko_Tarnovo_%28%D0%92%D0%B5%D0%BB%D0%B8%D0%BA%D0%BE_%D0%A2%D1%8A%D1%80%D0%BD%D0%BE%D0%B2%D0%BE%29_-_Tsarevets_%28Palace%29.JPG&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;figcaption&gt;Ruins of the palace&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;!-- /wp:image --&gt;
</content>
 </entry>
 
 <entry>
   <title>Airfare booking and pricing, demystified!</title>
   <link href="//srikanth.sastry.name/airfare-booking-and-pricing-demystified/"/>
   <updated>2015-05-16T23:39:29+00:00</updated>
   <id>//srikanth.sastry.name/airfare-booking-and-pricing-demystified</id>
   <content type="html">&lt;p&gt;I work on Google’s air travel infrastructure team, which powers &lt;a href=&quot;https://www.google.com/flights&quot; target=&quot;_blank&quot; rel=&quot;nofollow&quot;&gt;Google Flight Search&lt;/a&gt;. Last month, I did a #HangoutOnAir with university students in India. The main focus of that talk was to introduce the students to the sort of challenges that we face. The talk is up on Google Plus, and has since been split into two parts.&lt;/p&gt;

&lt;p&gt;In the first part (which is targeted for a general audience), I cover the fundamentals of flight booking, tackling issues like routing (10,000+ routes for SFO-JFK!?), seat availability, fare codes, pricing and more. It answers questions such as, “why did you pay $50 more than the person sitting next you in the plane for the same ticket?”, and “why  are tickets on this flight from SFO to JFK available when flying SFO to BOS via JFK, but not available for a non-stop flight from SFO to JFK?”&lt;/p&gt;

&lt;p&gt;You can check out part 1 [&lt;a href=&quot;https://plus.google.com/+GoogleTravel/posts/bBvVytDPTLL&quot; target=&quot;_blank&quot; rel=&quot;nofollow&quot;&gt;here&lt;/a&gt;].&lt;/p&gt;

&lt;p&gt;[embed]https://www.youtube.com/watch?v=GunPvoASf3A[/embed]&lt;/p&gt;

&lt;p&gt;In the second part, I get into the computer sciency details of the complexity of airfare search (even the simplest versions of this problem are NP-hard), and provide a (over)simplified description of QPX — the engine that Google uses to search and price airfare tickets. This talk is targeted at computer science students and professional.&lt;/p&gt;

&lt;p&gt;Check out part 2 [&lt;a href=&quot;https://plus.google.com/+GoogleTravel/posts/2F5SrNCMw42&quot; target=&quot;_blank&quot; rel=&quot;nofollow&quot;&gt;here&lt;/a&gt;].&lt;/p&gt;

&lt;p&gt;[embed]https://www.youtube.com/watch?v=5t49HQIHoJw[/embed]&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Solvability-based comparison of failure detectors</title>
   <link href="//srikanth.sastry.name/solvability-based-comparison-of-failure-detectors/"/>
   <updated>2014-10-01T23:38:42+00:00</updated>
   <id>//srikanth.sastry.name/solvability-based-comparison-of-failure-detectors</id>
   <content type="html">&lt;p&gt;New paper in NCA 2014, with Josef Widder.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;&lt;strong&gt;Abstract:&lt;/strong&gt; Failure detectors are oracles that have been introduced to provide processes in asynchronous systems with information about faults. This information can then be used to solve problems otherwise unsolvable in asynchronous systems. A natural question is on the &quot;minimum amount of information&quot; a failure detector has to provide for a given problem. This question is classically addressed using a relation that states that a failure detector D is stronger (that is, provides &quot;more, or better, information&quot;) than a failure detector D' if D can be used to implement D'. It has recently been shown that this classic implementability relation has some drawbacks. To overcome this, different relations have been defined, one of which states that a failure detector D is stronger than D' if D can solve all the time-free problems solvable by D'. In this paper we compare the implementability-based hierarchy of failure detectors to the hierarchy based on solvability. This is done by introducing a new proof technique for establishing the solvability relation. We apply this technique to known failure detectors from the literature and demonstrate significant differences between the hierarchies.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;A preprint is available on ArXiv; &lt;a title=&quot;ArXiv link to &amp;quot;Solvability-based comparison of failure detector&amp;quot;&quot; href=&quot;http://arxiv.org/abs/1407.3286&quot; target=&quot;_blank&quot;&gt;click here to access it&lt;/a&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Stabilizing Dining with Failure Locality 1</title>
   <link href="//srikanth.sastry.name/stabilizing-dining-with-failure-locality-1/"/>
   <updated>2014-02-04T04:59:08+00:00</updated>
   <id>//srikanth.sastry.name/stabilizing-dining-with-failure-locality-1</id>
   <content type="html">&lt;p&gt;This paper was presented in ICDCN 2014.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Abstract:&lt;/strong&gt; We propose two algorithm for solving self-stabilizing dining with Crash Locality 1 in asynchronous shared-memory systems with safe registers. Since this problem cannot be solved in pure asynchrony, we augment the shared-memory system with failure detectors. Specifically, we introduce the anonymous eventually perfect failure detector ?&amp;lt;&amp;gt;P (a variant of the anonymous perfect failure detector introduced by Guerraoui et al.), and show that this failure detector is sufficient to solve the problem at hand.&lt;/p&gt;

&lt;p&gt;The preprint is available for download &lt;a title=&quot;Stabilizing Dining with Failure Locality 1&quot; href=&quot;http://srikanth.sastry.name/documents/research/icdcn2014_fl1ssdining.pdf&quot; target=&quot;_blank&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Moving to Google</title>
   <link href="//srikanth.sastry.name/moving-to-google/"/>
   <updated>2013-04-23T22:06:21+00:00</updated>
   <id>//srikanth.sastry.name/moving-to-google</id>
   <content type="html">&lt;p&gt;Today, I start my new life as a software engineer with Google. It feels strange moving away from academia after over 9 years. Hope this bodes well for me! :-)&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Wait-Free Stabilizing Dining Using Regular Registers</title>
   <link href="//srikanth.sastry.name/wait-free-stabilizing-dining-using-regular-registers/"/>
   <updated>2013-01-18T23:28:45+00:00</updated>
   <id>//srikanth.sastry.name/wait-free-stabilizing-dining-using-regular-registers</id>
   <content type="html">&lt;p&gt;This paper was presented at OPODIS 2012.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;&lt;strong&gt;Abstract:&lt;/strong&gt;&lt;/em&gt; Dining philosophers is a scheduling paradigm that determines when processes in a distributed system should execute certain sections of their code so that processes do not execute &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;conflicting' code sections concurrently, for some application-dependent notion of a &lt;/code&gt;conflict’. Designing a stabilizing dining algorithm for shared-memory systems subject to process crashes presents an interesting challenge: classic stabilization relies on all processes continuing to execute actions forever, an assumption which is violated when crash failures are considered. We present a dining algorithm that is both wait-free (tolerates any number of crashes) and is pseudo-stabilizing. Our algorithm works in an asynchronous system in which processes communicate via shared regular registers and have access to the eventually perfect failure detector $\Diamond P$. Furthermore, with a stronger failure detector, the solution becomes wait-free and self-stabilizing. To our knowledge, this is the first such algorithm. Prior results show that $\Diamond P$ is necessary for wait-freedom.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Leader Election Using Loneliness Detection</title>
   <link href="//srikanth.sastry.name/leader-election-using-loneliness-detection/"/>
   <updated>2012-10-11T23:23:04+00:00</updated>
   <id>//srikanth.sastry.name/leader-election-using-loneliness-detection</id>
   <content type="html">&lt;p&gt;My recent work titled “Leader Election Using Loneliness Detection” is accepted for presentation at the 25th International Symposium on DIStributed Computing (DISC) in Rome, and in the journal Distributed Computing. Briefly, the work focuses on the ‘gap in the computational power’ in single-hop wireless systems when the information about message loss in the system is varied.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;We assume that the cause of message loss in wireless networks is collision, which happens when multiple nodes in the system transmit concurrently. We consider two models — weak collision detection (WCD) and strong collision detection (SCD) — which differ only with respect to the information that they provide about message loss. Specifically, when message collision occurs, in WCD systems, all the nodes that are not transmitting (and therefore listening) receive information about the collision whereas the transmitting processes do not receive any such information, and in SCD systems, all the nodes (both transmitting and receiving nodes) receive information about the collision. Intuitively, it makes sense to argue that SCD systems are more `powerful’ than WCD systems because SCD systems provide more information about message collision than WCD systems; however, that does not answer the question: How much more powerful are SCD systems than WCD systems; how can the ‘gap’ be characterized? Alternatively, we may ask: how do we quantify the amount of information that is provided to transmitting processes when they are notified of a message collision?&lt;/p&gt;

&lt;p&gt;We showed that the ‘gap’ between SCD and WCD systems is captured by the answer to the question: Is there exactly one node in the system? In other words, if WCD systems were to be augmented with an oracle that provides the answer to the foregoing question, then such a system would be able to solve all the problems solvable in SCD systems with the same time and message complexity (modulo a constant factor). We call such an oracle a Loneliness Detector (or LD, for short). We showed that LD can be implemented in WCD systems in O(log u - log n) time deterministically (where u is an upper bound on the number of nodes in the system and n is the actual number of nodes in the system) and in O(1) time with high probability. We then used LD to compare the time complexity of solving leader election in SCD and WCD systems. We showed that in both SCD and WCD systems, leader election may be solved in O(log u) time deterministically and in O(loglog n + log(1/epsilon)) time probabilistically, where epsilon is the error probability. We also provided matching lower bounds for each of the upper bounds presented, thus demonstrating the efficiency of our algorithms.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;&lt;strong&gt;Abstract:&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;blockquote&gt;We consider the problem of leader election (LE) in single-hop radio networks with synchronized time slots for transmitting and receiving messages. We assume that the actual number n of processes is unknown, while the size u of the ID space is known, but is possibly much larger. We consider two types of collision detection: strong (SCD), whereby all processes detect collisions, and weak (WCD), whereby only non-transmitting processes detect collisions. We introduce loneliness detection (LD) as a key subproblem for solving LE in WCD systems. LD informs all processes whether the system contains exactly one process or more than one. We show that LD captures the difference in power between SCD and WCD, by providing an implementation of SCD over WCD and LD. We present two algorithms that solve deterministic and probabilistic LD in WCD systems with time costs of O(log u/n ) and O(min(log u/n , log(1/epsilon)/n)), respectively, where epsilon is the error probability. We also provide matching lower bounds. We present two algorithms that solve deterministic and probabilistic LE in SCD systems with time costs of O(log u) and O(min(log u, log log n + log( 1/epsilon ))), respectively, where epsilon is the error probability. We provide matching lower bounds.&lt;/blockquote&gt;
&lt;p&gt;The full version of the paper may be &lt;a href=&quot;http://hdl.handle.net/1721.1/66224&quot;&gt;found here [link]&lt;/a&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Asynchronous Failure Detectors</title>
   <link href="//srikanth.sastry.name/asynchronous-failure-detectors/"/>
   <updated>2012-05-16T23:16:23+00:00</updated>
   <id>//srikanth.sastry.name/asynchronous-failure-detectors</id>
   <content type="html">&lt;p&gt;My latest work on a modeling framework for a special variant of failure detectors is accepted at the 31st Annual ACM SIGACT-SIGOPS Symposium on Principles of Distributed Computing. &lt;a title=&quot;Asynchronous Failure Detectors&quot; href=&quot;/documents/research/AFD-podc2012.pdf&quot;&gt;A preprint of the submission is available [here]&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Update:&lt;/strong&gt; &lt;a title=&quot;Asynchronous Failure Detectors: Tech Report&quot; href=&quot;http://hdl.handle.net/1721.1/76716&quot; target=&quot;_blank&quot;&gt;The full version is available as a tech report [here].&lt;/a&gt;&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;&lt;em&gt;&lt;strong&gt;Abstract: &lt;/strong&gt;&lt;/em&gt;Failure detectors — oracles that provide information about process crashes — are an important abstraction for crash tolerance in distributed systems. Although current failure-detector theory provides great generality and expressiveness, it also poses significant challenges in developing a robust hierarchy of failure detectors. We address some of these challenges by proposing a variant of failure detectors called asynchronous failure detectors and an associated modeling framework. Unlike the traditional failure-detector framework, our framework eschews real time completely. We show that asynchronous failure detectors are sufficiently expressive to include several popular failure detectors. Additionally, we show that asynchronous failure detectors satisfy many desirable properties: they are self-implementable, guarantee that stronger asynchronous failure detectors solve more problems, and ensure that their outputs encode no information other than process crashes. We introduce the notion of a failure detector being representative of a problem to capture the idea that some problems encode the same information about process crashes as their weakest failure detectors do. We show that a large class of problems, called finite problems, do not have representative failure detectors.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Failure Detectors Encapsulate Fairness</title>
   <link href="//srikanth.sastry.name/failure-detectors-encapsulate-fairness/"/>
   <updated>2012-02-17T00:19:38+00:00</updated>
   <id>//srikanth.sastry.name/failure-detectors-encapsulate-fairness</id>
   <content type="html">&lt;p&gt;The full version of my OPODIS 2010 paper “Failure Detectors Encapsulate Fairness” (&lt;a href=&quot;documents/research/opodis2010.pdf&quot; target=&quot;_blank&quot;&gt;preprint&lt;/a&gt;) has been accepted for publication with the journal Distributed Computing. You can find a &lt;a href=&quot;/documents/research/journal/FD_encapsulate_fairness_preprint.pdf&quot; target=&quot;_blank&quot;&gt;preprint of the paper here [pdf]&lt;/a&gt;.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;&lt;em&gt;&lt;strong&gt;Abstract: &lt;/strong&gt;&lt;/em&gt;Failure detectors have long been viewed as abstractions for the synchronism present in distributed system models. However, investigations into the exact amount of synchronism encapsulated by a given failure detector have met with limited success. The reason for this is that traditionally, models of partial synchrony are specified with respect to real time, but failure detectors do not encapsulate real time. Instead, we argue that failure detectors encapsulate the fairness in computation and communication. Fairness is a measure of the number of steps executed by one process relative either to the number of steps taken by another process or relative to the duration for which a message is in transit. We argue that failure detectors are substitutable for the fairness properties (rather than real-time properties) of partially synchronous systems. We propose four fairness-based models of partial synchrony and demonstrate that they are, in fact, the ‘weakest system models’ to implement the canonical failure detectors from the Chandra-Toueg hierarchy. We also propose a set of fairness-based models which encapsulate the $Gc$ parametric failure detectors which eventually and permanently suspect crashed processes, and eventually and permanently trust some fixed set of c correct processes.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Tunisia, December 2010</title>
   <link href="//srikanth.sastry.name/tunisia-december-2010/"/>
   <updated>2011-02-23T22:00:43+00:00</updated>
   <id>//srikanth.sastry.name/tunisia-december-2010</id>
   <content type="html">&lt;p&gt;I was in Tunisia in the second week of December in 2010. Just a week before the popular uprising ripped the political system apart and dethroned the dictator &lt;a title=&quot;Wikipedia Article on Ben Ali&quot; href=&quot;http://en.wikipedia.org/wiki/Zine_El_Abidine_Ben_Ali&quot;&gt;Ben Ali&lt;/a&gt;. I have tried to capture my visit as a photo essay of Tunisia just before the &lt;a href=&quot;http://en.wikipedia.org/wiki/2010%E2%80%932011_Tunisian_revolution&quot;&gt;revolution&lt;/a&gt;. The essay is divided into multiple parts: Tunis, Carthage, Sidi Bou Said, photographs from the subsharan desert near Tozeur, the nearby mountain oases, a salt lake, and a visit to the sets of the Phantom Menace.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;
&lt;h3&gt;Tunis&lt;/h3&gt;
&lt;p&gt;&lt;img title=&quot;The southern entrance to the Tunis Medina&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2662.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; The southern entrance to the Tunis Medina&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;&lt;img title=&quot;Walking around the medina, the place reminded me so much of India&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2665.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; Walking around the medina, the place reminded me so much of India&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;&lt;img title=&quot;Including Poorly Spelt Signs :-)&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2666.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; Including Poorly Spelt Signs :-)&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;&lt;img title=&quot;Some public spaces and buildings were rather beautiful&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2668.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; Some public spaces and buildings were rather beautiful&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;&lt;img title=&quot;Of course, Ben Ali saved the best for himself. This is as close as I could get to the presidential palace overlooking the Mediterranean.&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2935.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; Of course, Ben Ali saved the best for himself. This is as close as I could get to the presidential palace overlooking the Mediterranean.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;
&lt;table border=&quot;0&quot; width=&quot;100%&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;img src=&quot;/images/stories/travels/tunisia2010/IMG_2908.JPG&quot; alt=&quot;&quot; width=&quot;270px&quot; align=&quot;left&quot; border=&quot;0&quot; /&gt;&lt;/td&gt;
&lt;td&gt;&lt;img src=&quot;/images/stories/travels/tunisia2010/IMG_2956.JPG&quot; alt=&quot;&quot; width=&quot;270px&quot; align=&quot;left&quot; border=&quot;0&quot; /&gt;&lt;/td&gt;
&lt;td&gt;&lt;img src=&quot;/images/stories/travels/tunisia2010/IMG_2911.JPG&quot; alt=&quot;&quot; width=&quot;270px&quot; align=&quot;left&quot; border=&quot;0&quot; /&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td colspan=&quot;3&quot;&gt;Just so that everyone knows who the boss around is, Ben Ali's photographs were everywhere!&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Next, we move to Sidi Bou Said.
&lt;!--more--&gt;&lt;/p&gt;

&lt;hr title=&quot;Sidi Bou Said&quot; /&gt;

&lt;h3&gt;Sidi Bou Said&lt;/h3&gt;
&lt;p&gt;&lt;img title=&quot;Sidi Bou Said is a beautiful (rich) neighborhood not far from Tunis. The blue and white colors look a lot like the villages in Greece.&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2887.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; Sidi Bou Said is a beautiful (rich) neighborhood not far from Tunis. The blue and white colors look a lot like the villages in Greece.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;&lt;img title=&quot;This point marks the beginning of Sidi Bou Said, and curiously, everything up through this point was relatively dusty and the eat outs where cheap. A few paces to the other side of the street and the entire picture changes.&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2906.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; This point marks the beginning of Sidi Bou Said, and curiously, everything up through this point was relatively dusty and the eat outs where cheap. A few paces to the other side of the street and the entire picture changes.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;&lt;img title=&quot;All the houses that I saw there maintained the same color scheme and style.&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2895.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; All the houses that I saw there maintained the same color scheme and style.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;&lt;img title=&quot;The similarity of the houses is down to the window grills and the lintel over the windows too.&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2891.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; The similarity of the houses is down to the window grills and the lintel over the windows too.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;&lt;img title=&quot;The clean streets and relatively expensive cars betrayed the wealth of the residents here.&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2899.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; The clean streets and relatively expensive cars betrayed the wealth of the residents here.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;&lt;img title=&quot;All the streets were really just cobble-stoned pathways. It looked like a quiet village while I was there. Nevertheless beautiful.&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2894.JPG&quot; alt=&quot;&quot; width=&quot;533&quot; height=&quot;800&quot; border=&quot;0&quot; /&gt; All the streets were really just cobble-stoned pathways. It looked like a quiet village while I was there. Nevertheless beautiful.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;&lt;img title=&quot;It is hard to believe that sleepy pathways much like this witnessed a massive uprising against the dictatorship.&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2901.JPG&quot; alt=&quot;&quot; width=&quot;533&quot; height=&quot;800&quot; border=&quot;0&quot; /&gt; It is hard to believe that sleepy pathways much like this witnessed a massive uprising against the dictatorship.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;
&lt;table border=&quot;0&quot; width=&quot;100%&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;img src=&quot;/images/stories/travels/tunisia2010/IMG_2904.JPG&quot; alt=&quot;&quot; width=&quot;270px&quot; border=&quot;0&quot; /&gt;&lt;/td&gt;
&lt;td&gt;&lt;img src=&quot;/images/stories/travels/tunisia2010/IMG_2905.JPG&quot; alt=&quot;&quot; width=&quot;270px&quot; border=&quot;0&quot; /&gt;&lt;/td&gt;
&lt;td&gt;&lt;img src=&quot;/images/stories/travels/tunisia2010/IMG_2940.JPG&quot; alt=&quot;&quot; width=&quot;270px&quot; border=&quot;0&quot; /&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td colspan=&quot;3&quot;&gt;And for all you cat lovers out here, Sidi Bou Said, and Tunis, in general, is so cat friendly. I saw dozens of them walking about tame and unafraid.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt; &lt;/p&gt;

&lt;p&gt;Of course, no visit to Tunisia is complete without a visit to the famous Roman baths. So that’s where we head next.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;hr title=&quot;Roman Baths&quot; /&gt;

&lt;p&gt;The Roman baths were, no doubt, magnificent. But very little of it’s super structure remains.&lt;/p&gt;

&lt;p&gt;&lt;img title=&quot;The beautiful pathway to the ruins gives you an inkling of the magnificence that the people of antiquity enjoyed here.&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2915.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; The beautiful pathway to the ruins gives you an inkling of the magnificence that the people of antiquity enjoyed here.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;&lt;img title=&quot;Yet, it can't prepare you to be awestruck when you actually see the ruins. Although the superstructure is completely gone, you can't help but admire the opulence of what once was.&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2920.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; Yet, it can’t prepare you to be awestruck when you actually see the ruins. Although the superstructure is completely gone, you can’t help but admire the opulence of what once was.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;&lt;img title=&quot;Hard as you may try, photographs simply don't do justice to the feast that your eyes relish here.&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2918.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; Hard as you may try, photographs simply don’t do justice to the sight.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;&lt;img title=&quot;The underground/basement floors were seldom seen by the patrons of these baths. All the of the basement was for operations that made the hot water, the heated walls, and the steam, possible.&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2922.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; The underground/basement floors were seldom seen by the patrons of these baths. All the of the basement was for operations that made the hot water, the heated walls, and the steam, possible.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;&lt;img title=&quot;And that basement was HUGE. Almost as large as the bath complex above the ground.&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2924.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; And that basement was HUGE. Almost as large as the bath complex above the ground.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;
&lt;table border=&quot;0&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;img src=&quot;/images/stories/travels/tunisia2010/IMG_2930.JPG&quot; alt=&quot;&quot; width=&quot;395&quot; border=&quot;0&quot; /&gt;&lt;/td&gt;
&lt;td&gt;&lt;img src=&quot;/images/stories/travels/tunisia2010/IMG_2932.JPG&quot; alt=&quot;&quot; width=&quot;395&quot; border=&quot;0&quot; /&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td colspan=&quot;2&quot;&gt;This is all that remains of the decadent bath complex&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt; &lt;/p&gt;

&lt;p&gt;&lt;img title=&quot;The amphitheater didn't fare any better either. &quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2938.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; The amphitheater didn’t fare any better either.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;&lt;img title=&quot;The Roman villas have met the same fate, and curiously, these ruins overlook the president's palace.&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2941.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; The Roman villas have met the same fate, and curiously, these ruins overlook the president’s palace.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;&lt;img title=&quot;But overlooking these ruins, is a magnificent mosque. Obviously. It's an Islamic country afterall!&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2949.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; But overlooking these ruins, is a magnificent mosque. Obviously. It’s an Islamic country after all!&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;From Tunis, my visit took me to Tozeur, a desert village in southern Tunisia.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;hr title=&quot;Tozeur&quot; /&gt;

&lt;h3&gt;Tozeur&lt;/h3&gt;
&lt;p&gt;There isn’t much in Tozeur itself. But it is a great starting place for visiting some beautiful locations including  the salt lake Chott el-Jerid, a few mountain oases including Chebika, and of course, the set of the Star Wars movie The Phantom Menace.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;
&lt;h4&gt;Chott el-Jerid&lt;/h4&gt;
&lt;p&gt;&lt;img title=&quot;We were told that the sunrise over the salt lake is beautiful, so we got there just in time before the sun rose.&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2738.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; We were told that the sunrise over the salt lake is beautiful, so we got there just in time before the sun rose.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;&lt;img title=&quot;And saw this. In fact, it was the most beautiful just before the sunrise.&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2746.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; And saw this. In fact, it was the most beautiful just before the sunrise.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;&lt;img title=&quot;But the sunrise was pretty too.&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2748.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; But the sunrise was pretty too.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;&lt;img title=&quot;Of course, we took some time to smell the salt.&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2742.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; Of course, we took some time to smell the salt.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;&lt;img title=&quot;And yes, there was some salt there... In fact, lots of it!&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2745.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; And yes, there was some salt there… In fact, lots of it!&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;&lt;img title=&quot;But life is tenacious, and manages to find a way to survive even in such harsh, saline conditions. Mind you, the lake dries up to become a salt bed in the summer.&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2743.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; But life is tenacious, and manages to find a way to survive even in such harsh, saline conditions. Mind you, the lake dries up to become a salt bed in the summer.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;&lt;img title=&quot;And then I saw this! Who in their right mind thought it smart to place a bus in the middle of a salt lake?!?&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2756.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; And then I saw this! Who in their right mind thought it smart to place a bus in the middle of a salt lake?!?&lt;/p&gt;

&lt;p&gt;Anyway, moving on… next, we come to the mountain oasis Chebika.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;hr title=&quot;Chebika&quot; /&gt;

&lt;p&gt; &lt;/p&gt;
&lt;h3&gt;Chebika&lt;/h3&gt;
&lt;p&gt;&lt;img title=&quot;We had to drive 30 minutes or so into the Saharan desert to get to Chebika.&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2694.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; We had to drive 30 minutes or so into the Saharan desert to get to Chebika.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;&lt;img title=&quot;What we found was that a stream of this size....&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2805.JPG&quot; alt=&quot;&quot; width=&quot;533&quot; height=&quot;800&quot; border=&quot;0&quot; /&gt; What we found was that a stream of this size….&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;&lt;img title=&quot;...feeds an Oasis this large! &quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2778.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; …feeds an Oasis this large!&lt;/p&gt;

&lt;p&gt;&lt;img title=&quot;A tribe owns the whole oasis and divides it among its people. And this, I assume is their mascot or some sort of identity symbol. Though I could be completely wrong.&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2772.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; A tribe owns the whole oasis and divides it among its people. And this, I assume is their mascot or some sort of identity symbol. Though I could be completely wrong.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;&lt;img title=&quot;There is evidence of some massive tectonic activity in this region, which could well have thrown up...&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2797.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; There is evidence of some massive tectonic activity in this region, which could well have thrown up…&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;&lt;img title=&quot;Lots of fossils, quartz, and curious looking crystals (such as the desert rose) that the villagers collect, and they make a living off of selling them to tourists like us.&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2806.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; Lots of fossils, quartz, and curious looking crystals (such as the desert rose) that the villagers collect, and they make a living off of selling them to tourists like us.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;From Chebika, we wanted to make it to another oasis, Medis, but it was getting pretty late.&lt;/p&gt;

&lt;p&gt;&lt;img title=&quot;But we did manage to get some breathtaking views in our futile attempt to get to Medis before sundown.&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2706.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; But we did manage to get some breathtaking views in our futile attempt to get to Medis before sundown.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;&lt;img title=&quot;It was getting pretty late, but higher up in the mountains, the sun sets later than down there.&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2715.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; It was getting pretty late, but higher up in the mountains, the sun sets later than down there.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;&lt;img title=&quot;We almost made it there, but not quite. We were just a couple of miles away. This road leads straight to Algeria, and Medis was just before the international border. But then, we ran out of time.&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2720.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; We almost made it there, but not quite. We were just a couple of miles away. This road leads straight to Algeria, and Medis was just before the international border. But then, we ran out of time.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;After an unsuccessful drive to Medis, we headed out to the dunes and the nerd in me could not  miss out on what was coming next.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;hr title=&quot;Sets of The Phantom Menace&quot; /&gt;

&lt;h3&gt;The set of Phantom Menace&lt;/h3&gt;
&lt;p&gt;&lt;img title=&quot;The set of the movie The Phantom Menace&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2857.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; The set of the movie The Phantom Menace&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;
&lt;table border=&quot;0&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;img src=&quot;/images/stories/travels/tunisia2010/IMG_2863.JPG&quot; alt=&quot;&quot; width=&quot;395px&quot; border=&quot;0&quot; /&gt;&lt;/td&gt;
&lt;td width=&quot;395px&quot;&gt;&lt;img src=&quot;/images/stories/travels/tunisia2010/IMG_2869.JPG&quot; alt=&quot;&quot; width=&quot;395px&quot; border=&quot;0&quot; /&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td width=&quot;395px&quot;&gt;&lt;img src=&quot;/images/stories/travels/tunisia2010/IMG_2871.JPG&quot; alt=&quot;&quot; width=&quot;395px&quot; border=&quot;0&quot; /&gt;&lt;/td&gt;
&lt;td width=&quot;395px&quot;&gt;&lt;img src=&quot;/images/stories/travels/tunisia2010/IMG_2868.JPG&quot; alt=&quot;&quot; width=&quot;395px&quot; border=&quot;0&quot; /&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td colspan=&quot;2&quot;&gt;The set was in a remarkably good condition. This place must have a steady stream of tourists. The local people here make their living selling any
kind of trinkets that they can. Only they can survive in this harsh landscape.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt; &lt;/p&gt;

&lt;p&gt;&lt;img title=&quot;This is the kind of dwelling they live in, in the middle of high desert!&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2851.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; This is the kind of dwelling they live in, in the middle of high desert!&lt;/p&gt;

&lt;p&gt;Of course, the desert held other charms as well.&lt;/p&gt;

&lt;p&gt;&lt;img title=&quot;Like this magnificent landscape.&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2831.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; Like this magnificent landscape.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;&lt;img title=&quot;And an alien sense of desolation.&quot; src=&quot;/images/stories/travels/tunisia2010/IMG_2843.JPG&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot; border=&quot;0&quot; /&gt; And an alien sense of desolation.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;But alas, like eveything else. This visit too had to come to an end. And thank god it did in the nick of time. I flew out of Tunis on December 19th. The &lt;a title=&quot;Wikipedia article: Mohamed Bouazizi, who set himself on fire&quot; href=&quot;http://en.wikipedia.org/wiki/Mohamed_Bouazizi&quot;&gt;self immolation&lt;/a&gt; that triggered the revolution was on December 17th in Sidi Bouzid (not to be confused with Sidi Bou Said).&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>A successful defense</title>
   <link href="//srikanth.sastry.name/a-successful-defense/"/>
   <updated>2011-02-17T00:25:50+00:00</updated>
   <id>//srikanth.sastry.name/a-successful-defense</id>
   <content type="html">&lt;p&gt;I successfully defended my dissertation titled “A Prescription For Partial Synchrony” on January 21st, 2011. The dissertation was approved and accepted by the Thesis Office on February 2nd, 2011.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;Abstract:&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Algorithms in message-passing distributed systems often require &lt;em&gt;partial synchrony&lt;/em&gt; to tolerate crash failures. Informally, partial synchrony refers to systems where timing bounds on communication and computation may exist, but the knowledge of such bounds is limited. Traditionally, the foundation for the theory of partial synchrony has been &lt;em&gt;real time&lt;/em&gt;: a time base measured by counting events external to the system, like the vibrations of Cesium atoms or piezoelectric crystals.&lt;/p&gt;

&lt;p&gt;Unfortunately, algorithms that are correct relative to many real-time based models of partial synchrony may not behave correctly in empirical distributed systems. For example, a set of popular theoretical models, which we call M&lt;em&gt;, assume (eventual) upper bounds on message delay and relative process speeds, regardless of message size and absolute process speeds. Empirical systems with bounded channel capacity and bandwidth cannot realize such assumptions either natively, or through algorithmic constructions. Consequently, empirical deployment of the many M&lt;/em&gt;-based algorithms risks anomalous behavior.&lt;/p&gt;

&lt;p&gt;As a result, we argue that real time is the wrong basis for such a theory. Instead, the appropriate foundation for partial synchrony is {\em fairness}: a time base measured by counting events internal to the system, like the steps executed by the processes. By way of example, we redefine M* models with fairness-based bounds and provide algorithmic techniques to implement fairness-based M* models on a significant subset of the empirical systems. The proposed techniques use &lt;em&gt;failure detectors&lt;/em&gt; — system services that provide hints about process crashes — as intermediaries that preserve the fairness constraints native to empirical systems. In effect, algorithms that are correct in M* models are now proved correct in such empirical systems as well.&lt;/p&gt;

&lt;p&gt;Demonstrating our results requires solving three open problems. (1) We propose the first unified mathematical framework based on Timed I/O Automata to specify empirical systems, partially synchronous systems, and algorithms that execute within the aforementioned systems. (2) We show that crash tolerance capabilities of popular distributed systems can be denominated exclusively through fairness constraints. (3) We specify exemplar system models that identify the set of weakest system models to implement popular failure detectors.&lt;/p&gt;

&lt;p&gt;I thank my advisors Scott Pike and Jennifer Welch for all their help, support, and guidance.&lt;/p&gt;

&lt;p&gt;A copy of my dissertation (in PDF format) can be accessed &lt;a title=&quot;Srikanth Sastry's Dissertation titled &amp;quot;A Prescription For Partial Synchrony&amp;quot;&quot; href=&quot;documents/research/srikanthSastryDissertation.pdf&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Proposing a new radio show</title>
   <link href="//srikanth.sastry.name/proposing-a-new-radio-show/"/>
   <updated>2008-08-27T23:40:39+00:00</updated>
   <id>//srikanth.sastry.name/proposing-a-new-radio-show</id>
   <content type="html">&lt;p&gt;I am proposing a new music show on &lt;a title=&quot;KEOS&quot; href=&quot;http://www.keos.org/&quot; target=&quot;_self&quot;&gt;KEOS 89.1FM&lt;/a&gt; Community Radio. Below is the proposal I will be submitting to the KEOS mangement team.&lt;/p&gt;

&lt;hr align=&quot;center&quot; size=&quot;2&quot; width=&quot;100%&quot; /&gt;

&lt;p align=&quot;center&quot;&gt;&lt;b&gt;  KEOS Show Proposal&lt;/b&gt;&lt;/p&gt;
&lt;p&gt;&lt;i&gt;&lt;b&gt;Name:&lt;/b&gt;&lt;/i&gt; Srikanth Sastry&lt;i&gt;&lt;b&gt;
Date:&lt;/b&gt;&lt;/i&gt; August 27, 2008&lt;i&gt;&lt;b&gt;
Show Description:&lt;/b&gt;&lt;/i&gt; I propose a music show focusing exclusively on Trance music. The show will showcase various sub genres of trance including Progressive Trance, Acid Trance, Psychedelic Trance, Vocal Trance, Ambient Trance, and such. The show will feature artists like ATB, Paul Oakenfold, Paul Van Dyke, Tiesto, Robert Miles, Astral Projection, Buddha Bar, and such. The nature of trance music and the associated culture is such that it favors long sessions of continuous music, so the show will have very few breaks. All the mandated PSAs, promos, and station ID will either be played together so as to provide a longer continuous music session, or will be played over the music (the music will be potted down, of course). Since this makes it difficult to communicate the play-list to the listeners I propose serve the play-list online.&lt;/p&gt;

&lt;hr id=&quot;system-readmore&quot; /&gt;

&lt;p&gt;&lt;i&gt;&lt;b&gt;Show Format:&lt;/b&gt;&lt;/i&gt; It will be a 2 hr. show consisting of ~30-minute sessions of continuous music.
&lt;i&gt;&lt;b&gt;Audience:&lt;/b&gt;&lt;/i&gt; Anyone interested in trance music, or is curious about it. There is a significant minority counter/alternative culture in the B/CS area who listen to trance, house, and ambient music. Unfortunately the airways carry very little music in those genres. I expect this program to fill that void, at least partially.
&lt;i&gt;&lt;b&gt;Longevity:&lt;/b&gt;&lt;/i&gt; Trance is an extremely active music genre. Having developed in the 1990s, it is a relatively new form of music. Despite its nascence Trance DJs are extremely prolific in their creations and several artists release albums every year, not to mention recordings from various trance festivals and jam sessions. Although trance is not very well known in the US, it is extremely popular in Europe and shows no signs of waning down.
&lt;i&gt;&lt;b&gt;Fidelity to KEOS Mission:&lt;/b&gt;&lt;/i&gt; This show will play music from a genre that is chronically and acutely underplayed on all radio stations. Its audience includes a demographic which is severely under-served on the Bryan-College Station airwaves. The show has the potential to attract new listener-ship to KEOS, thus diversifying both the music played on the station, and the people who listen to KEOS.
&lt;i&gt;&lt;b&gt;Resources:&lt;/b&gt;&lt;/i&gt; I have legal copies of all the music that I’d like to play on the air. I need only the resources already available in the On-Air studio for my show. Wireless Internet would be a desirable, but not necessary, resource.
&lt;i&gt;&lt;b&gt;Suggested Titles:&lt;/b&gt;&lt;/i&gt; Trance Texas Corridor; Trance Nocturna; Alchemical Hours; Android Dreams; One Nation Under Trance
&lt;i&gt;&lt;b&gt;Possible Time Slots:&lt;/b&gt;&lt;/i&gt; Monday 11PM-1AM; Tuesday 9-11PM. 11PM-1AM
&lt;i&gt;&lt;b&gt;Co-Hosting:&lt;/b&gt;&lt;/i&gt; Currently, I do not have a co-host, but am open to the idea of having one. My backup, in case I cannot host during some weeks, is Martin Codrington.
&lt;i&gt;&lt;b&gt;Start Date:&lt;/b&gt;&lt;/i&gt; First week of October&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Big Bend Nov 07</title>
   <link href="//srikanth.sastry.name/big-bend-nov-07/"/>
   <updated>2007-12-03T21:54:56+00:00</updated>
   <id>//srikanth.sastry.name/big-bend-nov-07</id>
   <content type="html">&lt;p&gt;It was the Thankgiving Week in November 2007, and I was not about to make the same mistake I did before. Staying back in College Station over Thanksgiving is one of the most depressing experiences. The entire town and TAMU campus is deserted. You feel like the sole survivor in a post-apocalyptic world. My brother, Shankar, was visiting me for the Thanksgiving break, I and I was not about to subject him to Thanksgiving in College Station. So yeah, I was definitely going out somewhere that wasn’t College Station.&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;It was decided that Shankar and I will go camping in  Big Bend National Park. Its a 10 hour drive each way, and a two day stay in the park. So we stacked up on our supplies, and started out on November 27th at 8 in the morning. It was an uneventful drive up through to Fredericksburg going west. Once we got past Fredericksburg and headed out towards west Texas, I realized how flat the Texas landscape truly is. I could see flat straight roads for miles without an change in the geography! One could fall asleep at the wheel, wake up minutes later and not even realize it!&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;

&lt;img title=&quot;Flat West Texas&quot; src=&quot;/images/stories/travels/bigbend07/flat_west_tx.jpg&quot; alt=&quot;Flat West Texas&quot; width=&quot;480&quot; height=&quot;360&quot; border=&quot;0&quot; hspace=&quot;6&quot; /&gt;
&lt;div align=&quot;center&quot;&gt;Flat West Texas&lt;/div&gt;
&lt;/div&gt;
&lt;!--more--&gt;

&lt;p&gt;It was fairly late by the time we got to Ft. Stockton, and so we decided to spend the night at a motel there, and left for Big Bend first thing in the morning. The drive from Ft. Stockton to Big Bend was quite picturesque. There were some very interesting natural and man-made reliefs.&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;

&lt;img title=&quot;Natural Relief enroute to Big Bend&quot; src=&quot;/images/stories/travels/bigbend07/bigbend_natural_relief.jpg&quot; alt=&quot;Natural Relief enroute to Big Bend&quot; width=&quot;480&quot; height=&quot;360&quot; border=&quot;0&quot; hspace=&quot;6&quot; /&gt;
&lt;div align=&quot;center&quot;&gt;Natural Relief enroute to Big Bend&lt;/div&gt;
&lt;/div&gt;
&lt;div align=&quot;center&quot;&gt;

&lt;img title=&quot;Man-made Relief Enroute to Big Bend&quot; src=&quot;/images/stories/travels/bigbend07/bigbend_manmade_relief.jpg&quot; alt=&quot;Man-made Relief Enroute to Big Bend&quot; width=&quot;480&quot; height=&quot;360&quot; border=&quot;0&quot; hspace=&quot;6&quot; /&gt;
&lt;div align=&quot;center&quot;&gt;Man-made Relief Enroute to Big Bend&lt;/div&gt;
&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;We reached the borders to Big Bend National Park at about 8 in the morning. Although I knew it was called the ‘Big’ Bend, I didn’t quite realize how BIG it really is! We has to drive to over 40 miles into the Big Bend National Park to get to our campground. The campground was located in a basin surrounded by the Chisos Mountains. It was an extremely picturesque location to camp out at.&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;

&lt;img title=&quot;Chisos Mountains&quot; src=&quot;/images/stories/travels/bigbend07/chisos_mountains.jpg&quot; alt=&quot;Chisos Mountains&quot; width=&quot;480&quot; height=&quot;360&quot; border=&quot;0&quot; hspace=&quot;6&quot; /&gt;
&lt;div align=&quot;center&quot;&gt;Chisos Mountains&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;

&lt;p&gt;When we got there the campground was almost full. However, we did manage to secure a decent camp site, and then set out for our first hike: the window trail.&lt;/p&gt;

&lt;p&gt;The window trail is a 5 mile round trip trail that takes you a ‘window ‘ created by water erosion. The window  is a pour-off that drains the entire Chisos basin into the great Chihuahuan desert. Although it was not a very difficult hike, we were woefully out of shape, and so it seemed a lot more difficult then it should be. We started off form the campground with a beautiful view of the canyon beyond which lay the ‘window’.&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;

&lt;img title=&quot;View of the Canyon that ends at the 'window'&quot; src=&quot;/images/stories/travels/bigbend07/window_afar.jpg&quot; alt=&quot;View of the Canyon that ends at the 'window'&quot; width=&quot;480&quot; height=&quot;360&quot; border=&quot;0&quot; hspace=&quot;6&quot; /&gt;
&lt;div align=&quot;center&quot;&gt;View of the Canyon that ends at the 'window'&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;The hike was peppered with some unusual looking plants. Like this snake-like plant:&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;

&lt;img title=&quot;Snaking Plant&quot; src=&quot;/images/stories/travels/bigbend07/snaking_plant.jpg&quot; alt=&quot;Snaking Plant&quot; width=&quot;480&quot; height=&quot;360&quot; border=&quot;0&quot; hspace=&quot;6&quot; /&gt;
&lt;div align=&quot;center&quot;&gt;Snaking Plant&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;

&lt;p&gt;Its anti-thesis:&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;

&lt;img title=&quot;Plat shooting straight into the sky&quot; src=&quot;/images/stories/travels/bigbend07/window_straightplant.jpg&quot; alt=&quot;Plat shooting straight into the sky&quot; width=&quot;360&quot; height=&quot;480&quot; border=&quot;0&quot; hspace=&quot;6&quot; /&gt;
&lt;div align=&quot;center&quot;&gt;Anti-thesis&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;Or this fascinating xerophyte:&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;

&lt;img title=&quot;Xerophyte&quot; src=&quot;/images/stories/travels/bigbend07/window_xerophyte.jpg&quot; alt=&quot;Xerophyte&quot; width=&quot;360&quot; height=&quot;480&quot; border=&quot;0&quot; hspace=&quot;6&quot; /&gt;
&lt;div align=&quot;center&quot;&gt;Xerophyte&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;Slowly, but surely, we were getting closer to the window.&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;

&lt;img title=&quot;Getting Close to the Window&quot; src=&quot;/images/stories/travels/bigbend07/getting_closer_to_window.jpg&quot; alt=&quot;Getting Close to the Window&quot; width=&quot;480&quot; height=&quot;360&quot; border=&quot;0&quot; hspace=&quot;6&quot; /&gt;
&lt;div align=&quot;center&quot;&gt;Closer to the Window&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;

&lt;p&gt;And there was more to see, like this beautiful grass patch:&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;

&lt;img title=&quot;Patch of Brown Grass&quot; src=&quot;/images/stories/travels/bigbend07/window_browngrass.jpg&quot; alt=&quot;Patch of Brown Grass&quot; width=&quot;480&quot; height=&quot;360&quot; border=&quot;0&quot; hspace=&quot;6&quot; /&gt;
&lt;div align=&quot;center&quot;&gt;Grassy Patch&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;

&lt;p&gt;Some ‘interesting’ geological formations like this one:&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;

&lt;img title=&quot;Interesting Geological Formation&quot; src=&quot;/images/stories/travels/bigbend07/interesting_geoformation.jpg&quot; alt=&quot;Interesting Geological Formation&quot; width=&quot;480&quot; height=&quot;360&quot; border=&quot;0&quot; hspace=&quot;6&quot; /&gt;
&lt;div align=&quot;center&quot;&gt;Interesting Geological Formation&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;and a Roadrunner  running through it:&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;

&lt;img title=&quot;Roadrunner&quot; src=&quot;/images/stories/travels/bigbend07/roadrunner.jpg&quot; alt=&quot;Roadrunner&quot; width=&quot;480&quot; height=&quot;360&quot; border=&quot;0&quot; hspace=&quot;6&quot; /&gt;
&lt;div align=&quot;center&quot;&gt;Roadrunner&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;

&lt;p&gt;About 2 hours later, we got to the the ‘window’. A breathtaking view of a 200 feet drop of the stream into the Chihuahuan desert&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;

&lt;img title=&quot;The Window&quot; src=&quot;/images/stories/travels/bigbend07/window_upclose.jpg&quot; alt=&quot;The Window&quot; width=&quot;360&quot; height=&quot;480&quot; border=&quot;0&quot; hspace=&quot;6&quot; /&gt;
&lt;div align=&quot;center&quot;&gt;The Window&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;

&lt;p&gt;Although we got back at about 3 PM or so, we were really tired. Just an indication of how out of shape we were! We set out tent up and crashed for an hour and a half or so. By then, it was too late to start another hike. Sunset was in less than an hour. Instead I took stock of the Chisos Basin itself. It was quite a sight to behold. Behind our campsite was the Casa Grande:&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;

&lt;img title=&quot;Casa Grande&quot; src=&quot;/images/stories/travels/bigbend07/casagrande_fromcamp.jpg&quot; alt=&quot;Casa Grande&quot; width=&quot;480&quot; height=&quot;364&quot; border=&quot;0&quot; hspace=&quot;6&quot; /&gt;
&lt;div align=&quot;center&quot;&gt;Casa Grande&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;It was nightfall soon, and the temperature was dropping fast. We’d know the next day that the temperature that night has down to 24F! Since Big Bend is so far away from all civilization, there is virtually no bright light sources (like headlights, street lights, buildings etc.) at night. The moon was shining bright, bathing the entire basin in the pale white moonlight. I did my best to capture it on camera:&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;

&lt;img title=&quot;Campgrounds under moonlight&quot; src=&quot;/images/stories/travels/bigbend07/moonlight.jpg&quot; alt=&quot;Campgrounds under moonlight&quot; width=&quot;480&quot; height=&quot;360&quot; border=&quot;0&quot; hspace=&quot;6&quot; /&gt;
&lt;div align=&quot;center&quot;&gt;Campground under moonlight&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;hr title=&quot;Hiking Emory Peak&quot; /&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;Thanks to the freezing cold night, it was painfully difficult to wake up early the next day. The temperature at 8AM was a biting 28F! With great effort we managed to wake up, get freshened up for what was by our standards, a mammoth task. We decided to hike to the Emory Peak: the highest point in the Big Bend. It was a towering 7845ft above sea-level. Chisos Basin is at about 5200ft. So we were gaining over 2500ft in 4.5 miles. It was a 9 mile round trip hike. Thanks to the preparatory 5-mile hike to the ‘Window’ the previous day, and a good night sleep, we were in a position to do this one.&lt;/p&gt;

&lt;p&gt;The biggest adversary in hikes like these is not the distance (coz’ its short), not the incline (‘coz its not too bad); the worst is the altitude and the rate at which the altitude increases. The air is pretty thin (compared to seas level), and keeps getting thinner as you go up. So you are constantly out of breath. But the time you are acclimatised to a particular altitude, you have hiked higher, and so you are still out of breath.&lt;/p&gt;

&lt;p&gt;We had to stop every 50 steps or so to catch our breath. I was not a happy camper about that. But each rest stop gave us something beautiful to admire. Like this view of Casa Grande:&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;

&lt;img title=&quot;View of Casa Gradne on the Hike to Emory Peak&quot; src=&quot;/images/stories/travels/bigbend07/casagrande_onemoryhike.jpg&quot; alt=&quot;View of Casa Gradne on the Hike to Emory Peak&quot; width=&quot;480&quot; height=&quot;360&quot; border=&quot;0&quot; hspace=&quot;6&quot; /&gt;
&lt;div align=&quot;center&quot;&gt;View of Casa Gradne on the Hike to Emory Peak&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;

&lt;p&gt;The Berries:&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;

&lt;img title=&quot;Berries seen on the way to Emory Peak&quot; src=&quot;/images/stories/travels/bigbend07/emoryhike_berry.jpg&quot; alt=&quot;Berries seen on the way to Emory Peak&quot; width=&quot;480&quot; height=&quot;360&quot; border=&quot;0&quot; hspace=&quot;6&quot; /&gt;
&lt;div align=&quot;center&quot;&gt;Berries&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;

&lt;p&gt;We even had fall colors there!&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;

&lt;img title=&quot;Fall colors enroute to Emory Peak&quot; src=&quot;/images/stories/travels/bigbend07/fallcolors_emoryhike.jpg&quot; alt=&quot;Fall colors enroute to Emory Peak&quot; width=&quot;480&quot; height=&quot;360&quot; border=&quot;0&quot; hspace=&quot;6&quot; /&gt;
&lt;div align=&quot;center&quot;&gt;Fall Colors&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;

&lt;p&gt;We finally got to a point above Casa Grande. Emory Peak wasn’t too far off.&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;

&lt;img title=&quot;Higher than Casa Grande&quot; src=&quot;/images/stories/travels/bigbend07/abovecasagrande_emporyhike.jpg&quot; alt=&quot;Higher than Casa Grande&quot; width=&quot;480&quot; height=&quot;360&quot; border=&quot;0&quot; hspace=&quot;6&quot; /&gt;
&lt;div align=&quot;center&quot;&gt;Looking down at Casa Grande&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;

&lt;p&gt;After rock climbing the last 60 ft. we go to the top of Emory peak. The view from above was breath taking! To the south was the vast expanse of Mexico.&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;

&lt;img title=&quot;View into Mexico&quot; src=&quot;/images/stories/travels/bigbend07/emorypeak_south_mexico.jpg&quot; alt=&quot;View into Mexico&quot; width=&quot;480&quot; height=&quot;360&quot; border=&quot;0&quot; hspace=&quot;6&quot; /&gt;
&lt;div align=&quot;center&quot;&gt;View into Mexico&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;

&lt;p&gt;To the west, down below was our campsite, barely visible from this height:&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;

&lt;img title=&quot;Campsite from Emory Peak&quot; src=&quot;/images/stories/travels/bigbend07/emorypeak_west_campsite.jpg&quot; alt=&quot;Campsite from Emory Peak&quot; width=&quot;480&quot; height=&quot;360&quot; border=&quot;0&quot; hspace=&quot;6&quot; /&gt;
&lt;div align=&quot;center&quot;&gt;Viewing the campsite from Emory peak&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;

&lt;p&gt;To the north was the vast expanse of the Chihuahuan desert:&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;

&lt;img title=&quot;View of the Chihuahuan Desert&quot; src=&quot;/images/stories/travels/bigbend07/emorypeak_north_desert.jpg&quot; alt=&quot;View of the Chihuahuan Desert&quot; width=&quot;480&quot; height=&quot;360&quot; border=&quot;0&quot; hspace=&quot;6&quot; /&gt;
&lt;div align=&quot;center&quot;&gt;View of the Chihuahuan Desert&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;

&lt;p&gt;To the east was rest of Texas:&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;

&lt;img title=&quot;Seeing Texas from Emory Peak&quot; src=&quot;/images/stories/travels/bigbend07/emorypeak_east_texas.jpg&quot; alt=&quot;Seeing Texas from Emory Peak&quot; width=&quot;480&quot; height=&quot;360&quot; border=&quot;0&quot; hspace=&quot;6&quot; /&gt;
&lt;div align=&quot;center&quot;&gt;Seeing Texas from Emory Peak&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;

&lt;p&gt;&lt;a title=&quot;Panoramic View from Emory Peak&quot; href=&quot;/images/stories/travels/bigbend07/panorama.jpg&quot; target=&quot;_self&quot;&gt;[Click Here for the panoramic view]&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Two hours later, we were back at our campsite and it was 5:30 in the evening. Close to sunset.&lt;/p&gt;

&lt;p&gt;Another cold night (this time braving 20F) later, we were up at 8 in the morning and headed out. Back on the road. Back on the flat roads of west Texas, back towards hill country, and then College Station. Back towards civilization.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;

&lt;img title=&quot;Driving Back&quot; src=&quot;/images/stories/travels/bigbend07/driving_back.jpg&quot; alt=&quot;Driving Back&quot; width=&quot;480&quot; height=&quot;360&quot; border=&quot;0&quot; hspace=&quot;6&quot; /&gt;
&lt;div align=&quot;center&quot;&gt;Driving Back&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt; &lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Tryst with Kudremukh</title>
   <link href="//srikanth.sastry.name/tryst-with-kudremukh/"/>
   <updated>2007-06-24T20:47:21+00:00</updated>
   <id>//srikanth.sastry.name/tryst-with-kudremukh</id>
   <content type="html">&lt;p&gt;When I received the news that Kudremukh, the place where I grew up, spent all of my childhood and school years was going to be closed down, I was hit by something that had never experienced before. Nostalgia. I was never really a big fan of that place. Its a small mining town with a population of around 10,000. The earliest memory I have of Kudremukh is rain, pouring rain. It spends a good part of the year drenching itself from the spout in the sky right above it. The only thing worth mentioning about the place is the scenic beauty it mars. All around Kudremukh you see beautiful hills, lush green grass lands, wild expanse of thick rain forests, the glisten of the rocks as the even sun shines its amber on the barren hillocks is permanently etched in my memory. After high school and before going to college, we had a vacation that spanned over three months. With nothing to do, our class would meet almost everyday at some argreed upon place and we’d start exploring the woods. It was mostly in these wild escapades that I got to see the magnificence that the national park around Kudremukh hid within it, and made me realize that the only thing that is ruining it is the town itself, and iron ore mine that it supports.&lt;/p&gt;

&lt;p&gt;After that, I spent the rest of my years waiting for the place to close down and the jungle to reclaim it as its own. When I moved out to college, I was a frequent visitor to Kudremukh. The town was thriving, people going about their lives like nothing existed outside the few sqaure miles that the town spanned. I graduate in 2001 and moved to Bangalore to work. Between 2001 and 2004 I visited Kudremukh just once. It never really faded from my memory, with a history of 17 years associated with your life it is impossible to forget about it, yet I never really cared about much. I moved to College Station, Texas in August 2004.&lt;/p&gt;

&lt;p&gt;It was a new life. I started afresh, with all my worldy belongings packed in three suitcases. I was so busy trying to carve a life out and make things work for me that I had no time for anything else, including dwelling on memories. Some time in May 2005, I was more or less settled comfortably, in one of my weekly calls back home my folks mentioned about Kudremukh. They told me that the iron ore mine was closing, the coming new year’s eve would be the last day of mining there. The town would die with the mine. There is little that can be done about it. Nothing within me stirred. I was not numb, I was simply apathetic about the town.&lt;/p&gt;

&lt;p&gt;As the days passed, I began thinking more about Kudremukh. It is the only place that comes even close to being my home town, and yet I refused to let it be a part of my identity. At least, that was what I wanted to believe. With the prospect of its demise looming I realized that somewhere along the way Kudremukh had become a part of me and that is here to stay. I began thinking about the school, the playground, classmates, long walks, the jungle, the rain, smell of dry soil quenched by the first drops of the summer rain, the sweet water of the brooks in the woods. All of this came rushing back to me like from a dam when the floodgates are opened. I was awashed in nostalgia. It is the only place that I still remember for what the place was, and not the people in it, or the relationships that I made there. I remembered Kudremukh for Kudremukh, not the childhood friends, not the first time I learned to ride a bike, not my first trophy, not my first day in school, nor my last day there. It sure has a special place in my heart.
I wanted to go back to Kudremukh, I wanted to see it again. I wanted to see it while I still could. But I was 12,000 miles away with no prospect of visiting India within the near future. My next tryst with Indian soil would be in december. And so the wait began.&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;With so much happenening around me, I didnt realize how time flew by and before I knew it, it was december and I was in India.&lt;/p&gt;

&lt;p&gt;The itinerary was finalized. It was a small one, just 4 days. The date set was 20th December 2005. Along with my parents and my brother Shankar, I set off to Kudremukh. The journey wasnt eventful, as a matter of fact there was nothing eventful about the whole trip. Nothing special, great, noteworthy happened throughout. This was nothing more than my pilgrimage.&lt;/p&gt;

&lt;p&gt;As we approached Kudremukh, the scent of the town wafted through the air. I could smell it from miles away. Its not a smell that can be explained or described. Its a feeling that transcends senses. When you have spent the first 17 years of your life in one place, you forge a connection with it that cannot be broken, an umbilical cord that cannot be severed. The feeling only got stronger as we neared the town.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1649.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img class=&quot;alignnone&quot; style=&quot;border: 0px;&quot; title=&quot;Tea Plantations&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1649.jpg&quot; alt=&quot;&quot; align=&quot;left&quot; /&gt;&lt;/a&gt;My first flicker of recognition was the tea plantations. Kudremukh is nurtured in the cradle of the western ghats. Western ghats have the ideal climate and soil to grow tea and coffee. As I passed through the tea plantations near Kudremukh I realized that my lips had curled themselves into a smile. Just a few hills more separating us. I knew I didn’t have to wait too long, not anymore.&lt;/p&gt;
&lt;h1&gt;&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1639.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img style=&quot;border: 0px;&quot; title=&quot;Drive to Kudremukh&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1639.jpg&quot; alt=&quot;&quot; align=&quot;left&quot; /&gt;&lt;/a&gt;Drive to Kudremukh&lt;/h1&gt;
&lt;p&gt;I continued driving. The onset of ghats is unmistakably perceptive, especially if you are driving. The straight roads and smooth curves with adequate banking give way to twists, turns, hairpin bend curves, steep incline and descends, rumble strips to slow vehicles speeding through a descend that ends with a hairpin bend so on. These were the roads I roads I learnt driving on. It has been seven years since my tires rolled on these roads and yet I drove like it was old times, like I always drove. A new wave of memories crashed into me. I was about 15 when I started nagging my dad to teach me driving. The law abiding citizen that he was, he refused. He said I had to wait for another three years, get my learners permit, and only after that would be let me get behind the wheel. I was furious pissed and stubborn. After weeks of nagging and negotiation he agreed. I had the most bizarre first lesson I have ever had. Dad wouldnt let me sit in the driver’s seat. He had me sit on the passenger’s side and control the steering wheel while he took care of the transmission, brakes and throttle. With no straight roads around, we drove in these ghat roads. All my driving skills were developed and polished on these meandering merciless roads which have made the most seasoned city drivers car sick driving through. I surprised myself as I switched my driving style without missing a beat. Just a mile before i was driving straight and fast, and suddenly I cut my speed without realizing it and was negotiating the curves with the elegance and comfort that left my passenger oblivious of the change in the roads.&lt;/p&gt;
&lt;h1&gt;&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1634.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img style=&quot;border: 0px;&quot; title=&quot;KIOCL&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1634.jpg&quot; alt=&quot;&quot; align=&quot;left&quot; /&gt;&lt;/a&gt; KIOCL&lt;/h1&gt;
&lt;p&gt;After eight hours of driving I passed a signed that said “Welcome to Kudremukh”. Less than a minute later I saw the logo at a distance, a furlong or so away. The logo of Kudremukh Iron Ore Company Limited (KIOCL). It was on the side of the road at a roundabout, as the passed the sign and turned into the township reality dawned on me. 7 years, 3 cities, 3 continents and 25 thousand miles later, I was visiting home again. It was like I remembered it and yet nothing like I thought it would be. Time changes the places, but not nearly as much as it changes the people. The nostalgia one feels is not about how much the place has changed, but how much he has changed over the years. I could see myself 6 years old and braving the elements as I walked to school. Armed with an umbrella to defend myself against the celestial downpour, I marched on towards a school I hated to attend. Amazing how I always walked to the school, but ran my way back to home. When you are small everything appears to be so big. To me Kudremukh was a big town with lots to do. I always invented things to do. All the things that I took great pleasure in indulging when I was a kid seems so immature and boring that it makes me wonder if regression with age starts much earlier than senility. Maybe I am already regressing.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;It was late in the evening when we reached Kudremukh. It was too late to do anything and we were tired after a long day on the road. We checked into the only hotel in town, Sahyadri Bhavan. We called it an early day and got an early start next morning. The first places to be visited were Hanumangundi, Ganga Moola and Varaha Thirta. They were the places that visited every time I visited Kudremukh when I was in college. It seemed only natural that I do that first this time around too. But first we needed permission from the Forest Department. With the forest around Kudremukh being declared a National Park, it would be trespassing to go anywhere into the woods without permission. The staff was really courteous. They seemed to really pleased that an old timer has come back to visit his home town (that’s right, I was now an old timer there). After getting the permit and helping them with some computer trouble that they had, we set off to Hanumangundi.&lt;/p&gt;
&lt;h1&gt;&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1387.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img style=&quot;border: 0px;&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1387.jpg&quot; alt=&quot;&quot; align=&quot;left&quot; /&gt;&lt;/a&gt; Kadambi Falls&lt;/h1&gt;
&lt;p&gt;Varaha Thirtha, Ganga Moola, and Hanumangundi are all on the same road a few miles apart. Hanumangundi is the farthest, so we decided to get there first and drive our way back as we visit the rest of the places. Before we hit any of the places we passed by a small falls called Kadambi Falls. I remembered stopping by this falls each time I drove past this point. True to tradition, I stopped this time too. It has been a while since it had rained, the falls was a trickle compared it to its normal intensity. It was still the same old Kadambi I had always known. We got out to get what might me my last look at the falls. I been here countless number of times before, but somehow I felt I hadn’t been here enough and that I had squandered my chances to seeing more of it. As I let my eyes sink in as much of the view as I could we had visitors. They were so much a part of life in Kudremukh and our forays into the woods that I had completely forgotten about them. The monkeys chanced upon us, they were half a dozen of them. They looked at us with their inimitable curiosity.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1391.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img style=&quot;border: 0px;&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1391.jpg&quot; alt=&quot;&quot; align=&quot;right&quot; /&gt;&lt;/a&gt; The real hosts of the jungle&lt;/p&gt;

&lt;p&gt;It was like they knew we were from here, but something about us didn’t fit. Their hospitality was guarded, with due caution. I said to myself, “What kind of guests are we if we don’t give anything to our hosts?” With a bag of goodies at our disposal I made them feel more thanked. At first the cookies had to be placed on the ground before they would venture to inspect it, but soon they were adventours to actually take it from our hands as we offered it to them.&lt;/p&gt;

&lt;p&gt;After the little party with old friends. We parted ways and started towards Hanumangundi. Its a couple of hundred feet high waterfall that is less easily accessible any many other places close by. On my previous visit to this place, access to this place was nothing more than a two hundred feet steep decline one climbed down with only the low lying branches and the protruding roots of the trees for support. But this time we had steps to climb down. It made things a lot easier, but killed the challenge.&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1402.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img class=&quot;alignleft&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1402.jpg&quot; alt=&quot;&quot; align=&quot;left&quot; /&gt;&lt;/a&gt; I was hoping that I would get to get my hands soiled and dirty trying to get down there, but that was not. we simply climbed down the steps to get to the waterfall. But once I got there, the view put the sparkle back in my eyes. My only thought was “all these years, and we finally meet again”. The falls had lost none of its magnificence. It was still the majestic king of its dominion.&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1409.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img class=&quot;alignright&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1409.jpg&quot; alt=&quot;&quot; align=&quot;right&quot; /&gt;&lt;/a&gt; The fall is at the end end of the valley. In the afternoon, when the sun shines directly on it, the fine spray of the falls that can leave the most unromantic soul spell bound with its beauty and grace. For somebody who love the outdoors, camping, hiking and nature this was paradise. I spent over a hour there and wasnt done by any stretch of imagination. It was blissfully tranquil here. The steps that led back to the top was the only thing that betrayed the close proximity to civilization. The waltz of trees to the orchestra of the wind, the birds, the crickets and cicadas left me mesmerized. I saw the bubbling stream, the glorious waterfall and the thicket that guarded the secret paradise with moist eyes. I had to sit down, &lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1446.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img class=&quot;alignleft&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1446.jpg&quot; alt=&quot;&quot; align=&quot;left&quot; /&gt;&lt;/a&gt;overcome by the beauty of the place. I would always miss this place. I always had, I just didnt know it till then. It was getting late, there were places I had to see. I wished I had more time to spend here. Any amount of time would be insufficient. I tore myself away from there as I climbed up, back to the kingdom of man.&lt;/p&gt;

&lt;p&gt;Next stop was Ganga Moola. It is the birth place of two rivers Tunga and Bhadra. It is a remarkably unremarkable place. It is hard to believe that two rivers could possibly originate from the two trickles in side a small cave whose entrance is a feet and a half tall. It is said that one shouldn’t try to trace the origins of a saint ‘coz like that of a river that is going to be something completely unremarkable, and maybe even an antithesis of what the saint has come to epitomize. I dont know about the saints, but it sure is true of Ganga Moola.
&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1479.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img class=&quot;alignleft&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1479.jpg&quot; alt=&quot;&quot; align=&quot;left&quot; /&gt;&lt;/a&gt;We need to hike a shade less than a mile to get to the base of the thicket beyond which lies the cave that houses Ganga Moola. We pulled over from the road and walked the mile. At we walked towards the thicket we reached a vantage point. The view from here was breath taking! Here is a panoramic view of what I saw.
&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/gangamoolapanned.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img class=&quot;aligncenter&quot; title=&quot;Vantage point near ganga moola&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/gangamoolapanned.jpg&quot; alt=&quot;Panoramaic view on the way to Ganga Moola&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1514.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img class=&quot;alignleft&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1514.jpg&quot; alt=&quot;&quot; align=&quot;left&quot; /&gt;&lt;/a&gt;At the end of our little hike was the entrance to the thicket. The most impressive part of this was the strict defined boundary between the open spaces and the forest. It looked like someone had drawn a line forbidding the jungle to grow any further. There they were, all the trees in a single file like frontier soldiers ready for battle, waiting for the signal from their commander, waiting to scream the battle cry as they charged towards the enemy. If only we had the kind of discipline and restrain they seemed to exude. The trail continued into the thicket, as we walked into the thicket the sudden coolness and breeze had me stall for a moment. It was like walking into an air conditioned building on a hot day, except that this time it felt refreshing instead of relieving. The trail ended at the steps at the top of which lay the entrance to the Ganga Moola cave. &lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1492.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img class=&quot;alignright&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1492.jpg&quot; alt=&quot;&quot; align=&quot;right&quot; /&gt;&lt;/a&gt;It is when we got to there that we realized we didn’t have a flash light. It was pitch dark inside. We couldn’t make any details out. Using the camera’s flash as a light source we gauged the contour of the cave, and the path we have to follow. However, with an entrance that was a feet and a half tall and give feet wide, you don’t have too many options. Taking care not to soil or damage the camera or the camera case, we started crawling inside. I had to use the flash on more than one occasion to find my way. It&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1493.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img class=&quot;alignleft&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1493.jpg&quot; alt=&quot;&quot; /&gt;&lt;/a&gt; was an extremely shallow cave, just 15 feet or so deep. At the end of the cave was an idol that was placed to mark the source of the rivers.  It was dark and damp inside. Inside, the cave roof was over 6 feet high, you could comfortably stand there (if you were shorter than 6 feet). One could hear the distinct sound of trickling water. The floor was wet. I knew that my shirt, trousers, hands and feet were soiled and dirty, but I couldnt care less. It felt great being in there. Surprisingly I felt no claustrophobia. Using the camera focus light as the illumination we had a good view of the place,&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1498.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img class=&quot;alignright&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1498.jpg&quot; alt=&quot;&quot; align=&quot;right&quot; /&gt;&lt;/a&gt; but the hunt for the source of the trickling sound was fruitless. Having seen what we came for, we headed back to our car. The next stop was Varaha Thirta.&lt;/p&gt;

&lt;p&gt;I was in for another surprise when I got to Varaha Tirtha’s entrance, it was not to be. The entrance had disappeared! Actually the entrance had been… ‘abandoned’. nature had reclaimed the entrance to the trail that led to the Varaha Tirtha. But I was not to be outdone that easily. After some scouring and searching I managed &lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1505.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img class=&quot;alignleft&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1505.jpg&quot; alt=&quot;&quot; align=&quot;left&quot; /&gt;&lt;/a&gt;to recognize a faint underused trail. We followed the trail that continued from the main trail that was cut off when the entrance was closed. One has to be swift on the feet and careful about taking steps. That’s ironical coz if you do one, then u cant do the other. Being swift on the feet leaves you little time to think about where your next step is landing. However, if you move too slow you are inviting all the leeches to latch on to you, but if you are too fast, the ground is slippery, and you are sure to have a bad fall. Its easier said than done, by the time I got back to the car, I had more than three of them on me and a fair sized blood stain on my socks. The place is definitely not for the squeamish, or the delicate kind.&lt;/p&gt;

&lt;p&gt;My aunt, uncle, cousin and his wife visiting Kudremukh over 4 years ago. We went to meet with one of my mom’s friends who lived in the hills. There was no motor-able road to their house, so we parked our cars just off the road and started walking through the plains to get to the house. The weather was wet, and the grass damp. Sure enough, its was fiesta for the leeches. We were constant plucking the them off our legs. At some point my cousin’s wife saw a leech on her ankle and her hysteria broke loose. For some inexplicable reason, she was convinced that yelping, vigorously shaking hands (like one were drying it) and hopping on one foot would convince the leech to get off. And so, she proceeded with her theatrics in a attempt to mesmerize the leech into letting go of her leg. In our infinite wisdom, my cousin and I kinda figured that it wouldn’t work. We tried to tell her that she should pluck the leech out, but she wouldn’t do that. Finally my cousin had to hold her to keep her from kicking all about the place while I got the leech off her.
When we finally got to the end of trail, there were more surprises awaiting us. I was expecting the picnic spot that I had known Varaha Tirtha to be, but what I saw bore no semblance to my memories. This place had be truly ‘abandoned’. Varaha Tirtha is called so thanks to a local legend that says that when Lord Varaha (Boar incarnation of Vishnu) descended on earth, there were certain place where he spent time. These places are considered holy places, and this one was supposed to be one of them, and hence the name. Over 20 years ago, there was an ancient idol of Lord Varaha at the site. It was stolen to be smuggled, but the culprit was apprehended in a village 20 miles away. The idol found its way to some museum somewhere. There were some smaller stone idols that replaced the big one.&lt;/p&gt;

&lt;p&gt;At Varaha Tirtha, all we saw was wilderness. We tried making our way to the place where the idols were. It was not easy, all the land marks we knew were gone. With nothing more than a faint heuristic we made our way. When we actually reached the spot, it was virtually unrecognizable. The only thing that betrayed the previous incarnation of the spot was the small three feet waterfall that collected into a water-hole which overflowed into a brook. &lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1520.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img class=&quot;alignleft&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1520.jpg&quot; alt=&quot;&quot; align=&quot;left&quot; /&gt;&lt;/a&gt; The idols were gone, so were the all the signs of civilization ever having known this place. It was weird, almost like my memories were fading even as I was standing there. Was I too late in getting here? Had I already lost somethings I cherished? I could see Varaha Tirtha slipping to obscurity in front of my eyes. I saw it with mixed feelings. One on side, I was glad that nature was returning, there still was hope that the forests could be preserved like virgin reserves. On the other side was my nostalgia, a tinge of regret that I couldnt see Varaha Tirtha like I knew it for one last time. Images of class picnics, clandestine afternoon getaways, family hangouts were fleeting past me and they were all I had to hold on to. What I saw before me was nothing like it. With a heavy heart, I made my way back to the car. It was getting late and we still had places to see. We drove back to Kudremukh town.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Fading embers of the celestial disc streaked across the horizon as we returned to our hotel room. Supper was still a couple of hours away, so we got a head start on seeing the actual town.&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;alignleft&quot; title=&quot;Deer park&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1542-1.jpg&quot; alt=&quot;Deer park&quot; align=&quot;left&quot; /&gt;We started with a self guided tour of the town park. The park is probably the most prominent landmark in the town (or maybe a close second to jayalakshmi wine stores :P ), and arguably the largest. During its heyday it was as well maintained as any park of its size could possibly be. Everything from its exqusite rosaries and psychedelic crotons to the ever nascent mini zoo and the deer park, they were all looked upon with pride and admiration. The crown jewel was the horticulure display that reached its crescendo on &lt;i&gt;vanamahotsav&lt;/i&gt;, sometime in April every year. Park day, as we called it, was a surprisingly popular event that attracted people from towns and villages nearby. There was song and dance, snack stalls, competitions, movie screening and everything else in&lt;img class=&quot;alignright&quot; title=&quot;rabbit cage&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1549-1.jpg&quot; alt=&quot;rabbit cage&quot; align=&quot;right&quot; /&gt; between. This was the one day of the year when everyone in town would gather in one place for one evening with the only intention of having fun. I remember close to 8 such evenings, and every one of them were memorable for some reason or another. Strolling through the park, it was all coming back to me. From the Deer park all the way to the Rabbits’ cage it was journey through time.&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;alignleft&quot; title=&quot;kids in the park&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1547.jpg&quot; alt=&quot;Kids in the park&quot; align=&quot;left&quot; /&gt;As a kid, swings and slides were my favourite. There is a small canal running through the park, emptying into the river. The canal was always full and flowing during the monsoons. Through out my primary school, I inevitably succumbed to temptation and found myself wading in it. The cold, sore throat throat, fever and the livid reaction of my mom always followed, but for some reason (probably stupidity) that never stopped me from doing it again the next time around.&lt;/p&gt;

&lt;p&gt;A visit to Kudremukh cannot be complete without going to the temples. Our first stop was the Shiva temple. Legend has it that sage Agastya used to worship the shivling there, and the temple was constructed around it. There is little to prove or disprove the conjecture, and we leave it at that. As I pulled into the parking area next to the temple I had my first view of the temple. It looked like time had refused to move an inch here. The place was exactly like I had seen it 6 years ago. Absolutely nothing had changed, the most noticable being the abject poverty in which the priest lived.&lt;/p&gt;

&lt;p&gt;If my memory serves me right, it was over 8 years ago that there was a proposal to adorn the sacrosanctum of the temple with a large silver facade that cost over Rs. 1 lakh. The donations came pouring from all corners of the community, from employees of KIOCL to the businessmen and contractors there. The money raised was more than what was needed. The surplus went to the temple coffers. Despite the windfall the priest’s monthly pay was still a three figure sum bordering the four figures. I still remember thinking about the hypocrisy of it all; if the money asked were for the priest’s welfare, I doubt if even a fraction of the funds would have been received. This is not an unsupported statement. The fact that people poured more money into the temple &lt;i&gt;hundi&lt;/i&gt;, than the tip-plate of the priest when he brought it out with the &lt;i&gt;aarati&lt;/i&gt; or the &lt;i&gt;thirtam&lt;/i&gt; is sufficient indication of the outcome of the thought experiment.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1554.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img class=&quot;aligncenter&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1554.jpg&quot; alt=&quot;&quot; align=&quot;left&quot; /&gt;&lt;/a&gt;I took my sneakers off, washed my feet and walked towards the entrance of the temple.  The concrete ground benethe my feet brought back memories of the vibrant social hive that this temple had been the heart of. People used to congregate here almost every monday, and every hindu festival. Women exchanged gossip, men talked office politics, the kids were just happy to run around the place coz their parents were too busy to restrain them. The boys talked about cricket, school and&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1557.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img class=&quot;alignright&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1557.jpg&quot; alt=&quot;pooja&quot; align=&quot;right&quot; /&gt;&lt;/a&gt; homework while the girls talked about god knows what (I was never privy to their conversations). I remember my high school years when the guys used this as an opportunity to steal galnces of their nascent infatuations. Somewhere amidst all this there was the worship and prayer to god, at least thats what everyone walked away believing.&lt;/p&gt;

&lt;p&gt;The silhoutte of Shiva’s statue against the bright light that illuminated the gopuram was view worth my admiration as I stood there for a few seconds&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1555.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img class=&quot;alignleft&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1555.jpg&quot; alt=&quot;&quot; align=&quot;left&quot; /&gt;&lt;/a&gt; soaking it in.  I stepped into the temple and felt like I was 18 again. I could walk around completely blindfolded and know exactly where I was, and where I was going. Its amazing how arrested in time the place was. After a few steps I stopped to look around. The cobwebs on the railings and gate grills recited a sad story of neglect and decay. It is said that the vigor of a community is best reflected in its synagogue. A silent sigh escaped my lips as I reflected on all that this place used to be, and the promise of the bleak future it now held.&lt;/p&gt;

&lt;p&gt;I gave up on religion a long time ago, yet I found myself going through the motions of a poius hindu in the temple. The shiva temple had always been one of my favorites. I used to come here to relax my mind. It had an amazing ability to tranquil my most&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1561.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img class=&quot;aligncenter&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1561.jpg&quot; alt=&quot;decadance&quot; align=&quot;right&quot; /&gt;&lt;/a&gt; troubled thoughts. It was perfect antidote for all the crap that I had to put up with. This was before I received my licence. After I could drive, I used to take dad’s scooter to a place dubbed ‘Morning Glory’. It was at the new spillway for the Lakya Dam that let out all the excess water. The view from there was breathtaking. It was the perfect balm to all my wounds. They closed the access to that place soon after I moved to Bangalore, and I havent been there since.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1615.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img class=&quot;aligncenter&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1615.jpg&quot; alt=&quot;radha krishna temple&quot; align=&quot;left&quot; /&gt;&lt;/a&gt;After my folks made small talk with some of the people at the temple we drove to the Krishna temple built on top of a hillock. My first memories of the place are when I was 4 years old. Mom signed me up for some recitation competition that was supposed to be in the Krishna temple. I had no idea what I meant, all I was told was that I had to recite the sanskrits shlokas that I knew by-heart. I was submitted to the protective custody of my neighbor who was supposed to take me to the temple, make sure I took part and bring me back home. I guess she was bored or maybe her friends were going someplace and she was invited too, I dont know what the exact reason was, but she told me that the competition was over and that we should go back home. I just followed back home only to find my mom screaming at me for being so stupid that I didnt event bother to enquire if the competition was really over, and how I could have missed my chance. As it turns out.. there was still time when I came back, but it was too late to go all the way back there and try my luck.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1553.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img class=&quot;alignright&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1553.jpg&quot; alt=&quot;radha krishna&quot; align=&quot;right&quot; /&gt;&lt;/a&gt;I hadn’t been to this temple that often. It always received a step sisterly treatment due to its location. It wasnt the most easily accessable temple in town. While the shiva temple received all the crowd and adoration, Krishna temple was often the less remembered one. Its only time in the spotlight was on &lt;i&gt;Krishna Janmashtami&lt;/i&gt;.&lt;/p&gt;

&lt;p&gt;After our brief te-a-te with the temples we got back into the car and drove around the township in the evening. We still had a little time to kill before supper, and so I decided to so some nocturnal sightseeing. Driving around in the night is a completely different experience in Kuudremukh. The place looks completely different after sundown. During the day, the entire is one glorious park with scattered human intrusions. By night, all that is left of the hoards of trees, vast open spaces and majestic grasslands is an empty void. It is only the street lights that remain in sight. They looks like a broken string of pearls. Bright, shining, beautiful, but lonely. Each one of them seeking the other, and the ethereal string that holds them together.&lt;/p&gt;

&lt;p&gt;By day, it is the inhabitation that looks out of place, and by night its the void between them that does. What a strange inversion of perception!&lt;/p&gt;

&lt;p&gt;Driving around the town, I hit an unlit stretch of the road. It wasnt a long stretch at all; just a few street lights that were busted. The only illumination was the headlights of my car. As the headlights zipped past the trees that adorn the sides of the road, my mind went 10 years back in time. Some of the most beautiful memories of Kudremukh came back to me.&lt;/p&gt;

&lt;p&gt;Kudremukh was always a favored town by the Karnataka Electricity Board. We seldom lost power supply, and when it did it wasn’t for more than 15 minutes. However, there would be times when something major would fault, and we’d lose power of hours in the night. This, although not frequent, happened often enough for me to remember them. I think I was in my high school when the entire township blacked out due to one such fault. That black out removed all the prisms that I was seeing Kudremukh through. It was for the first time that I saw the town in all its glory, all its modesty, and all its divinity. It was a full moon light. The black out had extinguished all the light that clouded our sight. It was a night as god intended it to be; a virgin display of tranquility in motion. I couldnt resist myself. I had to bask in the milky ether. I took a long walk that night, with nothing but the moon to show me the way. I can still vividly recall the pale roads that looked like satin from afar. The trees looked like a row of white chess pawns with the game just about to begin. The vast empty spaces between the pearls were gone, so were the pearls, replaced by a spaghetti of resplendent cotton yarn that stretched form one end of the valley to the other. It marked the begining of my love affair with Kudremukh’s dark side. After that night, every time there was a power outage in the night, I was out and about. It was with a heavy heart I returned home if the town were to illuminate itself before my stroll was over.&lt;/p&gt;

&lt;p&gt;It was supper and a good night sleep. There was a town I had to visit next day.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;I woke up at the crack of dawn. I was excited, yet nervous. It was a weird mixture of eagerness and hesitancy. After eight long years, I was going back to visit my high school again, and perhaps for the last time.&lt;/p&gt;

&lt;p&gt;But first, we had to get there. It was a short drive from the hotel. Took less than five minutes. But when you have to walk the distance, it can seem a whole lot longer. However, if you are five years old, the walk is timeless. In fact, my first memory of school is one of me walking back home on the first day of school.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1562.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img title=&quot;K. V. Kudremukh&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1562.jpg&quot; alt=&quot;K.V. Kudremukh&quot; align=&quot;left&quot; /&gt;&lt;/a&gt; The school started every year during the last week of June. The year 1985 was no exception. I was five years old, and stepping into the school for the first time. I had no idea what school was supposed to be like. It was just a fun thing to do, and besides, everyone else was doing it. The school started at about 9 in the morning, at 12:15 there was a bell for lunch. Like I had mentioned earlier, Kudremukh is synonymous with rain; lots and lots of rain. The monsoon starts sometime towards the end of June. The monsoon was particularly generous on this day of June in 1985 when my school opened its door to me for the first time. At 12:15 that afternoon, it was pouring cats and dogs. The visibility had dropped to a 100 yards or so. Now, Iheard the bell ring at 12:15, and all the kids scampered away. The classroom was empty. So my thoughts were, “This is great! School’s over! I get to go back home!”. I pack up my bag, pick up my raincoat, and head out to the school bus shelter to hitch a ride home.&lt;/p&gt;

&lt;p&gt;The bus shelter, for some weird reason (one of them being it wasn’t time yet), was empty. There was no bus to take me home. Undeterred, I decided to walk home. I must have been quite a sight to behold that glorious day. There I was, a five year old kid, walking back home in pouring rain, with school back on my back, and a raincoat tucked under my arm. That’s right, the raincoat was under my arm! I didnt think it necessary to put it on in case of rain. As far as I was concern, the raincoat was merely an ornamental device. The interesting thing about five year olds is that they have no concept of time and only a rudimentary concept of distance. My house was over 2 miles from the school. I have absolutely no idea how long it took to cover that distance (must have been over an hour), and at that time I didnt even know who far home was. I just kept walking, wet to the bone, until I reached home. When I reached home, I was bewildered at my mom’s bewilderment on seeing me all wet, with the raincoat in my arm, back home hours before I was supposed to. A hot shower and some hot chocolate drink later I was told that I shouldnt be doing this again.&lt;/p&gt;

&lt;p&gt;The location of my school always left me wondering what the town planners were smoking when they drew up the master plan for the town. We have a fairly big school, and next it is the school playground. Now between the school, and the playground, smack bang in between, we have the town bus stand! Wonder what they were thinking: “We’ll have school children walking/running from the school to the playground and back all day. So here what we cab do about it. We’ll build the bus station right in the path between the school and the playground to maximize the collision rate. It a novel technique for population control.” Fortunately,  no kid has found him/herself under the tires so far.&lt;/p&gt;

&lt;p&gt;Across the street from the school we have the town hospital! I can only imagine what the planners were thinking on this one “We need to build immunity among the children. So here’s what we’ll do about it. We will build a hospital right next to the school so that any virus that might affect anyone will find its way to the hospital, and hence to the school. That way, the kids will be exposed all the pathogens we find, helping them along in boosting their immune system.” I am surprised Kudremukh doesnt have a high mortality rate among school kids. Defies logic!&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1600.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img title=&quot;kudremukh bus station&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1600.jpg&quot; alt=&quot;kudremukh bus stand&quot; align=&quot;left&quot; /&gt;&lt;/a&gt; So anyway, a five minute drive later, I was in front of my old school. One look at it and you knew, the school was dying. The whole town was dying for that matter. The school sign was missing!The school has a large sign that announced itself to everyone who passed by. I felt a small stab in my heart to see two empty poles in place of that sign. I turned around to see the town bus station. Yup, the same one that stands between the school and the playground. Somehow I couldnt get myself to step into the school compound. I wasnt ready yet. I didnt know why, but I knew it wasnt time yet.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1563.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img title=&quot;School Playground&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1563.jpg&quot; alt=&quot;Arjun Kridangan&quot; align=&quot;right&quot; /&gt;&lt;/a&gt; I turned around, walked past the bus station and made my way to the school playground. Winters morning are typically cold and misty in Kudremukh. In December, you dont see the sun until about 11 in the morning. This December was no exception, and it was still 9 in the morning. I walked into the playground, and couldnt see through the mist to the other end of it. The playground was just like I remembered it. Nothing has changed. This was the site for the annual sports day at school. The day where all the students in the school compete against each other in track and field events. I remember it was a day there was no school and you get to run and play to your heart’s content. Life couldnt have been happier then. This was also the time to settle old scores with people. Now the score settling is not something we talked about in open. But if there were any accounts to be settled, we knew when to do it, and where.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1567.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img title=&quot;Cattle in playground&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1567.jpg&quot; alt=&quot;Cattle in playground&quot; align=&quot;left&quot; /&gt;&lt;/a&gt; On a typical school day, school kids didn’t get to the playground until noon. So until that time the playground was a cattle bastion. This day was nothing different. The cattle, egrets, and dogs were everywhere. The cows in Kudremukh, so for reason, were extremely docile. You could walk up to any cow in the street or pasture, and they would let you come close to them, and even let you touch them or herd them. They were alwaysextremely friendly and submissive, but they werent afraid of the humans. It was a relationship of trust and respect that had developed over time. Something I havent seen anywhere else in any other town or city that I have been&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1578.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img title=&quot;dog in playground&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1578.jpg&quot; alt=&quot;Dog in playground&quot; align=&quot;right&quot; /&gt;&lt;/a&gt; to. The dogs, on the other hand, are a completely different matter. The personalities among dogs were as diverse as the people. And these were strays! Some would walk up to you, others would run like the wind when they saw anything remotely human. I managed to capture one such dog. It was running from something, I couldnt quite figure out what, but I did get him at an interesting pose.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1576.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img title=&quot;Kids in Playground&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1576.jpg&quot; alt=&quot;Kids in playground&quot; align=&quot;left&quot; /&gt;&lt;/a&gt; I turned around to see some elementary kids playing in the playground shelter area. They were playing some self invented game that involved the poles that held the structure together. I know that because I did the same when I was in elementary school. A bunch of us would get together to play, and have no where to play coz all the older boys has commandeered all the playgrounds and areas. All of it happened in the pecking order, and we were the last in that order. So all we had were shelters not unlike the one I saw the kids playing in. We couldnt play any of the games that we knew, so we had to invent games to play in each esoteric venue that was dished out to us. Somehow we never complained about that. We always had a good time, even if the game was just made up, and scores didn’t matter. When I saw those kids at the shelter, I was taken to my old school days when all it took for me to be happy was a patch of ground to play on, and friends to play with. Funny how things change and complicate themselves with age.&lt;/p&gt;

&lt;p&gt;I turned around to go back to the school. Somehow this time, I knew it was time. I had a feeling that this was the last time I will ever get to see the school again. I wanted to make sure that I dont miss anything this time, coz’ there may not be another time to come back.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;I walked past the gates into the school grounds. As I walked on the asphalted ground towards the administrative building, my conscious was overwhelmed by all the memories that rushed out of my unconscious like bat out of hell. I had to stand still a second and compose myself before I could continue.&lt;/p&gt;

&lt;p&gt;I walked past the flag pole which hoists the national flag every day when school is in session. Seeing that flagpole again reminded me of an incident that I thought I had forgotten for a long time. It was the talk of my class for days. I guess I was in fifth standard (I dont quite remember). It was pleasent, warm morning, and so the school decided to have the morning assembly and prayer outside at the (outdoor) basketball court. &lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1586_1.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img title=&quot;Outdoor Basketball court&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1586_1.jpg&quot; alt=&quot;Outdoor basketball court&quot; align=&quot;left&quot; /&gt;&lt;/a&gt; When the assembly was in progress, the school principal was escorted to the flag pole to hoist the national flag. The principal pulled the rope on the pole to unfurl the flag, but it would not loosen. It was bound a little too tight. So the principal pulled harder and the rope snapped (it was an old withered rope). The bundle that was the national flag of India came crashing down like a dead rat dropped by an eagle. There was a moment of stunned silence, followed by sparse giggles at the incident. The person responsible for conducting the assembly was confused as to what to do next. Typically, you order the assembly to salute the flag after its unfurled. But this obviously wasnt the typical case. Confused by the unexpected turn of events, and unimaginative by god’s grace, he ordered the assembly to salure the flag. That did it, the crowd burst out laughing at that order. It took a couple of minutes and intense shouting from all the teachers and staff to restore order again and continue with the prayer. The incident was the talk of the class for quite a few days. And for some reason, of all the things that had happened involving the flag pole, this incident was the one that seemed to pop into my head first, and stayed.&lt;/p&gt;

&lt;p&gt;The asphalted ground I was walking on had been our playground for quite a few years. In elementary school, when we were at the very bottom in the pecking order, this was the only place we found that we could play in. I remember my share of falls on that abrasive ground with rather painful lacerations. Yet somehow that never really bothered us. It was all a part of having fun. And now, here I am, a grown man who is afraid to fall down and get hurt. Feels like the world makes a coward out of you as you grow older.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1583_1.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img title=&quot;school entrance&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1583_1.jpg&quot; alt=&quot;school entrance&quot; align=&quot;left&quot; /&gt;&lt;/a&gt; Eventually, after what felt like a long time, I found myself in front of the entrance to the main building. When I walked in, I saw everything as it was when I was a student, and yet so much had changed. I shape was still the same, but the form was completely different. I had no idea who was still working the the school. I want sure if I knew anyone there at all. Not sure who or what to expect, I walked into the principal’s office.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1584.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img title=&quot;Mr. Rana&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1584.jpg&quot; alt=&quot;Mr. Rana &quot; align=&quot;right&quot; /&gt;&lt;/a&gt; When I walked into the office, I saw a familar face. It was Mr. Rana, frequently called the grand old man of the school. He has been a teacher in the school ever since I can remember. There are so many stories about him, I could write a book recounting all the tales. He was known for his long impromptu speeches to kill time if the school assembly were to conclude ahead of time. He was determined not to let the kids go before the alloted time. We were often bored to death by his speeches, but that never deterred him. He had a lot of appreciation and respect for which often cut both ways. If there was anything to be done, I was the one he called upon. It didnt matter how busy I was with everything else, I had to get these things done. Be it writing an essay on some subject for the school magazine, or representing the school in a quiz, speech, or debate competitions, I was his man for the job, and I was to do it even if it killed me. On the other hand, I could get away with a lot. He always had my back on any mischef that I may commit (of which there were dime a dozen).&lt;/p&gt;

&lt;p&gt;His classes were the best. He was a Hindi teacher, and would often go into tangents in Hindi classes that had nothing to do with the topic in discussion, but he enjoyed those monologues nonetheless. It would often go on for 10-15 min leaving precious little time to get any actual reading done in the class. When he did teach, or describe poems and essays, he would get so immersed in the description that he often forgot where he was, and who he was lecturing to. He tripped over the teacher’s chair on more than one occasion as he was vigorously describing lines in a poem with his inimitable animated style. He had the sort of passion that couldn’t be rivaled by anyone around him. All said and done, it was relieving to be taught by someone with that kind of passions. He was much respected by all student for that. That made him more of an icon in the school’s folklore.&lt;/p&gt;

&lt;p&gt;Mr. Rana was now the acting principal of the school. When I walked into the principal’s office, he was overjoyed to see me. He welcomed me with open arms and had the peon bring in some special tea just for me. We talked for a while, each of us bringing the other up to speed on how things have been going on in each other’s lives, and the school itself. He was really proud of me and how far I had come with my education and stuff. After a half hour conversation, I took leave of him to explore more of the school I spent 12 years of my life in.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1585.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img title=&quot;Assembly Hall (outside)&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1585.jpg&quot; alt=&quot;Assembly Hall (outside)&quot; align=&quot;left&quot; /&gt;&lt;/a&gt; I spent the rest of the morning walking around in the school premises. I started with the assembly hall that was next to the basket ball court. The assembly hall doubled as the school auditorium as well. It was the venue for all morning assemblies (when it wasn’t bright and sunny outside). All the kids assembled every morning there for the daily prayer. Girls on the right half, boys on the left; the smallest class in the front and the oldest class in the back. The prayer was secular (i.e., no reference to any particular religion) except for the mention of God in it. This was followed by the thought for the day, and then came a one minute silence. To this day I haven’t been able to figure out why we had to observe that one minute silence. It was never explained to us, and we didn’t ask. Following the silence was the National Pledge that went something like this:&lt;/p&gt;

&lt;p&gt;&lt;i&gt; India is my country.
All Indians are my brothers and sisters. I love my country, and I am proud of its rich and varied heritage.
I shall always strive to be worthy of it.
I shall give my parents, teachers and all elders respect and treat everyone with courtesy.
To my country and my people, I pledge my devotion.
In their well being and prosperity alone lies my happiness.&lt;/i&gt;&lt;/p&gt;

&lt;p&gt;The pledged was followed by the news, and we ended the assembly with the national anthem. Between news and the anthem often we’d have some song recitation, or announcements. If we were in an indulgent mood, we’d even have an informative article read, or have an oral quiz. All of this was performed by students. My personal favourite was the quiz. I was often the quiz master, and when I wasnt, I was in the audience attempting all the questions that others couldnt answer correctly. Those were fun times.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1592.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img title=&quot;Assembly Hall (Inside)&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1592.jpg&quot; alt=&quot;Assembly Hall (Inside)&quot; align=&quot;left&quot; /&gt;&lt;/a&gt; When I got to the assembly hall, what I saw shocked and saddened me. That hall was in a terrible state of disrepair with broken windows, peeling paints, and water stains on all the walls. This was not the assembly hall I remembered. Unfortunately, this was an isolated case, as I was to discover soon, the entire school was in a state of disrepair, or &lt;a href=&quot;http://en.wikipedia.org/wiki/Arrested_decay&quot; target=&quot;_blank&quot;&gt;arrested decay&lt;/a&gt; . I lingered on for a few minutes, taking the whole scene in. Reliving many memories that I had of that place, and moved on to see rest of the school campus.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1598.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img title=&quot;what was our mini cricket ground&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1598.jpg&quot; alt=&quot;What was our mini cricket ground&quot; align=&quot;right&quot; /&gt;&lt;/a&gt;The next place of visit was the makeshift cricket ground that we had. It was at the back of our high school classrooms. Every year, as sports day neared, many competitions were held in the small gounds at the back of the school. Our makeshift cricket ground was the location where Kho-Kho and Kabbadi was often played as a part of annual sports events. For as long was I was in school, these ground were maintained in really good conditions. The Kho-Kho poles were always there, and the kabbaddi lines were sort of etched into the ground. But what I saw when I got there was nothing like what I remembered. There was no semblence to the ground that I knew. It was just an abandoned plain ground with patches of grass all over the place. It didnt look like students even used that ground anymore. I had a sinking feeling that the school that I remembered and cherished so long no longer existed. The building that I saw before me, and its surroundings were a hollow shell of what I knew as Kendriya Vidyalaya Kudremukh. It is often said that places dont change, people do. When you go back to a place after a long time, the change you percieve is you, not the place. But this is not so here. The place has definitely changed; its dying a painful death.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1601.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img title=&quot;Gone to the dogs&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1601.jpg&quot; alt=&quot;Gone to the dogs&quot; align=&quot;left&quot; /&gt;&lt;/a&gt; I walked on to the ground where, as a elementary kid, I often played in. This place had gone to the dogs, quite literally! There were dogs there! I guess kids dont play there either anymore. Kinda made me wonder where the school kids played anyway. Maybe the lifestyle here has changed to a point where the building and surroundings are the same, but the way people go aoubt their lives has no semblence to how we did over 10 years ago. It si indeed amazing when you think about it. Its the arrow of time. You can’t change the direction in which it moves, and the changes it brings about are permanent insofar as any changes that it brings about are forever a part of the history.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1603.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img title=&quot;volleyball court&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1603.jpg&quot; alt=&quot;volleyball court&quot; align=&quot;right&quot; /&gt;&lt;/a&gt; Moving on, the volleyball field was no different. All that stood to remind you of its past were two poles between which once hung a loose volleyball net. All that was left of the high jump pit in the southeast end of the volleyball court was hard solid ground leaving no trace of what it once had been. It was like the place that I knew was melting away and was being replaced by something that was something that was not all too dissimilar, but quite unlike what was. All I needed was the right prism to look through and it was all there, the place exactly as I remembered it.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1608.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img title=&quot;Lily Pond&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1608.jpg&quot; alt=&quot;Lily pond&quot; align=&quot;left&quot; /&gt;&lt;/a&gt; At this point, I was honestly scared to see my beloved Lily pond, at least what was a lily pond. I still remember the pond from my memories of elementary and middle school classes. The lilies bloomed sometime in September-October; just after the rains. The pond was teeming with life. There were fishes, crabs, frogs, and even an occasional water snake. We often walked around the pond, catching tadpoles, and some of the braver folks played with the crabs that didnt seem too happy with our intrusion. When I got to the lily pond, all I saw was a rough patch of grass where once water flowed. The outlines were still there, with my prisms of the mind, I could still see the pond, with its flowers, fishes,  and crabs. My heart raced every so slightly faster when I thought about how excited we were when the rains stopped and all of us rushed to the pond for our day out. We used to spend hours there, looking for our tadpoles and crabs. The highlight of the day was when someone spotted a water snake and all of us rushed to get a glimpse from a safe distance. There was an inexplicible mix of curiosity, fear, and respect in the air. Through my prisms, I saw it all again, experienced it all again. And now it was time to bid my school goodbye and move on.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1637.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img title=&quot;Janta Market&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1637.jpg&quot; alt=&quot;Janta Market&quot; align=&quot;left&quot; /&gt;&lt;/a&gt; My next stop was what was traditionally called ‘Janta Market’, it was later rechristened to ‘Bhadra Market’, but people didn’t really refer to it by the new name all that much. Janta Market was shopping central for Kudremukh. My family made weekly trips to Janta Market for produce, groceries, stationaries etc. This was yet another place where we ran into people that we liked, didn’t like, didn’t care for, but nevertheless knew. Being the small mining community that it was, it was awfully difficult to move unnoticed.&lt;/p&gt;

&lt;p&gt;Janta Market was also the place for the customary ‘community work’ that I had to do as a boy scout to earn my community service badge. For as long as I can remember, Janta Market was always an untidy place. Once a year the boy scout group would show up there and clean the place up, giving our token contribution to community service. It was one of the biggest farces that I have ever been a part of. I take that back, the education system is the biggest farce I have even been a part of (it neither provides education, nor is a system). But the ‘community service’ was definitely a farce I am not too proud of. What was hilarious was that right after we clean a section of the market, the vendor sitting there would throw some garbage right where we just cleaned. We’d look at him and he’d go, something to the effect, “Hey, you guys walk in here once in a blue moon for your pathetic scouting merit badge, and you expect us to change the way we do things for you? Get a life!” He did have a point. We weren’t there to clean the place, we were there for the merit badge. But back then, it was considered ok. because everyone was doing the same; everyone from the employees, to the spouses, to the kids. It was always all about doing the least to get away with it. In a small town like Kudremukh, its inevitable that people develop such an attitude; Kudremukh was no different from the American suburbia.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1636.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img title=&quot;Janta Market Clean&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1636.jpg&quot; alt=&quot;Janta Market Clean&quot; align=&quot;right&quot; /&gt;&lt;/a&gt; This time when I landed at Janta Market, I couldn’t believe what I was seeing. The place was actually clean! Almost spotless! Well, at least something has gotten better in the last ten years! The place was virtually deserted, I had gotten there too early to see any activity there. Besides, most of the people who lived there had left Kudremukh for better job prospects. So there weren’t enough to fill the place up to begin with.&lt;/p&gt;

&lt;p&gt;I strolled around in the market for 10 minutes or so. There wasn’t much to do. Also, there was more of the town to see before leaving Kudremukh. So I got back into my car and started driving around in the town.&lt;/p&gt;

&lt;p&gt;Driving around, I realized that Kudremukh spread over a relatively large area. It is much larger than it needs to be. There are pockets of dense housing, known as ‘Sectors’, and large areas of dense vegetation. Not all together unlike Texas. Some say that such a dispersion of housing was planned to inflate the road laying budget. Larger the area, higher is the road building cost, higher are the kickbacks that the planners and administrators get. Others say its because the planners wanted to use up all the land that was appropriated for the township. As the population grew, more building could be built between the Sectors. Whatever the reason may be, there is no denying that a lot more of the precious rain forests were cut down for the township than was necessary, and that, in my opinion is just wasteful and irresponsible.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1620.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img title=&quot;Church&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1620.jpg&quot; alt=&quot;Church&quot; align=&quot;left&quot; /&gt;&lt;/a&gt; After an hour or so of driveby sightseeing, I arrived at my penultimate destination before leaving Kudremukh. The town church. Kudremukh, despite its fairly large Christian population belonging to various denominations, had just one church. The different denominations congregated at different times during the day. Kinda like time sharing. The church is located well out of the way on top of a hill with no civilization to speak of nearby. The last time I was here was in my seventh grade when the entire class went on a picnic, and on our way back we decided to take a short break in the church. I don’t recall much from what I saw back then. But from &lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1622.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img title=&quot;Nativity&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1622.jpg&quot; alt=&quot;Nativity&quot; align=&quot;right&quot; /&gt;&lt;/a&gt; what I could remember, the place hadn’t changed much at all. The church doors were locked, I had look through the window bars to catch a glimpse of the inside. It was December, Christmas was round the corner. The church was all decorated with the nativity scene in one corner. On the whole, an unremarkable building. Then again, that comment would apply to all the buildings in Kudremukh. Aesthetics was last in the list of desirables when the town was built.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1614.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img title=&quot;Mosque&quot; src=&quot;http://img.photobucket.com/albums/v92/semanticoverload/kudremukh/IMG_1614.jpg&quot; alt=&quot;Mosque&quot; align=&quot;left&quot; /&gt;&lt;/a&gt; After seeing the church, I wanted to see the only mosque in Kudremukh, but we were running late. So the closest I could get was the view from the top of a nearby hill. It was again, a whole unremarbale building. I figured that I wasn’t missing much. Besides, in my 18 years of stay in Kudremukh I hadn’t been to the mosque even once. So there was no real desire to see it anymore. A photograph from afar was all that I took of the mosque with me, and drove back to the hotel to check out.&lt;/p&gt;

&lt;p&gt;Half an hour later,  we were checked-out and on the road back to Bangalore. We drove past the KIOCL sign, past the hairpin-bend curves, past the tea estates, past everything I knew I might never be able to come back to. As much as I missed Kudremukh, and all the time I spent there, I had a stange tranquil feeling come over me. I had finally found closure. I had taken the time to bid the town goodbye, and somehow that seemed to make all the difference.&lt;/p&gt;
</content>
 </entry>
 

</feed>
